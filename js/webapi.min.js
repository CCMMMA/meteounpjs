/*! jNavionicsChart - v2.1.19 - 2018-11-27 */(function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["_temp/add_poi_categories"]=function(context){return function(){var $o;return $o=[],$o.push("<div class='jnc-qi'>\n  <div class='jnc-component-header'>\n    <div class='jnc-component-header-title'>\n      <div class='has-buttons jnc-component-header-title-text'>Categories</div>\n    </div>\n    <div class='jnc-btn-back jnc-component-header-btn-left jnc-simple-btn jnc-simple-btn-light-blue'>Back</div>\n  </div>\n  <div class='jnc-qi-content'>\n    <div class='jnc-qi-content-inner'>\n      <div class='jnc-qi-scrollable'>\n        <div class='jnc-categories-content-row'>\n          <div class='jnc-categories-content-col'>\n            <div class='jnc-grid jnc-grid-table jnc-poi-categories-grid'>\n              <div class='jnc-grid-row'>\n                <div class='jnc-grid-col jnc-grid-col-3'>\n                  <div class='jnc-poi-category'>\n                    <div class='jnc-poi-icon'>\n                      <div class='jnc-poi-icon-row'>\n                        <div class='jnc-poi-icon-col'>\n                          <img src='http://placehold.it/64x64.jpg'>\n                        </div>\n                      </div>\n                    </div>\n                    <div class='jnc-poi-title'>Generic Info</div>\n                  </div>\n                </div>\n                <div class='jnc-grid-col jnc-grid-col-3'>\n                  <div class='jnc-poi-category'>\n                    <div class='jnc-poi-icon'>\n                      <div class='jnc-poi-icon-row'>\n                        <div class='jnc-poi-icon-col'>\n                          <img src='http://placehold.it/64x64.jpg'>\n                        </div>\n                      </div>\n                    </div>\n                    <div class='jnc-poi-title'>Rock Wreck Obstruction</div>\n                  </div>\n                </div>\n                <div class='jnc-grid-col jnc-grid-col-3'>\n                  <div class='jnc-poi-category'>\n                    <div class='jnc-poi-icon'>\n                      <div class='jnc-poi-icon-row'>\n                        <div class='jnc-poi-icon-col'>\n                          <img src='http://placehold.it/64x64.jpg'>\n                        </div>\n                      </div>\n                    </div>\n                    <div class='jnc-poi-title'>Buoys</div>\n                  </div>\n                </div>\n                <div class='jnc-grid-col jnc-grid-col-3'>\n                  <div class='jnc-poi-category'>\n                    <div class='jnc-poi-icon'>\n                      <div class='jnc-poi-icon-row'>\n                        <div class='jnc-poi-icon-col'>\n                          <img src='http://placehold.it/64x64.jpg'>\n                        </div>\n                      </div>\n                    </div>\n                    <div class='jnc-poi-title'>Beacons & Signs</div>\n                  </div>\n                </div>\n              </div>\n              <div class='jnc-grid-row'>\n                <div class='jnc-grid-col jnc-grid-col-3'>\n                  <div class='jnc-poi-category'>\n                    <div class='jnc-poi-icon'>\n                      <div class='jnc-poi-icon-row'>\n                        <div class='jnc-poi-icon-col'>\n                          <img src='http://placehold.it/64x64.jpg'>\n                        </div>\n                      </div>\n                    </div>\n                    <div class='jnc-poi-title'>Lights</div>\n                  </div>\n                </div>\n                <div class='jnc-grid-col jnc-grid-col-3'>\n                  <div class='jnc-poi-category'>\n                    <div class='jnc-poi-icon'>\n                      <div class='jnc-poi-icon-row'>\n                        <div class='jnc-poi-icon-col'>\n                          <img src='http://placehold.it/64x64.jpg'>\n                        </div>\n                      </div>\n                    </div>\n                    <div class='jnc-poi-title'>Shops & Repairs</div>\n                  </div>\n                </div>\n                <div class='jnc-grid-col jnc-grid-col-3'>\n                  <div class='jnc-poi-category'>\n                    <div class='jnc-poi-icon'>\n                      <div class='jnc-poi-icon-row'>\n                        <div class='jnc-poi-icon-col'>\n                          <img src='http://placehold.it/64x64.jpg'>\n                        </div>\n                      </div>\n                    </div>\n                    <div class='jnc-poi-title'>Ports & Marinas</div>\n                  </div>\n                </div>\n                <div class='jnc-grid-col jnc-grid-col-3'>\n                  <div class='jnc-poi-category'>\n                    <div class='jnc-poi-icon'>\n                      <div class='jnc-poi-icon-row'>\n                        <div class='jnc-poi-icon-col'>\n                          <img src='http://placehold.it/64x64.jpg'>\n                        </div>\n                      </div>\n                    </div>\n                    <div class='jnc-poi-title'>Anchorages Moorings</div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>"),$o.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}).call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["_temp/add_poi_diving_spot"]=function(context){return function(){var $o;return $o=[],$o.push("<div class='jnc-qi'>\n  <div class='jnc-component-header'>\n    <div class='jnc-btn-back jnc-component-header-btn-left jnc-simple-btn jnc-simple-btn-light-blue'>Back</div>\n  </div>\n  <div class='jnc-qi-content'>\n    <div class='jnc-qi-content-inner'>\n      <div class='jnc-qi-add-poi jnc-qi-scrollable'>\n        <div class='jnc-poi-type'>\n          <div class='jnc-poi-type-col jnc-poi-type-icon'>\n            <img src='http://placehold.it/60x60.jpg'>\n          </div>\n          <div class='jnc-poi-type-col jnc-poi-type-title'>Diving Spot</div>\n        </div>\n        <div class='jnc-form-group'>\n          <div class='jnc-form-title'>Name</div>\n          <input class='jnc-form-control' type='text'>\n        </div>\n        <div class='jnc-form-group'>\n          <div class='jnc-form-title'>Information</div>\n          <textarea class='jnc-form-control' rows='5'></textarea>\n        </div>\n        <div class='jnc-form-group'>\n          <div class='jnc-form-title'>Value of sounding</div>\n          <input class='jnc-form-control' type='text'>\n        </div>\n        <div class='jnc-form-group'>\n          <div class='jnc-form-title'>Depth unit</div>\n          <div class='jnc-view-btn-group jnc-view-btn-group-bordered justified'>\n            <div class='jnc-view-btn-section'>\n              <a class='is-active jnc-view-btn jnc-view-btn-default' href='#'>Meters</a>\n            </div>\n            <div class='jnc-view-btn-section'>\n              <a class='jnc-view-btn jnc-view-btn-default' href='#'>Feet</a>\n            </div>\n            <div class='jnc-view-btn-section'>\n              <a class='jnc-view-btn jnc-view-btn-default' href='#'>Fathom</a>\n            </div>\n          </div>\n        </div>\n        <div class='jnc-poi-add'>\n          <a class='jnc-simple-btn jnc-simple-btn-green' href='#'>Add</a>\n        </div>\n        <div class='jnc-poi-info-text'>Thank you. This input will be shared with the Navionics community.</div>\n      </div>\n    </div>\n  </div>\n</div>"),$o.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["_temp/add_poi_fuel_station"]=function(context){return function(){var $o;return $o=[],$o.push("<div class='jnc-qi'>\n  <div class='jnc-component-header'>\n    <div class='jnc-btn-back jnc-component-header-btn-left jnc-simple-btn jnc-simple-btn-light-blue'>Back</div>\n  </div>\n  <div class='jnc-qi-content'>\n    <div class='jnc-qi-content-inner'>\n      <div class='jnc-qi-add-poi jnc-qi-scrollable'>\n        <div class='jnc-poi-type'>\n          <div class='jnc-poi-type-col jnc-poi-type-icon'>\n            <img src='http://placehold.it/60x60.jpg'>\n          </div>\n          <div class='jnc-poi-type-col jnc-poi-type-title'>Fuel Station</div>\n        </div>\n        <div class='jnc-form-group'>\n          <div class='jnc-form-title'>Name</div>\n          <input class='jnc-form-control' type='text'>\n        </div>\n        <label class='jnc-form-checkbox jnc-form-group'>\n          <div class='jnc-form-title'>On Dock</div>\n          <input class='jnc-checkbox-input' type='checkbox'>\n          <span class='jnc-checkbox-item'></span>\n        </label>\n        <div class='jnc-fuel-prices-row'>\n          <div class='jnc-form-group'>\n            <div class='jnc-form-title'>Gasoline</div>\n            <input class='jnc-form-control' type='text'>\n          </div>\n          <div class='jnc-form-group'>\n            <div class='jnc-form-title'>Diesel</div>\n            <input class='jnc-form-control' type='text'>\n          </div>\n        </div>\n        <div class='jnc-form-group'>\n          <div class='jnc-form-title'>vhf</div>\n          <input class='jnc-form-control' type='text'>\n        </div>\n        <div class='jnc-form-group'>\n          <div class='jnc-form-title'>Telephone</div>\n          <input class='jnc-form-control' type='text'>\n        </div>\n        <div class='jnc-form-group'>\n          <div class='jnc-form-title'>Street</div>\n          <input class='jnc-form-control' type='text'>\n        </div>\n        <div class='jnc-form-group'>\n          <div class='jnc-form-title'>City</div>\n          <input class='jnc-form-control' type='text'>\n        </div>\n        <div class='jnc-form-group'>\n          <div class='jnc-form-title'>Zip Code</div>\n          <input class='jnc-form-control' type='text'>\n        </div>\n        <div class='jnc-form-group'>\n          <div class='jnc-form-title'>Information</div>\n          <textarea class='jnc-form-control' rows='5'></textarea>\n        </div>\n        <div class='jnc-form-title'>Rate & Review</div>\n        <div class='jnc-review-form'>\n          <div class='jnc-review-rating'>\n            <div class='jnc-rating-selector'>\n              <label>\n                <input type='radio' name='rating' value='5'>\n                <span class='jnc-rating-star'></span>\n              </label>\n              <label>\n                <input type='radio' name='rating' value='4'>\n                <span class='jnc-rating-star'></span>\n              </label>\n              <label class='is-active'>\n                <input type='radio' name='rating' value='3' checked='checked'>\n                <span class='jnc-rating-star'></span>\n              </label>\n              <label>\n                <input type='radio' name='rating' value='2'>\n                <span class='jnc-rating-star'></span>\n              </label>\n              <label>\n                <input type='radio' name='rating' value='1'>\n                <span class='jnc-rating-star'></span>\n              </label>\n            </div>\n          </div>\n          <input class='jnc-review-title' type='text' placeholder='Title'>\n          <textarea class='jnc-review-text' type='text' placeholder='Review' rows='8'></textarea>\n        </div>\n        <div class='jnc-poi-add'>\n          <a class='jnc-simple-btn jnc-simple-btn-green' href='#'>Add</a>\n        </div>\n        <div class='jnc-poi-info-text'>Thank you. This input will be shared with the Navionics community.</div>\n      </div>\n    </div>\n  </div>\n</div>"),$o.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["_temp/add_poi_red_lateral"]=function(context){return function(){var $o;return $o=[],$o.push("<div class='jnc-qi'>\n  <div class='jnc-component-header'>\n    <div class='jnc-btn-back jnc-component-header-btn-left jnc-simple-btn jnc-simple-btn-light-blue'>Back</div>\n  </div>\n  <div class='jnc-qi-content'>\n    <div class='jnc-qi-content-inner'>\n      <div class='jnc-qi-add-poi jnc-qi-scrollable'>\n        <div class='jnc-poi-type'>\n          <div class='jnc-poi-type-col jnc-poi-type-icon'>\n            <img src='http://placehold.it/60x60.jpg'>\n          </div>\n          <div class='jnc-poi-type-col jnc-poi-type-title'>Red Lateral</div>\n        </div>\n        <div class='jnc-form-group'>\n          <div class='jnc-form-title'>Name</div>\n          <input class='jnc-form-control' type='text'>\n        </div>\n        <div class='jnc-form-group'>\n          <div class='jnc-form-title'>Information</div>\n          <textarea class='jnc-form-control' rows='5'></textarea>\n        </div>\n        <label class='jnc-form-checkbox jnc-form-group'>\n          <div class='jnc-form-title'>For signal:</div>\n          <input class='jnc-checkbox-input' type='checkbox'>\n          <span class='jnc-checkbox-item'></span>\n        </label>\n        <label class='jnc-form-checkbox jnc-form-group'>\n          <div class='jnc-form-title'>Light:</div>\n          <input class='jnc-checkbox-input' type='checkbox'>\n          <span class='jnc-checkbox-item'></span>\n        </label>\n        <div class='jnc-poi-add'>\n          <a class='jnc-simple-btn jnc-simple-btn-green' href='#'>Add</a>\n        </div>\n        <div class='jnc-poi-info-text'>Thank you. This input will be shared with the Navionics community.</div>\n      </div>\n    </div>\n  </div>\n</div>"),$o.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["_temp/add_poi_restaurant"]=function(context){return function(){var $o;return $o=[],$o.push("<div class='jnc-qi'>\n  <div class='jnc-component-header'>\n    <div class='jnc-btn-back jnc-component-header-btn-left jnc-simple-btn jnc-simple-btn-light-blue'>Back</div>\n  </div>\n  <div class='jnc-qi-content'>\n    <div class='jnc-qi-content-inner'>\n      <div class='jnc-qi-add-poi jnc-qi-scrollable'>\n        <div class='jnc-poi-type'>\n          <div class='jnc-poi-type-col jnc-poi-type-icon'>\n            <img src='http://placehold.it/60x60.jpg'>\n          </div>\n          <div class='jnc-poi-type-col jnc-poi-type-title'>Restaurant</div>\n        </div>\n        <div class='jnc-form-group'>\n          <div class='jnc-form-title'>Name</div>\n          <input class='jnc-form-control' type='text'>\n        </div>\n        <div class='jnc-form-group'>\n          <div class='jnc-form-title'>Telephone</div>\n          <input class='jnc-form-control' type='text'>\n        </div>\n        <div class='jnc-form-group'>\n          <div class='jnc-form-title'>Street</div>\n          <input class='jnc-form-control' type='text'>\n        </div>\n        <div class='jnc-form-group'>\n          <div class='jnc-form-title'>City</div>\n          <input class='jnc-form-control' type='text'>\n        </div>\n        <div class='jnc-form-group'>\n          <div class='jnc-form-title'>Zip Code</div>\n          <input class='jnc-form-control' type='text'>\n        </div>\n        <div class='jnc-form-group'>\n          <div class='jnc-form-title'>Website</div>\n          <input class='jnc-form-control' type='text'>\n        </div>\n        <div class='jnc-form-group'>\n          <div class='jnc-form-title'>Information</div>\n          <textarea class='jnc-form-control' rows='5'></textarea>\n        </div>\n        <div class='jnc-form-title'>Rate & Review</div>\n        <div class='jnc-review-form'>\n          <div class='jnc-review-rating'>\n            <div class='jnc-rating-selector'>\n              <label>\n                <input type='radio' name='rating' value='5'>\n                <span class='jnc-rating-star'></span>\n              </label>\n              <label>\n                <input type='radio' name='rating' value='4'>\n                <span class='jnc-rating-star'></span>\n              </label>\n              <label class='is-active'>\n                <input type='radio' name='rating' value='3' checked='checked'>\n                <span class='jnc-rating-star'></span>\n              </label>\n              <label>\n                <input type='radio' name='rating' value='2'>\n                <span class='jnc-rating-star'></span>\n              </label>\n              <label>\n                <input type='radio' name='rating' value='1'>\n                <span class='jnc-rating-star'></span>\n              </label>\n            </div>\n          </div>\n          <input class='jnc-review-title' type='text' placeholder='Title'>\n          <textarea class='jnc-review-text' type='text' placeholder='Review' rows='8'></textarea>\n        </div>\n        <div class='jnc-poi-add'>\n          <a class='jnc-simple-btn jnc-simple-btn-green' href='#'>Add</a>\n        </div>\n        <div class='jnc-poi-info-text'>Thank you. This input will be shared with the Navionics community.</div>\n      </div>\n    </div>\n  </div>\n</div>"),$o.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["_temp/add_poi_trail_head"]=function(context){return function(){var $o;return $o=[],$o.push("<div class='jnc-qi'>\n  <div class='jnc-component-header'>\n    <div class='jnc-btn-back jnc-component-header-btn-left jnc-simple-btn jnc-simple-btn-light-blue'>Back</div>\n  </div>\n  <div class='jnc-qi-content'>\n    <div class='jnc-qi-content-inner'>\n      <div class='jnc-qi-add-poi jnc-qi-scrollable'>\n        <div class='jnc-poi-type'>\n          <div class='jnc-poi-type-col jnc-poi-type-icon'>\n            <img src='http://placehold.it/60x60.jpg'>\n          </div>\n          <div class='jnc-poi-type-col jnc-poi-type-title'>Trail Head</div>\n        </div>\n        <div class='jnc-form-group'>\n          <div class='jnc-form-title'>Name</div>\n          <input class='jnc-form-control' type='text'>\n        </div>\n        <div class='jnc-form-group'>\n          <div class='jnc-form-title'>Information</div>\n          <textarea class='jnc-form-control' rows='5'></textarea>\n        </div>\n        <div class='jnc-poi-add'>\n          <a class='jnc-simple-btn jnc-simple-btn-green' href='#'>Add</a>\n        </div>\n        <div class='jnc-poi-info-text'>Thank you. This input will be shared with the Navionics community.</div>\n      </div>\n    </div>\n  </div>\n</div>"),$o.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["_temp/crosshair"]=function(context){return function(){var $o;return $o=[],$o.push("<div class='jnc-crosshair'>\n  <div class='jnc-crosshair-x'></div>\n  <div class='jnc-crosshair-y'></div>\n  <div class='jnc-crosshair-plus'></div>\n  <div class='jnc-square-icon na-icon na-icon-help'></div>\n</div>"),$o.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["_temp/fuel_info"]=function(context){return function(){var $o;return $o=[],$o.push("<div class='jnc-qi'>\n  <div class='jnc-component-header'>\n    <div class='jnc-component-header-title'>\n      <div class='has-buttons jnc-component-header-title-text'>Fuel station name</div>\n    </div>\n    <div class='jnc-btn-back jnc-component-header-btn-left jnc-simple-btn jnc-simple-btn-light-blue'>Back</div>\n  </div>\n  <div class='jnc-qi-content'>\n    <div class='jnc-qi-content-inner'>\n      <div class='jnc-qi-bottom-from-btn-footer jnc-qi-scrollable'>\n        <div class='jnc-qi-head'>\n          <ul class='jnc-qi-buttons jnc-qi-separator'>\n            <li>\n              <a class='jnc-qi-btn-lg jnc-simple-btn jnc-simple-btn-green' href='#'>\n                <i class='na-icon na-icon-drive-to'></i>\n                Drive To\n              </a>\n            </li>\n            <li>\n              <a class='jnc-qi-btn-lg jnc-simple-btn jnc-simple-btn-light-blue' href='#'>\n                <i class='na-icon na-icon-boat-to'></i>\n                Boat To\n              </a>\n            </li>\n          </ul>\n          <ul class='jnc-qi-groups'>\n            <li>\n              <a class='jnc-qi-group-item' href='#'>\n                <div class='jnc-qi-group-icon'>\n                  <div class='jnc-qi-group-icon-row'>\n                    <div class='jnc-qi-group-icon-col'>\n                      <div class='jnc-qi-icon jnc-qi-icon-distance'></div>\n                    </div>\n                  </div>\n                </div>\n                <div class='jnc-qi-group-title'>Distance</div>\n              </a>\n            </li>\n            <li>\n              <a class='jnc-qi-group-item' href='#'>\n                <div class='jnc-qi-group-icon'>\n                  <div class='jnc-qi-group-icon-row'>\n                    <div class='jnc-qi-group-icon-col'>\n                      <div class='jnc-qi-icon jnc-qi-icon-magazines'></div>\n                    </div>\n                  </div>\n                </div>\n                <div class='jnc-qi-group-title'>Magazines</div>\n              </a>\n            </li>\n            <li>\n              <a class='jnc-qi-group-item' href='#'>\n                <div class='jnc-qi-group-icon'>\n                  <div class='jnc-qi-group-icon-row'>\n                    <div class='jnc-qi-group-icon-col'>\n                      <div class='jnc-qi-icon jnc-qi-icon-weather'></div>\n                    </div>\n                  </div>\n                </div>\n                <div class='jnc-qi-group-title'>Weather</div>\n              </a>\n            </li>\n            <li>\n              <a class='jnc-qi-group-item' href='#'>\n                <div class='jnc-qi-group-icon'>\n                  <div class='jnc-qi-group-icon-row'>\n                    <div class='jnc-qi-group-icon-col'>\n                      <div class='jnc-qi-icon jnc-qi-icon-marker'></div>\n                    </div>\n                  </div>\n                </div>\n                <div class='jnc-qi-group-title'>Marker</div>\n              </a>\n            </li>\n          </ul>\n        </div>\n        <div class='jnc-fuel-info-content'>\n          <div class='jnc-qi-inner-block jnc-qi-separator'>\n            <div class='jnc-fuel-prices'>\n              <ul class='jnc-fuel-info-prices-row'>\n                <li class='jnc-fuel-price'>\n                  <div class='jnc-form-group'>\n                    <div class='jnc-form-title'>Gasoline</div>\n                    <input class='jnc-form-control' type='text' value='1.493'>\n                  </div>\n                  <div class='jnc-fuel-info-updated'>Updated 26 Mar, 2015</div>\n                </li>\n                <li class='jnc-fuel-price'>\n                  <div class='jnc-form-group'>\n                    <div class='jnc-form-title'>Diesel</div>\n                    <input class='jnc-form-control' type='text' value='1.375'>\n                  </div>\n                  <div class='jnc-fuel-info-updated'>Updated 26 Mar, 2015</div>\n                </li>\n              </ul>\n            </div>\n            <div class='jnc-qi-btn-lg jnc-simple-btn jnc-simple-btn-light-blue'>Compare Prices</div>\n          </div>\n          <div class='jnc-params-page jnc-params-page-fuel'>\n            <div class='jnc-qi-object'>\n              <div class='jnc-qi-object-title'></div>\n              <div class='jnc-qi-object-list'>\n                <div class='jnc-qi-object-item'>\n                  <div class='jnc-qi-object-item-row'>\n                    <div class='jnc-qi-object-item-col jnc-qi-object-item-image'>\n                      <img src='http://placehold.it/58x58.jpg'>\n                    </div>\n                    <div class='jnc-qi-object-item-col jnc-qi-object-item-name'>Tel: +39 0187608037</div>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div class='jnc-qi-object'>\n              <div class='jnc-qi-object-title'></div>\n              <div class='jnc-qi-object-list'>\n                <div class='jnc-qi-object-item'>\n                  <div class='jnc-qi-object-item-row'>\n                    <div class='jnc-qi-object-item-col jnc-qi-object-item-name'>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer luctus imperdiet nibh, in efficitur nulla auctor a. Nulla mauris dolor, dapibus at viverra quis, vestibulum id risus. Integer viverra enim vel urna luctus hendrerit. Vestibulum feugiat fermentum dolor in tempus.</div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div class='jnc-qi-inner-block'>\n            <div class='jnc-fuel-info-btns jnc-grid'>\n              <div class='jnc-grid-row'>\n                <div class='jnc-grid-col jnc-grid-col-6'>\n                  <div class='jnc-qi-btn-lg jnc-simple-btn jnc-simple-btn-light-blue'>\n                    <i class='na-icon na-icon-edit'></i>\n                    Edit\n                  </div>\n                </div>\n                <div class='jnc-grid-col jnc-grid-col-6'>\n                  <div class='jnc-qi-btn-lg jnc-simple-btn jnc-simple-btn-light-blue'>\n                    <i class='na-icon na-icon-move'></i>\n                    Move\n                  </div>\n                </div>\n              </div>\n              <div class='jnc-grid-row'>\n                <div class='jnc-grid-col jnc-grid-col-12'>\n                  <div class='jnc-qi-btn-lg jnc-simple-btn jnc-simple-btn-blue-official'>\n                    <i class='na-icon na-icon-abuse'></i>\n                    Report Abuse\n                  </div>\n                </div>\n              </div>\n              <div class='jnc-grid-row'>\n                <div class='jnc-grid-col jnc-grid-col-12'>\n                  <div class='jnc-qi-btn-lg jnc-simple-btn jnc-simple-btn-red'>\n                    <i class='na-icon na-icon-trash'></i>\n                    Delete\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class='jnc-qi-btn-footer'>\n        <a class='jnc-qi-object-rate-btn jnc-simple-btn jnc-simple-btn-light-blue' href='#'>Rate & Review</a>\n      </div>\n    </div>\n  </div>\n</div>"),$o.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["_temp/fuel_stations"]=function(context){return function(){var $o;return $o=[],$o.push("<div class='has-sorting-bar jnc-qi'>\n  <div class='jnc-component-header'>\n    <div class='jnc-component-header-title'>\n      <div class='has-buttons jnc-component-header-title-text'>Fuel Stations</div>\n    </div>\n    <div class='jnc-component-header-btn-left jnc-simple-btn jnc-simple-btn-light-blue'>Close</div>\n  </div>\n  <div class='jnc-sorting-bar'>\n    <div class='jnc-sorting-bar-btns'>\n      <a class='is-active' href='#'>Gasoline Price</a>\n      <a href='#'>Diesel Price</a>\n      <a href='#'>Distance</a>\n    </div>\n  </div>\n  <div class='jnc-qi-content'>\n    <div class='jnc-qi-content-inner'>\n      <div class='jnc-qi-scrollable'>\n        <div class='jnc-params-page'>\n          <div class='jnc-params-list jnc-qi-list'>\n            <a class='jnc-params-link' href='#'>\n              <div class='jnc-qi-object-item-row'>\n                <div class='jnc-qi-link-col-img jnc-qi-object-item-col'>\n                  <img src='http://placehold.it/32x32.jpg&text=IMG'>\n                </div>\n                <div class='jnc-qi-link-col-title jnc-qi-object-item-col'>\n                  <div>Here will be title</div>\n                  <div class='jnc-qi-fuel-distance'>0.0 km</div>\n                </div>\n                <div class='jnc-qi-link-col-fuel jnc-qi-object-item-col'>\n                  <div class='jnc-fuel-table'>\n                    <div class='jnc-fuel-row'>\n                      <div class='jnc-fuel-col'>Gasoline</div>\n                      <div class='jnc-fuel-col jnc-fuel-val'>11,00</div>\n                    </div>\n                    <div class='jnc-fuel-row'>\n                      <div class='jnc-fuel-col'>Diesel</div>\n                      <div class='jnc-fuel-col jnc-fuel-val'>22,00</div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </a>\n            <a class='jnc-params-link' href='#'>\n              <div class='jnc-qi-object-item-row'>\n                <div class='jnc-qi-link-col-img jnc-qi-object-item-col'>\n                  <img src='http://placehold.it/32x32.jpg&text=IMG'>\n                </div>\n                <div class='jnc-qi-link-col-title jnc-qi-object-item-col'>\n                  <div>Here will be title</div>\n                  <div class='jnc-qi-fuel-distance'>0.0 km</div>\n                </div>\n                <div class='jnc-qi-link-col-fuel jnc-qi-object-item-col'>\n                  <div class='jnc-fuel-table'>\n                    <div class='jnc-fuel-row'>\n                      <div class='jnc-fuel-col'>Gasoline</div>\n                      <div class='jnc-fuel-col jnc-fuel-val'>11,00</div>\n                    </div>\n                    <div class='jnc-fuel-row'>\n                      <div class='jnc-fuel-col'>Diesel</div>\n                      <div class='jnc-fuel-col jnc-fuel-val'>22,00</div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>"),$o.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["_temp/object_info"]=function(context){return function(){var $o;return $o=[],
$o.push("<div class='jnc-qi'>\n  <div class='jnc-component-header'>\n    <div class='jnc-component-header-title'>\n      <div class='has-buttons jnc-component-header-title-text'>Bocca Di Magra</div>\n    </div>\n    <div class='jnc-btn-back jnc-component-header-btn-left jnc-simple-btn jnc-simple-btn-light-blue'>Back</div>\n  </div>\n  <div class='jnc-qi-content'>\n    <div class='jnc-qi-content-inner'>\n      <div class='jnc-params-page jnc-qi-bottom-from-btn-footer jnc-qi-scrollable'>\n        <div class='jnc-qi-object'>\n          <div class='jnc-qi-object-title'>Fuel</div>\n          <div class='jnc-qi-object-list'>\n            <div class='jnc-qi-object-item'>\n              <div class='jnc-qi-object-item-row'>\n                <div class='jnc-qi-object-item-col jnc-qi-object-item-name'>Name only</div>\n              </div>\n            </div>\n            <a class='jnc-qi-object-item' href='#'>\n              <div class='jnc-qi-object-item-row'>\n                <div class='jnc-qi-object-item-col jnc-qi-object-item-name'>Link</div>\n              </div>\n            </a>\n          </div>\n        </div>\n        <div class='jnc-qi-object'>\n          <div class='jnc-qi-object-title'></div>\n          <div class='jnc-qi-object-list'>\n            <div class='jnc-qi-object-item'>\n              <div class='jnc-qi-object-item-row'>\n                <div class='jnc-qi-object-item-col jnc-qi-object-item-image'>\n                  <img src='http://placehold.it/58x58.jpg'>\n                </div>\n                <div class='jnc-qi-object-item-col jnc-qi-object-item-name'>Tel: +39 0187608037</div>\n              </div>\n            </div>\n            <a class='jnc-qi-object-item' href='#'>\n              <div class='jnc-qi-object-item-row'>\n                <div class='jnc-qi-object-item-col jnc-qi-object-item-image'>\n                  <img src='http://placehold.it/58x58.jpg'>\n                </div>\n                <div class='jnc-qi-object-item-col jnc-qi-object-item-name'>Tel: +39 0187608037</div>\n              </div>\n            </a>\n          </div>\n        </div>\n        <div class='jnc-qi-object'>\n          <div class='jnc-qi-object-title'></div>\n          <div class='jnc-qi-object-list'>\n            <div class='jnc-qi-object-item'>\n              <div class='jnc-qi-object-item-row'>\n                <div class='jnc-qi-object-item-col jnc-qi-object-item-name'>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer luctus imperdiet nibh, in efficitur nulla auctor a. Nulla mauris dolor, dapibus at viverra quis, vestibulum id risus. Integer viverra enim vel urna luctus hendrerit. Vestibulum feugiat fermentum dolor in tempus.</div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class='jnc-qi-btn-footer'>\n        <a class='jnc-qi-object-rate-btn jnc-simple-btn jnc-simple-btn-light-blue' href='#'>Rate & Review</a>\n      </div>\n    </div>\n  </div>\n</div>"),$o.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["_temp/object_info_list"]=function(context){return function(){var $o;return $o=[],$o.push("<div class='jnc-qi'>\n  <div class='jnc-component-header'>\n    <div class='jnc-component-header-title'>\n      <div class='has-buttons jnc-component-header-title-text'>\n        <div>54° 14.242' N</div>\n        <div>26° 31.307' E</div>\n      </div>\n    </div>\n    <div class='jnc-component-header-btn-left jnc-simple-btn jnc-simple-btn-light-blue'>Map</div>\n  </div>\n  <div class='jnc-qi-content'>\n    <div class='jnc-qi-content-inner'>\n      <div class='jnc-params-page jnc-qi-scrollable'>\n        <div class='jnc-params-list jnc-qi-list'>\n          <a class='jnc-params-link' href='#'>\n            <div class='jnc-qi-object-item-row'>\n              <div class='jnc-qi-link-col-img jnc-qi-object-item-col'>\n                <img src='http://placehold.it/32x32.jpg&text=IMG'>\n              </div>\n              <div class='jnc-qi-link-col-title jnc-qi-object-item-col'>\n                Here will be title\n              </div>\n              <div class='jnc-qi-link-col-arrow jnc-qi-object-item-col'>\n                <i class='na-icon na-icon-thin-arrow-right'></i>\n              </div>\n            </div>\n          </a>\n          <a class='jnc-params-link' href='#'>\n            <div class='jnc-qi-object-item-row'>\n              <div class='jnc-qi-link-col-img jnc-qi-object-item-col'>\n                <img src='http://placehold.it/32x32.jpg&text=IMG'>\n              </div>\n              <div class='jnc-qi-link-col-title jnc-qi-object-item-col'>\n                Here will be title\n              </div>\n            </div>\n          </a>\n          <a class='jnc-params-link' href='#'>\n            <div class='jnc-qi-object-item-row'>\n              <div class='jnc-qi-link-col-img jnc-qi-object-item-col'>\n                <img src='http://placehold.it/32x32.jpg&text=IMG'>\n              </div>\n              <div class='jnc-qi-link-col-title jnc-qi-object-item-col'>\n                Here will be title\n              </div>\n            </div>\n          </a>\n          <a class='jnc-params-link' href='#'>\n            <div class='jnc-qi-object-item-row'>\n              <div class='jnc-qi-link-col-img jnc-qi-object-item-col'>\n                <img src='http://placehold.it/32x32.jpg&text=IMG'>\n              </div>\n              <div class='jnc-qi-link-col-title jnc-qi-object-item-col'>\n                Here will be title\n              </div>\n              <div class='jnc-qi-link-col-arrow jnc-qi-object-item-col'>\n                <i class='na-icon na-icon-thin-arrow-right'></i>\n              </div>\n            </div>\n          </a>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>"),$o.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["_temp/quick_info"]=function(context){return function(){var $o;return $o=[],$o.push("<div class='jnc-qi'>\n  <div class='jnc-component-header'>\n    <div class='jnc-component-header-title'>\n      <div class='has-buttons jnc-component-header-title-text'>\n        <div>54° 14.242' N</div>\n        <div>26° 31.307' E</div>\n      </div>\n    </div>\n    <div class='jnc-component-header-btn-left jnc-simple-btn jnc-simple-btn-light-blue'>Map</div>\n  </div>\n  <div class='jnc-qi-content'>\n    <div class='jnc-qi-content-inner'>\n      <div class='jnc-qi-scrollable'>\n        <div class='jnc-qi-head'>\n          <ul class='jnc-qi-buttons jnc-qi-separator'>\n            <li>\n              <a class='jnc-qi-btn-lg jnc-simple-btn jnc-simple-btn-green' href='#'>Edit Map</a>\n            </li>\n            <li>\n              <a class='jnc-qi-btn-lg jnc-simple-btn jnc-simple-btn-light-blue' href='#'>\n                <i class='na-icon na-icon-boat-to'></i>\n                Boat To\n              </a>\n            </li>\n          </ul>\n          <ul class='jnc-qi-groups'>\n            <li>\n              <a class='jnc-qi-group-item' href='#'>\n                <div class='jnc-qi-group-icon'>\n                  <div class='jnc-qi-group-icon-row'>\n                    <div class='jnc-qi-group-icon-col'>\n                      <div class='jnc-qi-icon jnc-qi-icon-distance'></div>\n                    </div>\n                  </div>\n                </div>\n                <div class='jnc-qi-group-title'>Distance</div>\n              </a>\n            </li>\n            <li>\n              <a class='jnc-qi-group-item' href='#'>\n                <div class='jnc-qi-group-icon'>\n                  <div class='jnc-qi-group-icon-row'>\n                    <div class='jnc-qi-group-icon-col'>\n                      <div class='jnc-qi-icon jnc-qi-icon-magazines'></div>\n                    </div>\n                  </div>\n                </div>\n                <div class='jnc-qi-group-title'>Magazines</div>\n              </a>\n            </li>\n            <li>\n              <a class='jnc-qi-group-item' href='#'>\n                <div class='jnc-qi-group-icon'>\n                  <div class='jnc-qi-group-icon-row'>\n                    <div class='jnc-qi-group-icon-col'>\n                      <div class='jnc-qi-icon jnc-qi-icon-weather'></div>\n                    </div>\n                  </div>\n                </div>\n                <div class='jnc-qi-group-title'>Weather</div>\n              </a>\n            </li>\n            <li>\n              <a class='jnc-qi-group-item' href='#'>\n                <div class='jnc-qi-group-icon'>\n                  <div class='jnc-qi-group-icon-row'>\n                    <div class='jnc-qi-group-icon-col'>\n                      <div class='jnc-qi-icon jnc-qi-icon-marker'></div>\n                    </div>\n                  </div>\n                </div>\n                <div class='jnc-qi-group-title'>Marker</div>\n              </a>\n            </li>\n          </ul>\n        </div>\n        <div class='jnc-params-page'>\n          <div class='jnc-params-list jnc-qi-list'>\n            <a class='jnc-params-link' href='#'>\n              <div class='jnc-qi-object-item-row'>\n                <div class='jnc-qi-link-col-img jnc-qi-object-item-col'>\n                  <img src='http://placehold.it/32x32.jpg&text=IMG'>\n                </div>\n                <div class='jnc-qi-link-col-title jnc-qi-object-item-col'>\n                  <div>Here will be title</div>\n                  <div class='jnc-rating'>\n                    <div class='jnc-rating-stars'>\n                      <i class='na-icon na-icon-star-filled'></i>\n                      <i class='na-icon na-icon-star-filled'></i>\n                      <i class='na-icon na-icon-star-filled-half'></i>\n                      <i class='na-icon na-icon-star'></i>\n                      <i class='na-icon na-icon-star'></i>\n                    </div>\n                    <div class='jnc-rating-votes'>(10)</div>\n                  </div>\n                </div>\n                <div class='jnc-qi-link-col-arrow jnc-qi-object-item-col'>\n                  <i class='na-icon na-icon-thin-arrow-right'></i>\n                </div>\n              </div>\n            </a>\n            <a class='jnc-params-link' href='#'>\n              <div class='jnc-qi-object-item-row'>\n                <div class='jnc-qi-link-col-img jnc-qi-object-item-col'>\n                  <img src='http://placehold.it/32x32.jpg&text=IMG'>\n                </div>\n                <div class='jnc-qi-link-col-title jnc-qi-object-item-col'>\n                  Here will be title\n                </div>\n                <div class='jnc-qi-link-col-fuel jnc-qi-object-item-col'>\n                  <div class='jnc-fuel-table'>\n                    <div class='jnc-fuel-row'>\n                      <div class='jnc-fuel-col'>Gasoline</div>\n                      <div class='jnc-fuel-col jnc-fuel-val'>11,00</div>\n                    </div>\n                    <div class='jnc-fuel-row'>\n                      <div class='jnc-fuel-col'>Diesel</div>\n                      <div class='jnc-fuel-col jnc-fuel-val'>22,00</div>\n                    </div>\n                  </div>\n                </div>\n                <div class='jnc-qi-link-col-arrow jnc-qi-object-item-col'>\n                  <i class='na-icon na-icon-thin-arrow-right'></i>\n                </div>\n              </div>\n            </a>\n            <div class='jnc-params-link'>\n              <div class='jnc-qi-object-item-row'>\n                <div class='jnc-qi-link-col-img jnc-qi-object-item-col'>\n                  <img src='http://placehold.it/32x32.jpg&text=IMG'>\n                </div>\n                <div class='jnc-qi-link-col-title jnc-qi-object-item-col'>\n                  Here will be title\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>"),$o.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["_temp/square_icon"]=function(context){return function(){var $o;return $o=[],$o.push("<a class='jnc-square-icon na-icon na-icon-help' href='#'></a>"),$o.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["_temp/tc/tides"]=function(context){return function(){var $o;return $o=[],$o.push("<div class='jnc-tc'>\n  <div class='jnc-clearfix jnc-tc-head'>\n    <div class='jnc-tc-details jnc-tc-l'>\n      <a class='jnc-btn-block jnc-simple-btn jnc-simple-btn-light-blue jnc-simple-btn-sm' href='#'>Details</a>\n    </div>\n    <div class='jnc-tc-r'>\n      <div class='jnc-tc-item-title'>Algeciras</div>\n      <div class='jnc-tc-fav'>\n        <i class='na-icon na-icon-star'></i>\n      </div>\n    </div>\n  </div>\n  <div class='jnc-clearfix'>\n    <div class='jnc-tc-l'>\n      <div class='jnc-tc-bar jnc-tc-time'>10:50</div>\n      <div class='jnc-tc-l-widget'>\n        <div class='jnc-tc-widget-block jnc-widget-tides'>\n          <div class='jnc-widget-tides-level' style='height: 40%'></div>\n          <div class='jnc-widget-tides-content'>\n            <div class='jnc-widget-tides-val'>0.16</div>\n            <div class='jnc-tc-widget-measure'>m</div>\n            <div class='jnc-widget-tides-ar jnc-widget-tides-ar-bottom'></div>\n          </div>\n        </div>\n      </div>\n      <div class='jnc-tc-bar jnc-tc-date'>\n        <a class='jnc-btn-block jnc-simple-btn jnc-simple-btn-light-blue jnc-simple-btn-sm' href='#'>Wed 1 Jul</a>\n      </div>\n    </div>\n  </div>\n</div>\n<div class='jnc-tc'>\n  <div class='jnc-clearfix jnc-tc-head'>\n    <div class='jnc-tc-details jnc-tc-l'>\n      <a class='jnc-btn-block jnc-simple-btn jnc-simple-btn-light-blue jnc-simple-btn-sm' href='#'>Details</a>\n    </div>\n    <div class='jnc-tc-r'>\n      <div class='jnc-tc-item-title'>Algeciras</div>\n      <div class='jnc-tc-fav'>\n        <i class='na-icon na-icon-star-filled'></i>\n      </div>\n    </div>\n  </div>\n  <div class='jnc-clearfix'>\n    <div class='jnc-tc-l'>\n      <div class='jnc-tc-bar jnc-tc-time'>10:50</div>\n      <div class='jnc-tc-l-widget'>\n        <div class='jnc-tc-widget-block jnc-widget-currents'>\n          <div class='jnc-current-arrow jnc-current-arrow-pos na-icon na-icon-current-arrow' style='transform: rotate(50deg)'></div>\n          <div class='jnc-grid-table'>\n            <div class='jnc-grid-col'>\n              <div class='jnc-widget-currents-val'>0.22</div>\n              <div class='jnc-tc-widget-measure'>km/h</div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class='jnc-tc-bar jnc-tc-date'>\n        <a class='jnc-btn-block jnc-simple-btn jnc-simple-btn-light-blue jnc-simple-btn-sm' href='#'>Wed 1 Jul</a>\n      </div>\n    </div>\n  </div>\n</div>"),$o.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["_temp/weather"]=function(context){return function(){var $o;return $o=[],$o.push("<div class='jnc-qi'>\n  <div class='jnc-component-header jnc-weather-header'>\n    <div class='jnc-component-header-row jnc-grid-table'>\n      <div class='jnc-component-header-btn-col jnc-grid-col'>\n        <div class='jnc-simple-btn jnc-simple-btn-light-blue'>Cancel</div>\n      </div>\n      <div class='jnc-grid-col'>\n        <div class='has-clear-btn jnc-form-control-container'>\n          <input class='jnc-form-control jnc-form-control-flat jnc-text-bold' type='text' value='Location 1'>\n          <div class='jnc-close-button'></div>\n        </div>\n      </div>\n      <div class='jnc-component-header-btn-col jnc-grid-col'>\n        <div class='jnc-simple-btn jnc-simple-btn-green' id='weather-edit'>Edit</div>\n      </div>\n    </div>\n  </div>\n  <div class='jnc-qi-content'>\n    <div class='jnc-qi-content-inner'>\n      <div class='jnc-qi-bottom-from-btn-footer jnc-qi-scrollable'>\n        <div class='jnc-grid jnc-grid-row jnc-grid-weather'>\n          <div class='jnc-grid-col jnc-grid-col-6'>\n            <div class='jnc-weather-widget jnc-weather-widget-sun'>\n              <div class='jnc-weather-widget-delete'>×</div>\n              <div class='jnc-weather-widget-sun-section'>\n                <div class='jnc-grid-table'>\n                  <div class='jnc-grid-col jnc-grid-col-5'>\n                    <img src='http://placehold.it/40x40.jpg'>\n                  </div>\n                  <div class='jnc-grid-col jnc-grid-col-7'>\n                    <div class='jnc-weather-widget-time'>\n                      <div>\n                        <i class='na-icon na-icon-arrow-up-bordered'></i>\n                        08:08\n                      </div>\n                      <div>\n                        <i class='na-icon na-icon-arrow-down'></i>\n                        22:42\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div class='jnc-weather-widget-sun-section'>\n                <div class='jnc-grid-table'>\n                  <div class='jnc-grid-col jnc-grid-col-5'>\n                    <img src='http://placehold.it/40x40.jpg'>\n                  </div>\n                  <div class='jnc-grid-col jnc-grid-col-7'>\n                    <div class='jnc-weather-widget-time'>\n                      <div>\n                        <i class='na-icon na-icon-arrow-up-bordered'></i>\n                        08:08\n                      </div>\n                      <div>\n                        <i class='na-icon na-icon-arrow-down'></i>\n                        22:42\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div class='jnc-grid-col jnc-grid-col-6'>\n            <div class='jnc-weather-widget jnc-weather-widget-wind'>\n              <div class='jnc-weather-widget-delete'>×</div>\n              <div class='jnc-grid-table'>\n                <div class='jnc-grid-col jnc-grid-col-6'>\n                  <img src='http://placehold.it/80x80.jpg'>\n                </div>\n                <div class='jnc-grid-col jnc-grid-col-6'>\n                  <div class='jnc-weather-widget-wind-direction'>WSW</div>\n                  <div class='jnc-weather-widget-lead-val'>\n                    <div class='jnc-measure'>\n                      <span class='jnc-measure-number'>5</span>\n                      <span class='jnc-measure-item'>kts</span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div class='jnc-grid-col jnc-grid-col-6'>\n            <div class='jnc-weather-widget jnc-weather-widget-1'>\n              <div class='jnc-weather-widget-delete'>×</div>\n              <div class='jnc-weather-widget-head'>Algeciras</div>\n              <div class='jnc-weather-widget-content'>\n                <div class='jnc-grid-table'>\n                  <div class='jnc-grid-col jnc-grid-col-6'>\n                    <img src='http://placehold.it/80x80.jpg'>\n                  </div>\n                  <div class='jnc-grid-col jnc-grid-col-6'>\n                    <div class='jnc-weather-widget-time'>\n                      <i class='na-icon na-icon-arrow-up-bordered'></i>\n                      08:08\n                    </div>\n                    <div class='jnc-weather-widget-lead-val'>\n                      <div class='jnc-measure'>\n                        <span class='jnc-measure-number'>0\n                        <span>.16</span>\n                        </span>\n                        <span class='jnc-measure-item'>m</span>\n                      </div>\n                    </div>\n                    <div class='jnc-weather-widget-time'>\n                      <i class='na-icon na-icon-arrow-down'></i>\n                      08:08\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div class='jnc-grid-col jnc-grid-col-6'>\n            <div class='jnc-weather-widget jnc-weather-widget-1'>\n              <div class='jnc-weather-widget-delete'>×</div>\n              <div class='jnc-weather-widget-head'>117_Gibraltar_C</div>\n              <div class='jnc-weather-widget-content'>\n                <div class='jnc-grid-table'>\n                  <div class='jnc-grid-col jnc-grid-col-6'>\n                    <img src='http://placehold.it/80x80.jpg'>\n                  </div>\n                  <div class='jnc-grid-col jnc-grid-col-6'>\n                    <div class='jnc-weather-widget-time'>\n                      <i class='na-icon na-icon-arrow-up-bordered'></i>\n                      08:08\n                    </div>\n                    <div class='jnc-weather-widget-lead-val'>\n                      <div class='jnc-measure'>\n                        <span class='jnc-measure-number'>0\n                        <span>.19</span>\n                        </span>\n                        <span class='jnc-measure-item'>km/h</span>\n                      </div>\n                    </div>\n                    <div class='jnc-weather-widget-time'>\n                      <i class='na-icon na-icon-arrow-down'></i>\n                      08:08\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div class='jnc-grid-col jnc-grid-col-6'>\n            <div class='jnc-weather-widget-add'>\n              <div class='jnc-weather-widget-add-row'>\n                <div class='jnc-weather-widget-add-col'>\n                  <div class='jnc-weather-widget-add-block'>\n                    <div class='jnc-weather-widget-add-icon'>+</div>\n                    <div class='jnc-weather-widget-add-text'>Tap to add information</div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div class='jnc-grid-col jnc-grid-col-6'>\n            <div class='is-visible jnc-weather-widget-placeholder'></div>\n          </div>\n        </div>\n      </div>\n      <div class='jnc-qi-btn-footer jnc-qi-btn-footer-color-official'>\n        <div class='jnc-simple-btn jnc-simple-btn-green'>Save this weather location</div>\n      </div>\n    </div>\n  </div>\n</div>"),$o.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"").replace(/[\s\n]*\u0091/gm,"").replace(/\u0092[\s\n]*/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["catalog/catalog"]=function(context){return function(){var $c,$e,$o,name,product,_ref;$e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],$o.push("<div class='jnc-params-page jnc-product-list-container'>\n  <div class='jnc-product-list-title'>"+$e($c(this.translate("chartplotter_charts")))+"</div>\n  <div class='jnc-params-list'>"),_ref=this.products;for(name in _ref)product=_ref[name],$o.push("    <a class='jnc-params-link jnc-product-item' id='"+name+"_href' href='"+$e($c(product.local_url))+"'>\n      <img class='jnc-product-item-img' src='"+$e($c(product.image_url))+"' alt='"+$e($c(name))+"' title='"+$e($c(name))+"'>\n    </a>");return $o.push("  </div>\n  <div class='jnc-product-list'>\n    <div class='jnc-product-list-title'>"+$e($c(this.translate("mobile_apps")))+"</div>\n    <div class='jnc-params-list'>\n      <a class='jnc-params-link jnc-product-item' href='https://itunes.apple.com/us/artist/navionics/id294013906?mt=8' target='_new'>\n        <img class='jnc-product-item-img' src='"+$e($c(this.getContext("/mobile/apple.png")))+"'>\n      </a>\n      <a class='jnc-params-link jnc-product-item' href='https://play.google.com/store/apps/developer?id=Navionics' target='_new'>\n        <img class='jnc-product-item-img' src='"+$e($c(this.getContext("/mobile/google.png")))+"'>\n      </a>\n    </div>\n  </div>\n</div>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["catalog/product"]=function(context){return function(){var $c,$e,$o,productContentClasses;return $e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],this.showDescription&&($o.push("<div class='jnc-product-description'>\n  <a href='"+$e($c(this.productUrl))+"' target='_parent'>\n    <img src='"+$e($c(this.productImageUrl))+"' alt='"+$e($c(this.productDescription))+"' title='"+$e($c(this.productDescription))+"'>\n  </a>\n  <p>"),$o.push("    "+$e($c(this.productDescription))),$o.push("    <a href='"+$e($c(this.productUrl))+"' target='_parent'>"+$e($c(this.translate("buttons.learnMore")))+"</a>\n  </p>\n</div>")),productContentClasses=[!1===this.showDescription&&"no-description",this.showButtonArea?void 0:"no-buttons"],$o.push("<div class='"+["jnc-product-content",""+$e($c(productContentClasses.join(" ")))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'></div>"),this.showButtonArea&&($o.push("<div class='jnc-product-actions'>"),this.showBackButton&&$o.push("  <div class='jnc-view-btn jnc-view-btn-default js-btn-back'>"+$e($c(this.translate("buttons.back")))+"</div>"),$o.push("  <a class='is-disabled jnc-view-btn jnc-view-btn-success js-btn-continue' target='_blank'>"+$e($c(this.translate("get_it_now")))+"</a>\n</div>")),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["catalog/product_group"]=function(context){return function(){var $c,$e,$o,group,groupID,id,region,regionID,_ref,_ref1,_ref2;$e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],$o.push("<ul class='group-list jnc-tabs' data-tab>"),_ref=this.groups;for(id in _ref)group=_ref[id],$o.push("  <li class='"+["jnc-tab-item",""+$e($c(group.default?"active":void 0))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'>\n    <a href='"+$e($c("#"+id))+"' data-group='"+$e($c(id))+"'>"+$e($c(group.title))+"</a>\n  </li>");$o.push("</ul>\n<div class='jnc-tabs-content'>"),_ref1=this.groups;for(groupID in _ref1){if(group=_ref1[groupID],$o.push("  <div class='"+["content",""+$e($c(group.default?"active":void 0))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"' id='"+$e($c(groupID))+"' data-group='"+$e($c(groupID))+"'>"),null!=group.regions){$o.push("    <dl class='accordion' data-accordion>"),_ref2=group.regions;for(regionID in _ref2)region=_ref2[regionID],$o.push("      <dd class='"+$e($c(region.default?"active":void 0))+"'>\n        <a href='"+$e($c("#"+regionID))+"' data-region='"+$e($c(regionID))+"' data-region-name='"+$e($c(region.title))+"'>"+$e($c(region.title))+"\n          <i class='jnc-accordion-arrow na-icon na-icon-thin-arrow-right'></i>\n        </a>\n        <div class='content' id='"+$e($c(regionID))+"'></div>\n      </dd>");$o.push("    </dl>")}$o.push("  </div>")}return $o.push("</div>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["catalog/product_item"]=function(context){return function(){var $c,$e,$o;return $e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],this.show_code?$o.push("<div class='jnc-list-label-secondary'>"+$e($c(this.title))+"</div>\n<div class='jnc-list-label-bullet' style='color: "+$e($c(this.color))+"'></div>\n<div class='jnc-list-label-main'>"+$e($c(this.code))+"</div>"):$o.push("<div class='jnc-list-label-bullet' style='color: "+$e($c(this.color))+"'></div>\n<div class='jnc-list-label-main'>"+$e($c(this.title))+"</div>"),this.lake_list_endpoint&&$o.push("<div class='jnc-list-label-container'>\n  <a class='jnc-list-label-lake jnc-view-btn' href='"+$e($c(this.lake_list_endpoint))+"'>"+$e($c(this.translate("lake_see_list")))+"</a>\n</div>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["catalog/product_region"]=function(context){return function(){var $c,$e,$o,region,regionID,_ref;$e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],$o.push("<div class='jnc-tabs-content'>\n  <div class='active content'>\n    <dl class='accordion' data-accordion>"),_ref=this.regions;for(regionID in _ref)region=_ref[regionID],$o.push("      <dd class='"+$e($c(region.default?"active":void 0))+"'>\n        <a href='"+$e($c("#"+regionID))+"' data-region='"+$e($c(regionID))+"' data-region-name='"+$e($c(region.title))+"'>"+$e($c(region.title))+"\n          <span class='arrow'></span>\n        </a>\n        <div class='content' id='"+$e($c(regionID))+"'></div>\n      </dd>");return $o.push("    </dl>\n  </div>\n</div>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["complex_catalog/list"]=function(context){return function(){var $c,$e,$o,name,product,_ref;$e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],$o.push("<div class='jnc-params-page jnc-product-list-container'>\n  <div class='jnc-product-list-title'>"+$e($c(this.translate("chartplotter_charts")))+"</div>\n  <div class='jnc-params-list'>"),_ref=this.products;for(name in _ref)product=_ref[name],$o.push("    <div class='jnc-params-link jnc-product-item' data-product='"+$e($c(name))+"'>\n      <img class='jnc-product-item-img' src='"+$e($c(product.image_url))+"' alt='"+$e($c(name))+"' title='"+$e($c(name))+"'>\n    </div>");return $o.push("  </div>\n</div>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["kml/generic_kml_data_layout"]=function(context){return function(){var $c,$e,$o
;return $e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],$o.push("<div class='generics-left-panel-container'>\n  <div class='generics-left-panel-top-area'>\n    <div class='left-panel-title'></div>\n  </div>\n  <div class='generics-left-panel-center-area'>\n    <div class='left-panel-content'></div>\n  </div>\n  <div class='generics-left-panel-bottom-area'>\n    <div class='boating'>\n      <a href='http://www.navionics.com/en/mobile-pc-app' target='_new'>\n        <img src='"+$e($c(this.getContext("/share/marine_logo.png")))+"' alt='"+$e($c(this.translate("boating")))+"'>\n      </a>\n    </div>\n    <div class='learn_more'>\n      <a href='http://itunes.com/Apps/Navionics' target='_new'>\n        <img src='"+$e($c(this.getContext("/share/apple_tile.png")))+"'>\n      </a>\n      <a href='https://play.google.com/store/apps/developer?id=Navionics' target='_new'>\n        <img src='"+$e($c(this.getContext("/share/play_tile.png")))+"'>\n      </a>\n      <br>\n      <a href='http://www.navionics.com/en/mobile-pc-app'>\n        <div class='jnc-view-btn jnc-view-btn-default'>"+$e($c(this.translate("buttons.learnMore")))+"</div>\n      </a>\n    </div>\n  </div>\n</div>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["map/cartography_selector"]=function(context){return function(){var $c,$e,$o,buttonClasses,buttonImg,index,item,_ref;$e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],$o.push("<div class='"+["jnc-cartography-popup",""+$e($c(this.isOpened?"is-active":void 0))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'>\n  <div class='jnc-view-btn-group jnc-view-btn-group-bordered'>"),_ref=this.items;for(index in _ref)item=_ref[index],$o.push("    <div class='jnc-view-btn-section'>"),buttonClasses=[item.active?"is-active":void 0],$o.push("      <a class='"+["jnc-view-btn","jnc-view-btn-default",""+$e($c(buttonClasses.join(" ")))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"' data-type='"+$e($c(item.type))+"'>"),null!=item.icon&&$o.push("        <i class='"+["na-icon",""+$e($c(item.icon))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'></i>"),$o.push("        "+$e($c(this.translate(item.title)))),$o.push("      </a>\n    </div>");return $o.push("  </div>\n</div>"),buttonImg=[this.isOpened?"is-active":void 0,this.isDisabled?"is-disabled":void 0,this.currentTypeClass],$o.push("<div class='"+["jnc-cartography","map-btn",""+$e($c(buttonImg.join(" ")))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'></div>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["map/dealer_finder"]=function(context){return function(){var $c,$e,$o;return $e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],$o.push("<div class='jnc-dealer-locator'>\n  <h3 class='jnc-dealer-locator-title'>"+$e($c(this.translate("dealers.title")))+"</h3>\n  <div class='jnc-radio-group'>\n    <span class='jnc-radio-group-button selected' data-type='jnc-search-panel-address'>"+$e($c(this.translate("dealers.by_location")))+"</span>\n    <span class='jnc-radio-group-button' data-type='jnc-search-panel-name'>"+$e($c(this.translate("dealers.by_name")))+"</span>\n  </div>\n  <div class='jnc-search-panel'>\n    <input class='jnc-dealer-input jnc-search-panel-address' placeholder='"+$e($c(this.translate("dealers.location_placeholder")))+"' type='text'>\n    <input class='jnc-dealer-input jnc-search-panel-name' placeholder='"+$e($c(this.translate("dealers.name_placeholder")))+"' type='text' style='display: none;'>\n    <span class='jnc-close-button'></span>\n  </div>\n</div>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["map/distance_ruler"]=function(context){return function(){var $o;return $o=[],$o.push("<div class='distance-ruler map-btn na-icon-distance'></div>"),$o.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["map/distance_ruler_popup"]=function(context){return function(){var $c,$e,$o;return $e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],$o.push("<div class='distance-popup'>\n  <ul class='distance-popup-line'>\n    <li class='distance'></li>\n    <li class='bearing'></li>\n  </ul>\n  <ul class='distance-popup-line'>\n    <li>"+$e($c(this.translate("distance_ruler.distance")))+"</li>\n    <li>"+$e($c(this.translate("distance_ruler.heading")))+"</li>\n  </ul>\n</div>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["map/location_balloon_content"]=function(context){return function(){var $c,$e,$o;return $e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],$o.push("<img class='jnc-balloon-search-img' src='"+$e($c(this.src))+"'>\n<div>"+$c(this.name)+"</div>"),this.hasDetails&&$o.push("<div class='jnc-balloon-info' data-id='"+$e($c(this.objectId))+"'>i</div>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["map/map_view"]=function(context){return function(){var $c,$e,$o;return $e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],$o.push("<div class='navionics-map-container'>\n  <div class='navionics-map'>\n    <div class='layer-control-container' style='display:none'>\n      <select class='overlay-dropdown overlay-dropdown-select'>\n        <option value='NOOVERLAY' selected='"+$e($c("NOOVERLAY"===this.layer))+"'>"+$e($c("No overlay"))+"</option>\n        <option value='TERRAIN' selected='"+$e($c("TERRAIN"===this.layer))+"'>"+$e($c("Terrain"))+"</option>\n        <option value='SATELLITE' selected='"+$e($c("SATELLITE"===this.layer))+"'>"+$e($c("Satellite"))+"</option>\n      </select>\n    </div>\n    <div class='zoom-control-container'>\n      <div class='zoom-controls'>\n        <div class='zoom-container'>\n          <div class='map-btn map-btn-zoom na-icon-plus zoom-in'></div>\n          <div class='map-btn map-btn-zoom na-icon-minus zoom-out'></div>\n        </div>\n      </div>\n    </div>\n    <div class='distance-control-container'>\n      <div class='distance-ruler map-btn na-icon-distance'></div>\n    </div>\n  </div>\n</div>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["map/unit_switcher"]=function(context){return function(){var $c,$e,$o,index,item,_ref;$e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],$o.push("<div class='unit-section-header'>"+$e($c(this.title))+"</div>\n<div class='unit-button-group'>"),_ref=this.items;for(index in _ref)item=_ref[index],$o.push("  <a class='unit-button' href='#' data-value='"+$e($c(item.value))+"'>"+$e($c(item.name))+"</a>");return $o.push("</div>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["ntf/SCL_track_info"]=function(context){return function(){var $c,$e,$o;return $e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],$o.push("<div class='jnc-pb-balloon-content'>\n  <div class='jnc-pb-balloon-section jnc-pb-balloon-title'>"+$c(this.title)+"</div>"),this.track_status&&$o.push("  <div class='jnc-pb-balloon-section jnc-pb-balloon-track-status'>\n    <i class='"+["track-status-icon","na-icon-sonar","status-"+$e($c(this.getStatus().toLowerCase()))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'></i>\n    <span class='jnc-pb-balloon-track-status-title'>"+$e($c(this.t("statuses."+this.getStatus())))+"</span>\n    \x3c!-- %span.jnc-pb-balloon-track-status-info i --\x3e\n  </div>"),$o.push("  <div class='jnc-pb-balloon-section'>"),this.start_date&&$o.push("    <div class='jnc-pb-balloon-date'>"+$c(this.formatDate(this.start_date))+"</div>"),$o.push("    <ul class='jnc-pb-balloon-track-info'>\n      <li>"+$e($c(this.t("start")+":"))),$o.push("        "+$c(this.formatTime(this.start_date,2,!0))),$o.push("      </li>\n      <li>"+$e($c(this.t("end")+":"))),$o.push("        "+$c(this.formatTime(this.end_date,2,!0))),$o.push("      </li>\n      <li>"+$e($c(this.t("distance")+":"))),$o.push("        "+$c(this.formatDistance(this.distance,this.getDistanceDisplayUnit(),JNC.DISTANCE_UNIT.NAUTICAL))),$o.push("      </li>\n      <li>"+$e($c(this.t("duration")+":"))),$o.push("        "+$c(this.formatTimeInterval(this.duration))),$o.push("      </li>\n    </ul>\n    <ul class='jnc-pb-balloon-speed-info'>\n      <li>"+$e($c(this.t("max_speed")+":"))),$o.push("        "+$c(this.formatSpeed(this.max_speed,this.getSpeedDisplayUnit(),JNC.SPEED_UNIT.KNOT,!1,!0))),$o.push("      </li>\n      <li>"+$e($c(this.t("avg_speed")+":"))),$o.push("        "+$c(this.formatSpeed(this.avg_speed,this.getSpeedDisplayUnit(),JNC.SPEED_UNIT.KNOT,!1,!0))),$o.push("      </li>\n    </ul>\n  </div>\n</div>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["ntf/track_default_info"]=function(context){return function(){var $c,$e,$o;return $e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],$o.push("<div class='jnc-pb-balloon-content'>\n  <div class='jnc-pb-balloon-section'>\n    <ul class='jnc-pb-balloon-track-info'>\n      <li>"+$e($c(this.t("start")+":"))),$o.push("        "+$c(this.formatTime(this.start,2,!0))),$o.push("      </li>\n      <li>"+$e($c(this.t("end")+":"))),$o.push("        "+$c(this.formatTime(this.end,2,!0))),$o.push("      </li>\n      <li>"+$e($c(this.t("distance")+":"))),$o.push("        "+$c(this.formatDistance(this.distance,JNC.DISTANCE_UNIT.KILOMETERS,JNC.DISTANCE_UNIT.KILOMETERS))),$o.push("      </li>\n    </ul>\n  </div>\n</div>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["quickInfo/POI/object_info/objectInfoFuelField"]=function(context){return function(){var $c,$e,$o,fid,fuel,_ref;$e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],$o.push("<div class='jnc-fuel-info-content'>\n  <div class='jnc-qi-inner-block jnc-qi-separator'>\n    <div class='jnc-fuel-prices'>\n      <ul class='jnc-fuel-info-prices-row'>"),_ref=this.fuel;for(fid in _ref)fuel=_ref[fid],$o.push("        <li class='jnc-fuel-price'>\n          <div class='jnc-form-group'>\n            <div class='jnc-form-title'>"+$e($c(fuel.label))+"</div>\n            <input class='jnc-form-control' type='text' value='"+$e($c(fuel.val.toString().substring(0,5)))+"' readonly='readonly'>\n          </div>"),this.isFuelUpdatedShow&&$o.push("          <div class='jnc-fuel-info-updated'>"+$e($c(this.translate("updated")+" "+this.formatDate(fuel.date)))+"</div>"),$o.push("        </li>");return $o.push("      </ul>\n    </div>\n    <div class='jnc-qi-btn-lg jnc-simple-btn jnc-simple-btn-light-blue' data-object-action='review' data-available-on-mobile>"+$e($c(this.translate("buttons.compare_prices")))+"</div>\n  </div>\n</div>\n<div class='jnc-qi-object-title'></div>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["quickInfo/POI/object_info/objectInfoLabelField"]=function(context){return function(){var $c,$e,$o;return $e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],this.link?($o.push("<a class='jnc-qi-object-item' href='"+$e($c(this.link))+"' target='_blank' data-available-on-mobile='"+$e($c(this.notAvailable))+"'>\n  <div class='jnc-qi-object-item-row'>"),this.icon&&$o.push("    <div class='jnc-qi-object-item-col jnc-qi-object-item-image'>\n      <img src='"+$e($c(this.assetsUrl+this.icon))+"'>\n    </div>"),$o.push("    <div class='jnc-qi-object-item-col jnc-qi-object-item-name'>"+$c(this.label)+"</div>\n  </div>\n</a>")):($o.push("<div class='jnc-qi-object-item'>\n  <div class='jnc-qi-object-item-row'>"),this.icon&&$o.push("    <div class='jnc-qi-object-item-col jnc-qi-object-item-image'>\n      <img src='"+$e($c(this.assetsUrl+this.icon))+"'>\n    </div>"),$o.push("    <div class='jnc-qi-object-item-col jnc-qi-object-item-name'>"+$c(this.label)+"</div>\n  </div>\n</div>")),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["quickInfo/POI/object_info/objectInfoTableField"]=function(context){return function(){var $c,$e,$o;return $e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],$o.push("<div class='jnc-qi-object'>\n  <div class='jnc-qi-object-title'>"+$e($c(this.title))+"</div>\n  <div class='jnc-qi-object-list' data-region='object-group-properties'></div>\n</div>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["quickInfo/POI/quick_info"]=function(context){return function(){var $c,$e,$o,fid,fuel,num,_i,_ref,_ref1;if($e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],$o.push("<div class='"+["jnc-params-link",""+$e($c(!0===this.details?"is-link":void 0))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"' data-item-id='"+$e($c(this.id))+"' data-has-details='"+$e($c(!0===this.details))+"'>\n  <div class='jnc-qi-object-item-row'>"),this.icon_id&&$o.push("    <div class='jnc-qi-link-col-img jnc-qi-object-item-col'>\n      <img src='"+$e($c(this.assetsUrl+this.icon_id))+"'>\n    </div>"),$o.push("    <div class='jnc-qi-link-col-title jnc-qi-object-item-col'>\n      <div>"+$e($c(this.name))+"</div>"),null!=this.review){for($o.push("      <div class='jnc-rating'>\n        <div class='jnc-rating-stars'>"),num=_i=1;_i<=5;num=++_i)this.review.rating>=num?$o.push("          <i class='na-icon na-icon-star-filled'></i>"):num-1<(_ref=this.review.rating)&&_ref<num?$o.push("          <i class='na-icon na-icon-star-filled-half'></i>"):$o.push("          <i class='na-icon na-icon-star'></i>");$o.push("        </div>\n        <div class='jnc-rating-votes'>"+$e($c("("+this.review.rating_num+")"))+"</div>\n      </div>")}if($o.push("    </div>"),this.fuel){$o.push("    <div class='jnc-qi-link-col-fuel jnc-qi-object-item-col'>\n      <div class='jnc-fuel-table'>"),_ref1=this.fuel;for(fid in _ref1)fuel=_ref1[fid],"GAS"===fuel.type&&null!=fuel.label&&fuel.val&&$o.push("        <div class='jnc-fuel-row'>\n          <div class='jnc-fuel-col jnc-fuel-type-gas'>\n            <span>"+$e($c(fuel.label))+"</span>\n          </div>\n          <div class='jnc-fuel-col jnc-fuel-val'>\n            <span>"+$e($c(fuel.val.toString().substring(0,5)))+"</span>\n          </div>\n        </div>"),"DIESEL"===fuel.type&&null!=fuel.label&&fuel.val&&$o.push("        <div class='jnc-fuel-row'>\n          <div class='jnc-fuel-col jnc-fuel-type-diesel'>\n            <span>"+$e($c(fuel.label))+"</span>\n          </div>\n          <div class='jnc-fuel-col jnc-fuel-val'>\n            <span>"+$e($c(fuel.val.toString().substring(0,5)))+"</span>\n          </div>\n        </div>");$o.push("      </div>\n    </div>")}return this.details&&$o.push("    <div class='jnc-qi-link-col-arrow jnc-qi-object-item-col'>\n      <i class='na-icon na-icon-thin-arrow-right'></i>\n    </div>"),$o.push("  </div>\n</div>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["quickInfo/crosshair"]=function(context){return function(){var $o;return $o=[],$o.push("<div class='jnc-crosshair'>\n  <div class='jnc-crosshair-x'></div>\n  <div class='jnc-crosshair-y'></div>\n  <div class='jnc-crosshair-info jnc-crosshair-plus'></div>\n  <div class='jnc-crosshair-info jnc-square-icon na-icon na-icon-help'></div>\n</div>"),$o.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["quickInfo/objectInfoPopup"]=function(context){return function(){var $c,$e,$o,num,_i,_ref;if($e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],$o.push("<div class='jnc-modal-container'>\n  <div class='jnc-qi-popup-row'>\n    <div class='jnc-qi-popup-col'>\n      <div class='jnc-qi'>\n        <div class='jnc-component-header'>\n          <div class='jnc-component-header-title'>\n            <div class='has-buttons jnc-component-header-title-text'>"+$e($c(this.label))+"</div>\n          </div>"),this.isObjectInfo?$o.push("          <div class='jnc-btn-back jnc-component-header-btn-left jnc-simple-btn jnc-simple-btn-light-blue'>"+$e($c(this.translate("buttons.back")))+"</div>"):$o.push("          <div class='go-to-map jnc-component-header-btn-left jnc-simple-btn jnc-simple-btn-light-blue'>"+$e($c(this.translate("buttons.map")))+"</div>"),$o.push("        </div>\n        <div class='"+["jnc-scrollable",""+$e($c(this.action.reviewable?"jnc-qi-has-footer":void 0))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'>\n          <div class='jnc-scrollable-content'>\n            <div class='jnc-qi-head' data-region='toolbar'></div>\n            <div class='jnc-params-page jnc-params-page'>\n              <div data-region='object-properties'></div>"),this.action.editable&&($o.push("              <div class='jnc-qi-inner-block'>\n                <div class='jnc-fuel-info-btns jnc-grid'>\n                  <div class='jnc-grid-row'>\n                    <div class='jnc-grid-col jnc-grid-col-6'>\n                      <div class='jnc-qi-btn-lg jnc-simple-btn jnc-simple-btn-light-blue' data-object-action='edit' data-available-on-mobile>\n                        <i class='na-icon na-icon-edit'></i>"),$o.push("                        "+$e($c(this.translate("buttons.edit")))),$o.push("                      </div>\n                    </div>\n                    <div class='jnc-grid-col jnc-grid-col-6'>\n                      <div class='jnc-qi-btn-lg jnc-simple-btn jnc-simple-btn-light-blue' data-object-action='move' data-available-on-mobile>\n                        <i class='na-icon na-icon-move'></i>"),$o.push("                        "+$e($c(this.translate("buttons.move")))),$o.push("                      </div>\n                    </div>\n                    <div class='jnc-grid-row'>\n                      <div class='jnc-grid-col jnc-grid-col-12'>\n                        <div class='jnc-qi-btn-lg jnc-simple-btn jnc-simple-btn-blue-official' data-object-action='abuse' data-available-on-mobile>\n                          <i class='na-icon na-icon-abuse'></i>"),$o.push("                          "+$e($c(this.translate("buttons.abuse")))),$o.push("                        </div>\n                      </div>\n                    </div>\n                    <div class='jnc-grid-row'>\n                      <div class='jnc-grid-col jnc-grid-col-12'>\n                        <div class='jnc-qi-btn-lg jnc-simple-btn jnc-simple-btn-red' data-object-action='delete' data-available-on-mobile>\n                          <i class='na-icon na-icon-trash'></i>"),$o.push("                          "+$e($c(this.translate("buttons.delete")))),$o.push("                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>")),$o.push("            </div>\n          </div>\n        </div>"),this.action.reviewable)if(this.action.review&&this.action.review.rating_num>0){for($o.push("        <a class='jnc-qi-btn-footer jnc-qi-btn-footer-rating-link na-icon na-icon-chevron-arrow-right' href='#' data-available-on-mobile>\n          <div class='jnc-rating'>\n            <div class='jnc-rating-stars'>"),num=_i=1;_i<=5;num=++_i)this.action.review.rating>=num?$o.push("              <i class='na-icon na-icon-star-filled'></i>"):num-1<(_ref=this.action.review.rating)&&_ref<num?$o.push("              <i class='na-icon na-icon-star-filled-half'></i>"):$o.push("              <i class='na-icon na-icon-star'></i>");$o.push("            </div>\n            <div class='jnc-rating-votes'>"+$e($c("("+this.action.review.rating_num+")"))+"</div>\n          </div>\n        </a>")}else $o.push("        <div class='jnc-qi-btn-footer jnc-qi-btn-footer-rating-btn'>\n          <a class='jnc-qi-object-rate-btn jnc-simple-btn jnc-simple-btn-light-blue' href='#' data-object-action='review' data-available-on-mobile>"+$e($c(this.translate("buttons.review")))+"</a>\n        </div>");return $o.push("      </div>\n    </div>\n  </div>\n</div>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["quickInfo/objectInfoPopupLoading"]=function(context){return function(){var $c,$e,$o;return $e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],$o.push("<div class='jnc-modal-container loading-popup-preview'>\n  <div class='jnc-qi-popup-row'>\n    <div class='jnc-qi-popup-col'>\n      <div class='jnc-qi'>\n        <div class='jnc-component-header'>\n          <div class='jnc-component-header-title'>\n            <div class='has-buttons jnc-component-header-title-text'></div>\n          </div>\n          <div class='go-to-map jnc-component-header-btn-left jnc-simple-btn jnc-simple-btn-light-blue'>"+$e($c(this.translate("buttons.map")))+"</div>\n        </div>\n        <div class='jnc-scrollable'>\n          <div class='jnc-scrollable-content'>\n            <div class='jnc-preloader-overlay'>\n              <div class='jnc-preloader'>\n                <div></div>\n                <div></div>\n                <div></div>\n                <div></div>\n                <div></div>\n                <div></div>\n                <div></div>\n                <div></div>\n              </div>\n            </div>\n            <div class='jnc-params-page jnc-params-page'></div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["quickInfo/quickInfoPopup"]=function(context){return function(){var $c,$e,$o;return $e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],$o.push("<div class='jnc-modal-container'>\n  <div class='jnc-qi-popup-row'>\n    <div class='jnc-qi-popup-col'>\n      <div class='jnc-qi'>\n        <div class='jnc-component-header'>"),this.coordinate&&$o.push("          <div class='jnc-component-header-title'>\n            <div class='has-buttons jnc-component-header-title-text'>\n              \x3c!-- %div=@formatLatitude(@coordinate[1]) --\x3e\n              \x3c!-- %div=@formatLongitude(@coordinate[0]) --\x3e\n            </div>\n          </div>"),$o.push("          <div class='go-to-map jnc-component-header-btn-left jnc-simple-btn jnc-simple-btn-light-blue'>"+$e($c(this.translate("buttons.map")))+"</div>\n        </div>\n        <div class='jnc-scrollable'>\n          <div class='jnc-scrollable-content'>\n            <div class='jnc-qi-head' data-region='toolbar'></div>\n            <div class='jnc-params-page'>\n              <div class='jnc-params-list jnc-qi-list' data-region='list'></div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["quickInfo/quickInfoToolBar"]=function(context){return function(){var $c,$e,$o,action,feature,_i,_j,_len,_len1,_ref,_ref1;if($e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],this.actions.length){for($o.push("<ul class='jnc-qi-buttons jnc-qi-separator'>"),_ref=this.actions,_i=0,_len=_ref.length;_i<_len;_i++)action=_ref[_i],$o.push("  <li>"),null!=action.href?($o.push("    <a class='"+["jnc-simple-btn","jnc-qi-btn-lg","jnc-simple-btn-"+$e($c(action.color))+" "+$e($c(action.id))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"' href='"+$e($c(action.href))+"' target='_new'>"+$e($c(this.translate(action.title)))),action.icon&&$o.push("      <i class='na-icon na-icon-boat-to "+action.icon+"'></i>"),$o.push("    </a>")):($o.push("    <a class='"+["jnc-simple-btn","jnc-qi-btn-lg","jnc-simple-btn-"+$e($c(action.color))+" "+$e($c(action.id))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"' data-action='"+$e($c(action.key))+"' data-available-on-mobile='"+$e($c(!!action.onMobile))+"'>"+$e($c(this.translate(action.title)))),action.icon&&$o.push("      <i class='na-icon na-icon-boat-to "+action.icon+"'></i>"),$o.push("    </a>")),$o.push("  </li>");$o.push("</ul>")}if(this.features.length){for($o.push("<ul class='jnc-qi-groups'>"),_ref1=this.features,_j=0,_len1=_ref1.length;_j<_len1;_j++)feature=_ref1[_j],$o.push("  <li>\n    <div class='"+["jnc-qi-group-item","jnc-qi-group-item-"+$e($c(feature.key))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"' data-feature='"+$e($c(feature.key))+"' data-available-on-mobile='"+$e($c(feature.isDisabled))+"'>\n      <div class='jnc-qi-group-icon'>\n        <div class='jnc-qi-group-icon-row'>\n          <div class='jnc-qi-group-icon-col'>\n            <div class='"+["jnc-qi-icon","jnc-qi-icon-"+$e($c(feature.key))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'></div>\n          </div>\n        </div>\n      </div>\n      <div class='jnc-qi-group-title'>"+$e($c(this.translate(feature.title)))+"</div>\n    </div>\n  </li>");$o.push("</ul>")}return $o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["routing/archive"]=function(context){return function(){var $c,$e,$o,index,order,readOnly,route,_i,_len,_ref,_ref1,_ref2;for($e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],$o.push("<div class='no-routes-message'>No route found</div>\n<div class='jnc-sorting-bar'>"),readOnly=this._getMode()===this.MODE.VIEW,order=this.collection.getSortKey(),
$o.push("  <div class='jnc-sorting-bar-btns'>\n    <a class='"+$e($c("start_date"===order?"is-active":void 0))+"' data-type='start_date'>"+$e($c(this.t("date")))+"</a>\n    <a class='"+$e($c("distance"===order?"is-active":void 0))+"' data-type='distance'>"+$e($c(this.t("length")))+"</a>\n  </div>\n</div>\n<div class='jnc-route-archive-content'>\n  <div class='"+["jnc-route-archive-content-scrollable",""+$e($c(readOnly?void 0:"in-select-state"))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'>"),_ref=this.collection.models,index=_i=0,_len=_ref.length;_i<_len;index=++_i)route=_ref[index],$o.push("    <div class='"+["jnc-params-block","jnc-route-archive-item",""+$e($c((null!=(_ref1=this.activeRoute)&&null!=(_ref2=_ref1.id)?_ref2.toLowerCase():void 0)===route.get("id").toLowerCase()?"is-active":void 0))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"' data-index='"+$e($c(index))+"' data-id='"+$e($c(route.get("id")))+"'>"),readOnly||$o.push("      <label class='jnc-archive-item-checkbox' for='route_"+$e($c(route.get("id")))+"'>\n        <input class='jnc-params-checkbox-input' id='route_"+route.get("id")+"' data-id='"+$e($c(route.get("id")))+"' type='checkbox' checked='"+$e($c(this._isItemChecked(route)))+"'>\n        <span class='jnc-params-checkbox na-icon na-icon-check'></span>\n      </label>"),$o.push("      <div class='jnc-route-archive-item-title'>"+$e($c(route.get("name")))+"</div>\n      <div class='jnc-route-archive-inf'>\n        <div class='"+["jnc-archive-measure",""+$e($c("start_date"===order?"is-active":void 0))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'>\n          "+this.formatDate(route.get("date"))+"\n        </div>\n        <div class='"+["jnc-archive-measure",""+$e($c("distance"===order?"is-active":void 0))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'>\n          "+this.formatDistance(route.get("distance"),route.get("distanceUnit"),!1)+"\n        </div>\n        <div class='jnc-archive-measure'>"+$e($c())+"\n          "+this.formatTimeInterval(route.get("overalEta"))+"\n        </div>\n      </div>\n    </div>");return $o.push("  </div>\n</div>\n<div class='jnc-grid-table jnc-navigable-list-footer'>\n  <div class='jnc-grid-col'>"),readOnly?$o.push("    <div class='jnc-navigable-items-edit jnc-simple-btn jnc-simple-btn-light-blue'>"+$e($c(this.t("buttons.edit")))+"</div>\n    <div class='jnc-navigable-list-footer-text'>"+$c(this.t("tracks.just_updated"))+"</div>"):($o.push("    <div class='jnc-navigable-items-cancel jnc-simple-btn jnc-simple-btn-light-blue'>"+$e($c(this.t("buttons.cancel")))+"</div>"),this._isDeleteAvailable()&&$o.push("    <div class='jnc-navigable-items-delete-btn jnc-simple-btn jnc-simple-btn-red' disabled='disabled'>\n      <i class='na-icon-trash'></i>\n      <span></span>\n    </div>")),$o.push("  </div>\n</div>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["routing/deleteBalloon"]=function(context){return function(){var $c,$e,$o;return $e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],$o.push("<div class='jnc-balloon-del'>\n  <button class='jnc-del-waypoint'>"+$e($c(this.translate("routing.delete_waypoint")))+"</button>\n</div>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["routing/details"]=function(context){return function(){var $c,$e,$o,index,leg,pointIcon,_ref,_this=this;if($e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],pointIcon=function(index,pointId){var hasWarning;return hasWarning=_this.pointHasWarning(pointId),0===index?$o.push("<span class='"+["jnc-route-leg-round","start",""+$e($c(hasWarning?"has-warning":void 0))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"' data-point-id='"+$e($c(pointId))+"'></span>"):index===_this.finishPointIndex?$o.push("<span class='"+["jnc-route-leg-round","finish",""+$e($c(hasWarning?"has-warning":void 0))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"' data-point-id='"+$e($c(pointId))+"'></span>"):$o.push("<span class='"+["jnc-route-leg-round",""+$e($c(hasWarning?"has-warning":void 0))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"' data-point-id='"+$e($c(pointId))+"'>"+$e($c(index))+"</span>"),""},$o.push("<div class='jnc-content jnc-content-gray jnc-route'>\n  <div class='jnc-component-header jnc-route-info-title'>\n    <div class='jnc-component-header-row jnc-grid-table'>\n      <div class='jnc-component-header-btn-col jnc-grid-col jnc-route-map-col'>\n        <button class='jnc-map-btn jnc-simple-btn jnc-simple-btn-light-blue'>"+$e($c(this.translate("buttons.map")))+"</button>\n      </div>\n      <div class='jnc-grid-col'>\n        <div class='has-clear-btn jnc-form-control-container'>\n          <input class='jnc-form-control jnc-form-control-flat jnc-route-name-input jnc-text-bold' type='text' data-type='name' data-default='"+$e($c(this.name))+"' placeholder='"+$e($c(this.translate("routing.name_placeholder")))+"' value='"+$e($c(this.name))+"'>\n        </div>\n      </div>\n      <div class='jnc-component-header-btn-col jnc-grid-col'>\n        <button class='jnc-share-button jnc-simple-btn jnc-simple-btn-light-blue' data-available-on-mobile>\n          <i class='na-icon-share'></i>\n        </button>\n        <button class='jnc-btn-reset-name jnc-simple-btn jnc-simple-btn-light-blue' style='display: none'>"+$e($c(this.translate("buttons.cancel")))+"</button>\n      </div>\n    </div>\n  </div>\n  <div class='has-easy-view jnc-scrollable'>\n    <div class='jnc-scrollable-content'>\n      <ul class='jnc-route-info'>\n        <li class='jnc-route-info-item'>\n          <span class='jnc-route-info-icon na-icon-distance'></span>"),$o.push("          "+$c(this.totalDistance)),$o.push("        </li>\n        <li class='jnc-route-info-item'>\n          <span class='jnc-route-info-icon na-icon-clock'></span>"),$o.push("          "+$c(this.totalTime)),$o.push("        </li>\n        <li class='jnc-route-info-item'>\n          <span class='jnc-route-info-icon na-icon-fuel'></span>"),$o.push("          "+$c(this.totalFuel)),$o.push("        </li>\n      </ul>"),this.legs.length>0){$o.push("      <div class='jnc-route-legs'>"),_ref=this.legs;for(index in _ref)leg=_ref[index],leg.isCalculating?($o.push("        <div class='jnc-route-progress' data-leg-id='"+$e($c(leg.cid))+"'>\n          <div class='jnc-route-progress-head'>\n            <span class='jnc-route-progress-title'>"+$e($c(this.translate("routing.planning_route")))+"</span>"),$o.push("            "+$e($c(pointIcon(leg.leftPointIndex,leg.leftPointId)))),$o.push("            <span class='jnc-route-leg-to'></span>"),$o.push("            "+$e($c(pointIcon(leg.rightPointIndex,leg.rightPointId)))),$o.push("          </div>\n          <div class='jnc-route-progress-content'>"),this.interactionsEnabled&&$o.push("            <button class='jnc-close-button jnc-leg-stop-calculation'></button>"),$o.push("            <div class='jnc-progress-bar'>\n              <div class='jnc-progress-bar-line' style='"+$e($c(leg.calculationProgress+"%"))+"'></div>\n            </div>\n          </div>\n        </div>")):this.legs.length>1&&($o.push("        <div class='"+["jnc-route-leg",""+$e($c(leg.hasWarning?"has-warning":void 0))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"' data-leg-id='"+$e($c(leg.cid))+"' data-left-point-id='"+$e($c(leg.leftPointId))+"' data-right-point-id='"+$e($c(leg.rightPointId))+"'>\n          <div class='jnc-route-leg-right'>\n            <div class='jnc-route-leg-top'>"),leg.isStart||($o.push("              "+$e($c(pointIcon(0,this.startPointId)))),$o.push("              <span class='jnc-route-leg-to'></span>"),$o.push("              "+$e($c(pointIcon(leg.rightPointIndex,leg.rightPointId))))),$o.push("            </div>\n            <div class='jnc-route-leg-val jnc-route-leg-val-top'>"),$o.push("              "+$c(leg.totalDistance)),$o.push("            </div>\n            <div class='jnc-route-leg-val'>"),$o.push("              "+$c(leg.totalTime)),$o.push("            </div>\n          </div>\n          <div class='jnc-route-leg-left'>\n            <div class='jnc-route-leg-top'>"),$o.push("              "+$e($c(pointIcon(leg.leftPointIndex,leg.leftPointId)))),$o.push("              <span class='jnc-route-leg-to'></span>"),$o.push("              "+$e($c(pointIcon(leg.rightPointIndex,leg.rightPointId)))),$o.push("            </div>\n            <div class='jnc-route-leg-val jnc-route-leg-val-top'>"+$c(leg.distance)+"</div>\n            <div class='jnc-route-leg-val jnc-route-leg-val-right-bottom'>"+$c(leg.fuel)+"</div>\n            <div class='jnc-route-leg-val'>"+$c(leg.time)+"</div>\n          </div>\n        </div>"));$o.push("      </div>")}return $o.push("      <div class='jnc-grouped-search-title'>"+$e($c(this.translate("routing.around")))+"</div>\n      <div class='jnc-grouped-search'></div>\n      <div class='jnc-route-attention'>\n        <div>"+$e($c(this.translate("routing.attention_message")))+"</div>\n        <div class='jnc-text-danger'>"+$e($c(this.translate("routing.attention_danger_text")))+"</div>\n      </div>\n      <div class='jnc-forbidden-msg jnc-route-attention'>\n        <div class='jnc-text-danger'>"+$e($c(this.translate("routing.forbidden_area")))+"</div>\n      </div>\n    </div>\n  </div>\n  <div class='jnc-route-footer'>\n    <div class='jnc-easy-view'>\n      <label class='jnc-params-label' data-available-on-mobile>"),$o.push("        "+$e($c(this.translate("routing.easy_view")))),$o.push("        <input class='jnc-params-checkbox-input' type='checkbox'>\n        <span class='jnc-params-checkbox na-icon na-icon-check'></span>\n      </label>\n    </div>\n  </div>\n</div>\n<button class='jnc-route-change-direction na-icon-change-direction'></button>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["routing/main"]=function(context){return function(){var $c,$e,$o;return $e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],$o.push("<div class='jnc-content jnc-content-gray jnc-route'>\n  <div class='jnc-component-header jnc-route-info-title'>\n    <div class='jnc-component-header-row jnc-grid-table'>\n      <div class='jnc-component-header-btn-col jnc-grid-col jnc-route-map-col'>\n        <button class='jnc-map-btn jnc-simple-btn jnc-simple-btn-light-blue'>"+$e($c(this.translate("buttons.map")))+"</button>\n      </div>\n      <div class='jnc-grid-col'>\n        <div class='has-clear-btn jnc-form-control-container'>\n          <input class='jnc-form-control jnc-form-control-flat jnc-route-name-input jnc-text-bold' type='text' data-type='name' placeholder='"+$e($c(this.translate("routing.name_placeholder")))+"' value='"+$e($c(this.name))+"' data-default='"+$e($c(this.name))+"'>\n        </div>\n      </div>\n      <div class='jnc-component-header-btn-col jnc-grid-col'>\n        <button class='jnc-share-button jnc-simple-btn jnc-simple-btn-light-blue' data-available-on-mobile>\n          <i class='na-icon-share'></i>\n        </button>\n        <button class='jnc-btn-reset-name jnc-simple-btn jnc-simple-btn-light-blue' style='display: none'>"+$e($c(this.translate("buttons.cancel")))+"</button>\n      </div>\n    </div>\n  </div>\n  <div class='has-footer jnc-scrollable'>\n    <div class='jnc-scrollable-content'>\n      <div class='jnc-routing-section'></div>\n      <div class='jnc-grouped-search-title'>"+$e($c(this.translate("routing.around")))+"</div>\n      <div class='jnc-grouped-search'></div>\n      <div class='jnc-route-attention'>\n        <div>"+$e($c(this.translate("routing.attention_message")))+"</div>\n        <div class='jnc-text-danger'>"+$e($c(this.translate("routing.attention_danger_text")))+"</div>\n      </div>\n      <div class='jnc-forbidden-msg jnc-route-attention'>\n        <div class='jnc-text-danger'>"+$e($c(this.translate("routing.forbidden_area")))+"</div>\n      </div>\n    </div>\n  </div>\n  <div class='jnc-route-footer'>\n    <div class='jnc-easy-view'>\n      <label class='jnc-params-label' data-available-on-mobile>"),$o.push("        "+$e($c(this.translate("routing.easy_view")))),$o.push("        <input class='jnc-params-checkbox-input' type='checkbox'>\n        <span class='jnc-params-checkbox na-icon na-icon-check'></span>\n      </label>\n    </div>\n    <div class='jnc-boat-settings'>\n      <button class='jnc-btn-block jnc-simple-btn jnc-simple-btn-light-blue jnc-to-boat-settings'>\n        <i class='na-icon-gear'></i>"),$o.push("        "+$e($c(this.translate("routing.boatsettings.button_text")))),$o.push("      </button>\n      <div class='jnc-boat-settings-info'>\n        <span>"+$c(this.translate("routing.boatsettings.draft")+": "+this.settings.draft)+"</span>\n        <span>"+$c(this.translate("routing.boatsettings.speed")+": "+this.settings.speed)+"</span>\n        <span>"+$c(this.translate("routing.boatsettings.consumption")+": "+this.settings.fuelConsumption)+"</span>\n      </div>\n    </div>\n  </div>\n</div>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["routing/routing"]=function(context){return function(){var $c,$e,$o,index,leg,pointIcon,_ref,_this=this;if($e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],pointIcon=function(index,pointId){var hasWarning;return hasWarning=_this.pointHasWarning(pointId),0===index?$o.push("<span class='"+["jnc-route-leg-round","start",""+$e($c(hasWarning?"has-warning":void 0))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"' data-point-id='"+$e($c(pointId))+"'></span>"):index===_this.finishPointIndex?$o.push("<span class='"+["jnc-route-leg-round","finish",""+$e($c(hasWarning?"has-warning":void 0))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"' data-point-id='"+$e($c(pointId))+"'></span>"):$o.push("<span class='"+["jnc-route-leg-round",""+$e($c(hasWarning?"has-warning":void 0))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"' data-point-id='"+$e($c(pointId))+"'>"+$e($c(index))+"</span>"),""},$o.push("<div class='jnc-grid-table jnc-route-form'>\n  <div class='jnc-grid-col jnc-route-form-inputs'>\n    <div>\n      <input class='jnc-route-form-input' type='text' data-type='start' placeholder='"+$e($c(this.searchEnabled?this.translate("routing.start_point_placeholder"):this.translate("routing.start_point_placeholder_without_search")))+"' value='"+$e($c(this.startPointId?this.startValue:void 0))+"' readonly='readonly'>"),this.startPointId&&this.interactionsEnabled&&$o.push("      <button class='jnc-close-button jnc-route-form-del' data-point-id='"+$e($c(this.startPointId))+"'></button>"),$o.push("    </div>\n    <div>\n      <input class='jnc-route-form-input' type='text' data-type='finish' placeholder='"+$e($c(this.searchEnabled?this.translate("routing.finish_point_placeholder"):this.translate("routing.finish_point_placeholder_without_search")))+"' value='"+$e($c(this.finishPointId?this.endValue:void 0))+"' readonly='readonly'>"),this.finishPointId&&this.interactionsEnabled&&$o.push("      <button class='jnc-close-button jnc-route-form-del' data-point-id='"+$e($c(this.finishPointId))+"'></button>"),$o.push("    </div>\n  </div>"),this.hasWaypoints&&this.interactionsEnabled&&$o.push("  <div class='jnc-grid-col'>\n    <button class='jnc-route-change-direction na-icon-change-direction'></button>\n  </div>"),$o.push("</div>\n<ul class='jnc-route-info'>\n  <li class='jnc-route-info-item'>\n    <span class='jnc-route-info-icon na-icon-distance'></span>"),$o.push("    "+$c(this.totalDistance)),$o.push("  </li>\n  <li class='jnc-route-info-item'>\n    <span class='jnc-route-info-icon na-icon-clock'></span>"),$o.push("    "+$c(this.totalTime)),$o.push("  </li>\n  <li class='jnc-route-info-item'>\n    <span class='jnc-route-info-icon na-icon-fuel'></span>"),$o.push("    "+$c(this.totalFuel)),$o.push("  </li>\n</ul>"),this.legs.length>0){$o.push("<div class='jnc-route-legs'>"),_ref=this.legs;for(index in _ref)leg=_ref[index],leg.isCalculating?($o.push("  <div class='jnc-route-progress' data-leg-id='"+$e($c(leg.cid))+"'>\n    <div class='jnc-route-progress-head'>\n      <span class='jnc-route-progress-title'>"+$e($c(this.translate("routing.planning_route")))+"</span>"),$o.push("      "+$e($c(pointIcon(leg.leftPointIndex,leg.leftPointId)))),$o.push("      <span class='jnc-route-leg-to'></span>"),$o.push("      "+$e($c(pointIcon(leg.rightPointIndex,leg.rightPointId)))),$o.push("    </div>\n    <div class='jnc-route-progress-content'>"),this.interactionsEnabled&&$o.push("      <button class='jnc-close-button jnc-leg-stop-calculation'></button>"),$o.push("      <div class='jnc-progress-bar'>\n        <div class='jnc-progress-bar-line' style='"+$e($c(leg.calculationProgress+"%"))+"'></div>\n      </div>\n    </div>\n  </div>")):this.legs.length>1&&($o.push("  <div class='"+["jnc-route-leg",""+$e($c(leg.hasWarning?"has-warning":void 0))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"' data-leg-id='"+$e($c(leg.cid))+"' data-left-point-id='"+$e($c(leg.leftPointId))+"' data-right-point-id='"+$e($c(leg.rightPointId))+"'>\n    <div class='jnc-route-leg-right'>\n      <div class='jnc-route-leg-top'>"),leg.isStart||($o.push("        "+$e($c(pointIcon(0,this.startPointId)))),$o.push("        <span class='jnc-route-leg-to'></span>"),$o.push("        "+$e($c(pointIcon(leg.rightPointIndex,leg.rightPointId))))),$o.push("      </div>\n      <div class='jnc-route-leg-val jnc-route-leg-val-top'>"),$o.push("        "+$c(leg.totalDistance)),$o.push("      </div>\n      <div class='jnc-route-leg-val'>"),$o.push("        "+$c(leg.totalTime)),$o.push("      </div>\n    </div>\n    <div class='jnc-route-leg-left'>\n      <div class='jnc-route-leg-top'>"),this.interactionsEnabled&&$o.push("        <button class='jnc-close-button jnc-route-leg-delete'></button>"),$o.push("        "+$e($c(pointIcon(leg.leftPointIndex,leg.leftPointId)))),$o.push("        <span class='jnc-route-leg-to'></span>"),$o.push("        "+$e($c(pointIcon(leg.rightPointIndex,leg.rightPointId)))),$o.push("      </div>\n      <div class='jnc-route-leg-val jnc-route-leg-val-top'>"+$c(leg.distance)+"</div>\n      <div class='jnc-route-leg-val jnc-route-leg-val-right-bottom'>"+$c(leg.fuel)+"</div>\n      <div class='jnc-route-leg-val'>"+$c(leg.time)+"</div>\n    </div>\n  </div>"));$o.push("</div>")}return $o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["routing/warningBalloon"]=function(context){return function(){var $c,$e,$o;return $e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],$o.push("<div class='jnc-balloon-warning'>\n  <div>\n    <b>"+$e($c(this.title))+"</b>\n  </div>\n  <div>"+$e($c(this.body))+"</div>\n</div>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["search/category_list"]=function(context){return function(){var $o;return $o=[],$o.push("<div class='data-container jnc-scrollable-content'></div>"),$o.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["search/category_list_item"]=function(context){return function(){var $c,$e,$o;return $e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],$o.push("<div class='data-item jnc-search-category-item' data-type='"+$e($c(this._renderingItem.get("id")))+"'>\n  <div class='jnc-search-category-item-arrow na-icon na-icon-thin-arrow-right'></div>\n  <div class='jnc-search-category-item-row'>\n    <div class='jnc-search-category-item-col jnc-search-category-item-icon'>\n      <img src='"+$e($c(this.assetsUrl+this._renderingItem.get("icon_id")))+"'>\n    </div>\n    <div class='jnc-search-category-item-col jnc-search-category-item-col-title'>"+$e($c(this._renderingItem.get("name")))+"</div>\n  </div>\n</div>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["search/category_search"]=function(context){return function(){var $o;return $o=[],$o.push("<div class='data-sort-container jnc-sorting-bar'></div>\n<div class='data-container jnc-scrollable-content'></div>"),$o.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["search/category_search_item_10"]=function(context){return function(){var $c,$e,$o;return $e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],$o.push("<li class='"+["data-item","jnc-fuel-item",""+$e($c(this._selected===this._renderingItem.get("id")?"is-active":void 0))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"' data-id='"+$e($c(this._renderingItem.get("id")))+"'>\n  <div class='jnc-fuel-item-row'>\n    <div class='jnc-fuel-item-col jnc-fuel-item-icon'>\n      <img src='"+$e($c(this.assetsUrl+this._renderingItem.get("icon")))+"'>\n    </div>\n    <div class='jnc-fuel-item-col'>\n      <div class='jnc-fuel-station-name'>"+$e($c(this._renderingItem.get("name")))+"</div>\n      <div class='jnc-fuel-station-distance'>"+$c(this.formatDistance(this._renderingItem.get("distance"),this._displayUnits.distance,JNC.DISTANCE_UNIT.NAUTICAL))+"</div>\n    </div>\n    <div class='jnc-fuel-item-col jnc-fuel-item-val-names'>\n      <div class='jnc-fuel-item-val-name'>"+$e($c(this.t("search.gasoline")))+"</div>\n      <div class='jnc-fuel-item-val-name'>"+$e($c(this.t("search.diesel")))+"</div>\n    </div>\n    <div class='jnc-fuel-item-col jnc-fuel-item-vals'>\n      <div class='jnc-fuel-item-val'>"+$e($c((this._renderingItem.get("gasoline")||"-")+" €"))+"</div>\n      <div class='jnc-fuel-item-val'>"+$e($c((this._renderingItem.get("diesel")||"-")+" €"))+"</div>\n    </div>\n  </div>\n</li>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["search/complex_search"]=function(context){return function(){var $c,$e,$o;return $e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],$o.push("<header class='jnc-component-header'>\n  <div data-view-header='"+$e($c(this.VIEW.CATEGORIES))+"'>"),this.mapButton&&$o.push("    <div class='data-global-back jnc-component-header-btn-left jnc-simple-btn jnc-simple-btn-light-blue'>"+$e($c(this.translate("buttons.map")))+"</div>"),$o.push("    <div class='jnc-component-header-title'>\n      <div class='has-buttons jnc-component-header-title-text'>"+$e($c(this.translate("search.categories")))+"</div>\n    </div>\n    <div class='jnc-component-header-btn-right jnc-simple-btn jnc-simple-btn-light-blue' data-available-on-mobile>"+$e($c(this.translate("buttons.latlong")))+"</div>\n  </div>\n  <div data-view-header='"+$e($c(this.VIEW.SEARCH_RESULT))+"'>\n    <div class='data-global-back jnc-component-header-btn-left jnc-simple-btn jnc-simple-btn-light-blue' data-view='"+$e($c(this.VIEW.CATEGORIES))+"'>"+$e($c(this.translate("buttons.map")))+"</div>\n    <div class='jnc-component-header-title'>\n      <div class='has-buttons jnc-component-header-title-text'>"+$e($c(this.translate("search.categories")))+"</div>\n    </div>\n    <div class='jnc-component-header-btn-right jnc-simple-btn jnc-simple-btn-light-blue' data-available-on-mobile>"+$e($c(this.translate("buttons.latlong")))+"</div>\n  </div>\n  <div data-view-header='"+$e($c(this.VIEW.LAT_LONG))+"'>\n    <div class='jnc-btn-back jnc-component-header-btn-left jnc-simple-btn jnc-simple-btn-light-blue' data-view='"+$e($c(this.VIEW.CATEGORIES))+"'>"+$e($c(this.translate("buttons.back")))+"</div>\n    <div class='jnc-component-header-title'>\n      <div class='has-buttons jnc-component-header-title-text'>"+$e($c(this.translate("search.lat_long")))+"</div>\n    </div>\n  </div>\n  <div class='search-category-header' data-view-header='"+$e($c(this.VIEW.CATEGORY_RESULT))+"'>\n    <div class='jnc-btn-back jnc-component-header-btn-left jnc-simple-btn jnc-simple-btn-light-blue' data-view='"+$e($c(this.VIEW.CATEGORIES))+"'>"+$e($c(this.translate("buttons.back")))+"</div>\n    <div class='jnc-component-header-title'>\n      <div class='data-category-title has-buttons jnc-component-header-title-text'></div>\n    </div>\n    <div class='jnc-preloader'>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n    </div>\n  </div>\n</header>\n<div class='jnc-scrollable'>\n  <div class='jnc-lat-long' id='lat_long'></div>\n  <div class='jnc-location-search' id='location_search'></div>\n  <div class='jnc-category-list' id='category_list'></div>\n  <div class='jnc-scrollable-content jnc-search-list-content' id='category_location_search'></div>\n</div>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["search/coordinate"]=function(context){return function(){var $c,$e,$o;return $e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],$o.push("<span class='coord'>"+$e($c(Math.abs(this.lat.degrees)+"° "+this.lat.minutes.toFixed(3)+"′ "+this.lat.direction))+"</span>\n<span class='coord'>"+$e($c(Math.abs(this.lng.degrees)+"° "+this.lng.minutes.toFixed(3)+"′ "+this.lng.direction))+"</span>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["search/grouped_search"]=function(context){return function(){var $c,$e,$o;return $e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],$o.push("<div class='jnc-search-group'>\n  <a class='jnc-search-group-head' href='#' data-id='"+$e($c(this._category.id))+"'>\n    <div class='jnc-grid-table'>\n      <div class='jnc-grid-col jnc-search-group-head-icon'>"),this._category.icon_id&&$o.push("        <img src='"+$e($c(this.assetsUrl+this._category.icon_id))+"'>"),$o.push("      </div>\n      <div class='jnc-grid-col jnc-search-group-head-title'>"+$e($c(this._category.name))+"</div>\n      <div class='jnc-grid-col jnc-search-group-head-count'>"+$e($c(this._category.count))+"</div>\n    </div>\n  </a>\n  <div class='jnc-search-group-list'></div>\n</div>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["search/lat_long"]=function(context){return function(){var $c,$e,$o;return $e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],
$o.push("<div class='jnc-ll-block lat' data-max='"+$e($c(90))+"'>\n  <div class='jnc-ll-title'>"+$e($c(this.t("latitude.name")))+"</div>\n  <div class='data-coordinate-container jnc-ll-values'>\n    <div class='direction jnc-switcher'>\n      <label>\n        <input type='radio' name='lat' value='"+$e($c(1))+"' checked='"+$e($c(this._dmLat[0]>=0))+"'>\n        <span>"+$e($c(this.t("latitude.north")))+"</span>\n      </label>\n      <label>\n        <input type='radio' name='lat' value='"+$e($c(-1))+"' checked='"+$e($c(this._dmLat[0]<0))+"'>\n        <span>"+$e($c(this.t("latitude.south")))+"</span>\n      </label>\n    </div>\n    <input class='jnc-ll-input' min='"+$e($c(0))+"' max='"+$e($c(90))+"' value='"+$e($c(Math.abs(this._dmLat[0])))+"' data-max='"+$e($c(90))+"' data-type='"+$e($c(this.COORD_TYPE.DEGREE))+"'>\n    <span class='jnc-ll-measuring'>°</span>\n    <input class='jnc-ll-input' min='"+$e($c(0))+"' max='"+$e($c(59))+"' value='"+$e($c(this._dmLat[1].toFixed(3)))+"' data-max='"+$e($c(59.999))+"' step='"+$e($c(.005))+"' data-type='"+$e($c(this.COORD_TYPE.MINUTE))+"'>\n    <span class='jnc-ll-measuring'>'</span>\n  </div>\n  <div class='jnc-error-container'>"+$c(this.t("errors.invalid_latitude"))+"</div>\n</div>\n<div class='jnc-ll-block lng' data-max='"+$e($c(180))+"'>\n  <div class='jnc-ll-title'>"+$e($c(this.t("longitude.name")))+"</div>\n  <div class='data-coordinate-container jnc-ll-values'>\n    <div class='direction jnc-switcher'>\n      <label>\n        <input type='radio' name='lng' value='"+$e($c(1))+"' checked='"+$e($c(this._dmlng[0]>=0))+"'>\n        <span>"+$e($c(this.t("longitude.east")))+"</span>\n      </label>\n      <label>\n        <input type='radio' name='lng' value='"+$e($c(-1))+"' checked='"+$e($c(this._dmlng[0]<0))+"'>\n        <span>"+$e($c(this.t("longitude.west")))+"</span>\n      </label>\n    </div>\n    <input class='jnc-ll-input' min='"+$e($c(0))+"' max='"+$e($c(180))+"' value='"+$e($c(Math.abs(this._dmlng[0])))+"' data-max='"+$e($c(180))+"' data-type='"+$e($c(this.COORD_TYPE.DEGREE))+"'>\n    <span class='jnc-ll-measuring'>°</span>\n    <input class='jnc-ll-input' min='"+$e($c(0))+"' max='"+$e($c(59))+"' value='"+$e($c(this._dmlng[1].toFixed(3)))+"' data-max='"+$e($c(59.999))+"' step='"+$e($c(.005))+"' data-type='"+$e($c(this.COORD_TYPE.MINUTE))+"'>\n    <span class='jnc-ll-measuring'>'</span>\n  </div>\n  <div class='jnc-error-container'>"+$c(this.t("errors.invalid_longitude"))+"</div>\n</div>\n<div class='jnc-ll-show-on-map jnc-params-btn'>"),this._itegrated?$o.push("  <div class='jnc-simple-btn jnc-simple-btn-green' id='show'>"+$e($c(this.t("buttons.add_way_point")))+"</div>"):$o.push("  <div class='jnc-simple-btn jnc-simple-btn-green' id='show'>"+$e($c(this.t("buttons.show_on_map")))+"</div>"),$o.push("</div>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["search/location_search"]=function(context){return function(){var $c,$e,$o,_ref;return $e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],$o.push("<div class='jnc-search-form'>\n  <div class='jnc-search-form-input-container'>\n    <div class='jnc-search-form-icon na-icon-magnifier'></div>\n    <input class='data-input jnc-search-form-input' type='text' value='"+$e($c(null!=(_ref=this.collection)?_ref.search:void 0))+"' placeholder='"+$e($c(this.t("buttons.search")))+"'>\n    <div class='jnc-preloader-container jnc-spinner-search'>\n      <div class='jnc-preloader'>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n      </div>\n    </div>\n    <div class='data-btn-clear jnc-close-button'></div>\n  </div>\n</div>\n<div class='jnc-search-actions-list'>\n  <div class='data-container jnc-scrollable-content'></div>\n</div>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["search/location_search_item_0"]=function(context){return function(){var $c,$e,$o;return $e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],$o.push("<li class='"+["data-item","jnc-search-actions-item",""+$e($c(this._selected===this._renderingItem.get("id")?"is-active":void 0))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"' data-id='"+$e($c(this._renderingItem.get("id")))+"'>\n  <div class='jnc-search-actions-row'>\n    <div class='jnc-search-action-icon-col jnc-search-actions-col'>\n      <img src='"+$e($c(this.assetsUrl+(this._renderingItem.get("icon")||this._renderingItem.get("icon_type"))))+"'>\n    </div>\n    <div class='jnc-search-action-middle-col jnc-search-actions-col'>\n      <div class='jnc-search-action-title location-search-action-title'>\n        <strong>"+$e($c(this._renderingItem.get("name")))+"</strong>\n        <span>"+$e($c((this._renderingItem.get("adm_code")||"")+","))+"</span>\n        <span>"+$e($c(this._renderingItem.get("country")))+"</span>\n      </div>\n    </div>\n  </div>\n</li>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["search/no_search_data"]=function(context){return function(){var $c,$e,$o;return $e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],$o.push("<div class='jnc-search-no-data no-data-container'>"+$e($c(this.t("no_data")))+"</div>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["search/poi_cell"]=function(context){return function(){var $c,$e,$o,balloonOptions,classes,key,num,offsetX,str,_i,_ref;if($e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],classes=[this._renderingItem.vhf||this._renderingItem.fuel?"has-info":void 0,this._renderingItem.vhf?"has-vhf":void 0,this._renderingItem.fuel?"has-fuel":void 0,this._selected===this._renderingItem.id?"is-active":void 0].join(" "),$o.push("<div class='"+["jnc-poi-cell","data-item",""+$e($c(classes))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"' data-id='"+$e($c(this._renderingItem.id))+"'>\n  <div class='jnc-poi-cell-img-col'>\n    <img class='jnc-poi-cell-img' src='"+$e($c(this.assetsUrl+this._renderingItem.icon_id))+"'>\n  </div>\n  <div class='jnc-poi-cell-content-col'>\n    <div class='jnc-poi-cell-title'>"+$e($c(this._renderingItem.name))+"</div>\n    <div class='jnc-poi-cell-info'>\n      <div class='jnc-poi-cell-info-item'>"+$e($c(this._renderingItem.distance))+"</div>"),this._renderingItem.review){for($o.push("      <div class='jnc-poi-cell-info-item'>\n        <div class='jnc-rating'>\n          <div class='jnc-rating-stars'>"),num=_i=1;_i<=5;num=++_i)this._renderingItem.review.rating>=num?$o.push("            <i class='na-icon na-icon-star-filled'></i>"):num-1<(_ref=this._renderingItem.review.rating)&&_ref<num?$o.push("            <i class='na-icon na-icon-star-filled-half'></i>"):$o.push("            <i class='na-icon na-icon-star'></i>");$o.push("          </div>\n          <div class='jnc-rating-votes'>"+$e($c(this._renderingItem.review.rating_num+" Reviews"))+"</div>\n        </div>\n      </div>")}if($o.push("    </div>"),this._renderingItem.phone&&(offsetX=this._renderingItem.fuel||this._renderingItem.vhf?"18":"-20",balloonOptions='{"alignX": "center", "offsetX": '+offsetX+"}",$o.push("    <div class='jnc-poi-cell-phone' data-available-on-mobile='"+$e($c(balloonOptions))+"'>\n      <span class='jnc-poi-cell-phone-icon na-icon na-icon-phone'></span>\n      <span class='jnc-poi-cell-phone-number'>"),$o.push("        "+$e($c(this._renderingItem.phone.label))),$o.push("      </span>\n    </div>")),$o.push("  </div>"),this._renderingItem.fuel){$o.push("  <div class='jnc-poi-cell-info-col jnc-poi-cell-info-col-fuel'>\n    <div class='jnc-grid-table'>");for(key in this._renderingItem.fuel)$o.push("      <div class='jnc-grid-row'>\n        <div class='jnc-grid-col'>\n          <div class='jnc-poi-cell-info-title'>"+$e($c(this._renderingItem.fuel[key].label))+"</div>\n          <div class='jnc-poi-cell-info-fuel-val'>"+$e($c(this.formatPrice(this._renderingItem.fuel[key].val)))+"</div>\n        </div>\n      </div>");$o.push("    </div>\n  </div>")}else this._renderingItem.vhf&&($o.push("  <div class='jnc-poi-cell-info-col jnc-poi-cell-info-col-vhf'>\n    <div class='jnc-grid-table'>\n      <div class='jnc-grid-col'>\n        <div class='jnc-poi-cell-info-title'>VHF</div>\n        <div class='jnc-poi-cell-info-vhf-val'>"),str=[this._renderingItem.vhf.vhf_m?this.formatVhf(this._renderingItem.vhf.vhf_m):void 0,this._renderingItem.vhf.vhf?this.formatVhf(this._renderingItem.vhf.vhf):void 0].join(", ").replace(/(^\,+|\,+$|\, +$)/gm,"").trim(),$o.push("          <span>"+$e($c(str))+"</span>\n        </div>\n      </div>\n    </div>\n  </div>"));return $o.push("</div>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["search/qi/qi1"]=function(context){return function(){var $o;return $o=[],$o.push("<div class='jnc-quick-info'>\n  <div class='jnc-component-header'>\n    <div class='jnc-component-header-title'>\n      <div class='has-buttons jnc-component-header-title-text'>Title</div>\n    </div>\n    <div class='jnc-component-header-btn-left jnc-simple-btn jnc-simple-btn-light-blue'>Map</div>\n  </div>\n  <div class='jnc-quick-info-content'></div>\n</div>"),$o.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["search/qi/square_icon"]=function(context){return function(){var $o;return $o=[],$o.push("<div class='jnc-square-icon na-icon na-icon-help'></div>"),$o.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["search/sort_category_search"]=function(context){return function(){var $c,$e,$o,index,key,_ref;$e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],$o.push("<div class='jnc-sorting-bar-btns'>"),_ref=this.collection.getSortFields();for(index in _ref)key=_ref[index],$o.push("  <a class='"+["data-sort-item",""+$e($c(key===this.collection.sortKey?"is-active":void 0))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"' data-key='"+$e($c(key))+"' click='javascript:void(0);'>"+$e($c(this.t("sort_keys."+key)))+"</a>");return $o.push("</div>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["settings/boat"]=function(context){return function(){var $c,$e,$o;return $e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],$o.push("<div class='jnc-params-page'>\n  <div class='jnc-params-descr'>"+$e($c(this.translate("boat_settings.description")))+"</div>\n  <div class='jnc-params-list'>\n    <a class='draft-button jnc-params-link'>"),$o.push("      "+$e($c(this.translate("boat_settings.draft_title")))),$o.push("      <span class='jnc-params-link-unit'>"+$c(this.draft)+"</span>\n      <i class='na-icon na-icon-thin-arrow-right'></i>\n    </a>\n  </div>\n  <div class='jnc-params-list'>\n    <a class='jnc-params-link speed-button'>"),$o.push("      "+$e($c(this.translate("boat_settings.cruising_speed_title")))),$o.push("      <span class='jnc-params-link-unit'>"+$c(this.speed)+"</span>\n      <i class='na-icon na-icon-thin-arrow-right'></i>\n    </a>\n    <a class='consumption-button jnc-params-link'>"),$o.push("      "+$e($c(this.translate("boat_settings.fuel_consumption_title")))),$o.push("      <span class='jnc-params-link-unit'>"+$c(this.consumption)+"\n        <i class='na-icon na-icon-thin-arrow-right'></i>\n      </span>\n    </a>\n  </div>\n</div>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["settings/boatConsumption"]=function(context){return function(){var $c,$e,$o;return $e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],$o.push("<div class='jnc-lg-param'>\n  <input class='jnc-lg-param-input js-value' value='"+$e($c(this.value))+"'>\n  <div class='jnc-view-btn-group jnc-view-btn-group-bordered justified'>\n    <div class='jnc-view-btn-section'>\n      <a class='"+["js-unit-btn","jnc-view-btn","jnc-view-btn-default",""+$e($c(this.units===this.unitsKeys.LITERS?"is-active":void 0))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"' href='#' data-units='"+$e($c(this.unitsKeys.LITERS))+"'>"+$e($c(this.translate("units.liters_full")))+"</a>\n    </div>\n    <div class='jnc-view-btn-section'>\n      <a class='"+["js-unit-btn","jnc-view-btn","jnc-view-btn-default",""+$e($c(this.units===this.unitsKeys.GALLONS?"is-active":void 0))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"' href='#' data-units='"+$e($c(this.unitsKeys.GALLONS))+"'>"+$e($c(this.translate("units.gallons_full")))+"</a>\n    </div>\n  </div>\n</div>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["settings/boatCruisingSpeed"]=function(context){return function(){var $c,$e,$o;return $e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],$o.push("<div class='jnc-lg-param'>\n  <input class='jnc-lg-param-input js-value' value='"+$e($c(this.value))+"'>\n  <div class='jnc-view-btn-group jnc-view-btn-group-bordered justified'>\n    <div class='jnc-view-btn-section'>\n      <a class='"+["js-unit-btn","jnc-view-btn","jnc-view-btn-default",""+$e($c(this.units===this.unitsKeys.KMPH?"is-active":void 0))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"' href='#' data-units='"+$e($c(this.unitsKeys.KMPH))+"'>"+$e($c(this.translate("units.kmph_full")))+"</a>\n    </div>\n    <div class='jnc-view-btn-section'>\n      <a class='"+["js-unit-btn","jnc-view-btn","jnc-view-btn-default",""+$e($c(this.units===this.unitsKeys.KNOT?"is-active":void 0))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"' href='#' data-units='"+$e($c(this.unitsKeys.KNOT))+"'>"+$e($c(this.translate("units.knot_full")))+"</a>\n    </div>\n    <div class='jnc-view-btn-section'>\n      <a class='"+["js-unit-btn","jnc-view-btn","jnc-view-btn-default",""+$e($c(this.units===this.unitsKeys.MPH?"is-active":void 0))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"' href='#' data-units='"+$e($c(this.unitsKeys.MPH))+"'>"+$e($c(this.translate("units.mph_full")))+"</a>\n    </div>\n  </div>\n</div>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["settings/boatDraft"]=function(context){return function(){var $c,$e,$o;return $e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],$o.push("<div class='jnc-lg-param'>\n  <input class='jnc-lg-param-input js-value' value='"+$e($c(this.value))+"'>\n  <div class='jnc-view-btn-group jnc-view-btn-group-bordered justified'>\n    <div class='jnc-view-btn-section'>\n      <a class='"+["js-unit-btn","jnc-view-btn","jnc-view-btn-default",""+$e($c(this.units===this.unitsKeys.METERS?"is-active":void 0))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"' href='#' data-units='"+$e($c(this.unitsKeys.METERS))+"'>"+$e($c(this.translate("units.meters_full")))+"</a>\n    </div>\n    <div class='jnc-view-btn-section'>\n      <a class='"+["js-unit-btn","jnc-view-btn","jnc-view-btn-default",""+$e($c(this.units===this.unitsKeys.FEET?"is-active":void 0))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"' href='#' data-units='"+$e($c(this.unitsKeys.FEET))+"'>"+$e($c(this.translate("units.feet_full")))+"</a>\n    </div>\n    <div class='jnc-view-btn-section'>\n      <a class='"+["js-unit-btn","jnc-view-btn","jnc-view-btn-default",""+$e($c(this.units===this.unitsKeys.FATHOMS?"is-active":void 0))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"' href='#' data-units='"+$e($c(this.unitsKeys.FATHOMS))+"'>"+$e($c(this.translate("units.fathoms_full")))+"</a>\n    </div>\n  </div>\n</div>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["settings/mapSafetyDepthOption"]=function(context){return function(){var $c,$e,$o;return $e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],$o.push("<div class='jnc-lg-param'>\n  <input class='jnc-lg-param-input js-value' value='"+$e($c(this.value))+"' min='"+$e($c(this.min))+"' max='"+$e($c(this.max))+"'>\n  <div class='jnc-lg-param-range'>\n    <div class='jnc-lg-param-min'>"+$e($c(this.translate("boat_settings.map_safety_depth_min").replace(/{value}/,this.min).replace(/{units}/,this.translate("units."+this.units))))+"</div>\n    <div class='jnc-lg-param-max'>"+$e($c(this.translate("boat_settings.map_safety_depth_max").replace(/{value}/,this.max).replace(/{units}/,this.translate("units."+this.units))))+"</div>\n  </div>\n  <div class='jnc-view-btn-group jnc-view-btn-group-bordered justified'>\n    <div class='jnc-view-btn-section'>\n      <a class='"+["js-unit-btn","jnc-view-btn","jnc-view-btn-default",""+$e($c(this.units===this.unitsKeys.METERS?"is-active":void 0))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"' href='#' data-units='"+$e($c(this.unitsKeys.METERS))+"'>"+$e($c(this.translate("units.meters_full")))+"</a>\n    </div>\n    <div class='jnc-view-btn-section'>\n      <a class='"+["js-unit-btn","jnc-view-btn","jnc-view-btn-default",""+$e($c(this.units===this.unitsKeys.FEET?"is-active":void 0))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"' href='#' data-units='"+$e($c(this.unitsKeys.FEET))+"'>"+$e($c(this.translate("units.feet_full")))+"</a>\n    </div>\n    <div class='jnc-view-btn-section'>\n      <a class='"+["js-unit-btn","jnc-view-btn","jnc-view-btn-default",""+$e($c(this.units===this.unitsKeys.FATHOMS?"is-active":void 0))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"' href='#' data-units='"+$e($c(this.unitsKeys.FATHOMS))+"'>"+$e($c(this.translate("units.fathoms_full")))+"</a>\n    </div>\n  </div>\n</div>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["tracks/details"]=function(context){return function(){var $c,$e,$o;return $e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],$o.push("<div class='jnc-track-info'>\n  <div class='jnc-component-header jnc-route-info-title jnc-track-header'>\n    <div class='jnc-component-header-row jnc-grid-table'>\n      <div class='back-column jnc-grid-col'>\n        <div class='back jnc-btn-back jnc-component-header-btn-left jnc-simple-btn jnc-simple-btn-light-blue'>"+$e($c(this.translate("buttons.back")))+"</div>\n      </div>\n      <div class='jnc-grid-col'>\n        <div class='has-clear-btn jnc-form-control-container'>\n          <input class='jnc-form-control jnc-form-control-flat jnc-route-search-input jnc-text-bold' type='text' data-type='name' data-default='"+$e($c(this.track.title))+"' placeholder='"+$e($c(this.translate("routing.name_placeholder")))+"' value='"+$e($c(this.track.title))+"'>\n        </div>\n      </div>\n      <div class='jnc-component-header-btn-col jnc-grid-col'>\n        <button class='jnc-share-button jnc-simple-btn jnc-simple-btn-light-blue' data-available-on-mobile>\n          <i class='na-icon-share'></i>\n        </button>\n        <button class='jnc-btn-reset-name jnc-simple-btn jnc-simple-btn-light-blue' style='display: none'>"+$e($c(this.translate("buttons.cancel")))+"</button>\n      </div>\n    </div>\n    <div class='jnc-track-time'>\n      <div class='jnc-track-time-start'>"+$e($c(this.translate("tracks.start")))+"\n        <span>\n          "+this.formatTime(this.track.start_date)+"\n        </span>\n      </div>\n      <div class='jnc-track-time-end'>"+$e($c(this.translate("tracks.end")))+"\n        <span>\n          "+this.formatTime(this.track.date)+"\n        </span>\n      </div>\n    </div>\n  </div>\n  <div class='jnc-track-stat-content'>\n    <div class='jnc-track-stat-item speed'>\n      <div class='jnc-track-stat-item-heading'>\n        <div class='jnc-track-stat-item-title'>"+$e($c(this.translate("tracks.max_speed")))+"</div>\n        <div class='jnc-track-stat-item-val'>"+this.formatSpeed(this.track.max_speed,this.unit.speed)+"\n        </div>\n        <div class='jnc-track-stat-item-max-type'>"+$e($c(this.translate("tracks.record")))+"</div>\n      </div>\n      <div class='jnc-track-stat-chart'>\n        <div class='jnc-track-stat-chart-bar' style='width: "+$e($c(this.track.avg_speed/this.track.max_speed*100))+"%'>"),this.track.avg_speed>=this.track.max_speed&&$o.push("          <div class='jnc-track-stat-chart-cup'></div>"),$o.push("        </div>\n        <div class='jnc-track-stat-chart-value'>"+this.formatSpeed(this.track.avg_speed,this.unit.speed)+"\n        </div>\n      </div>\n    </div>"),this.track.max_depth&&($o.push("    <div class='depth jnc-track-stat-item'>\n      <div class='jnc-track-stat-item-heading'>\n        <div class='jnc-track-stat-item-title'>"+$e($c(this.translate("tracks.max_depth")))+"</div>\n        <div class='jnc-track-stat-item-val'>"+this.formatDepth(this.track.max_depth,this.unit.depth)+"\n        </div>\n        <div class='jnc-track-stat-item-max-type'>"+$e($c(this.translate("tracks.record")))+"</div>\n      </div>\n      <div class='jnc-track-stat-chart'>\n        <div class='jnc-track-stat-chart-bar' style='width: "+$e($c(this.track.avg_depth/this.track.max_depth*100))+"%'>"),this.track.avg_depth>=this.track.max_depth&&$o.push("          <div class='jnc-track-stat-chart-cup'></div>"),$o.push("        </div>\n        <div class='jnc-track-stat-chart-value'>"+this.formatDepth(this.track.avg_depth,this.unit.depth)+"\n        </div>\n      </div>\n    </div>")),$o.push("    <div class='duration jnc-track-stat-item'>\n      <div class='jnc-track-stat-item-heading'>\n        <div class='jnc-track-stat-item-title'>"+$e($c(this.translate("tracks.duration")))+"</div>\n        <div class='jnc-track-stat-item-val'>"+this.formatTimeInterval(this.track.duration)+"</div>\n        <div class='jnc-track-stat-item-max-type'>"+$e($c(this.translate("tracks.record")))+"</div>\n      </div>\n      <div class='jnc-track-stat-chart'>\n        <div class='jnc-track-stat-chart-bar' style='width: "+$e($c(this.track.duration/Math.max(this.track.duration,this.options.user.get("statistic").boating.tracks.max_duration)*100))+"%'>"),this.track.duration>=this.options.user.get("statistic").boating.tracks.max_duration&&$o.push("          <div class='jnc-track-stat-chart-cup'></div>"),$o.push("        </div>\n        <div class='jnc-track-stat-chart-value'>"+this.formatTimeInterval(this.track.duration)+"</div>\n      </div>\n    </div>\n    <div class='distance jnc-track-stat-item'>\n      <div class='jnc-track-stat-item-heading'>\n        <div class='jnc-track-stat-item-title'>"+$e($c(this.translate("tracks.distance")))+"</div>\n        <div class='jnc-track-stat-item-val'>"+this.formatDistance(this.track.distance,this.unit.distance)+"\n        </div>\n        <div class='jnc-track-stat-item-max-type'>"+$e($c(this.translate("tracks.record")))+"</div>\n      </div>\n      <div class='jnc-track-stat-chart'>\n        <div class='jnc-track-stat-chart-bar' style='width: "+$e($c(this.track.distance/Math.max(this.track.distance,this.options.user.get("statistic").boating.tracks.max_distance)*100))+"%'>"),this.track.distance>=this.options.user.get("statistic").boating.tracks.max_distance&&$o.push("          <div class='jnc-track-stat-chart-cup'></div>"),$o.push("        </div>\n        <div class='jnc-track-stat-chart-value'>"+this.formatDistance(this.track.distance,this.unit.distance)+"\n        </div>\n      </div>\n    </div>\n  </div>\n</div>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["tracks/item"]=function(context){return function(){var $c,$e,$o;return $e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],$o.push("<div class='jnc-track-header'>\n  <div class='jnc-track-time'>\n    <div class='jnc-track-time-start'>"+$e($c(this.translate("tracks.start")))+"\n      <span>\n        "+this.formatTimeInterval(this.track.start)+"\n      </span>\n    </div>\n    <div class='jnc-track-time-end'>"+$e($c(this.translate("tracks.end")))+"\n      <span>\n        "+this.formatTimeInterval(this.track.end)+"\n      </span>\n    </div>\n  </div>\n</div>\n<div class='jnc-track-stat'>\n  <div class='jnc-track-stat-header'>"+$e($c(this.translate("tracks.current_vs_best")))+"</div>\n</div>\n<div class='jnc-track-stat-content'>\n  <div class='jnc-track-stat-item speed'>\n    <div class='jnc-track-stat-item-heading'>\n      <div class='jnc-track-stat-item-title'>"+$e($c(this.translate("tracks.max_speed")))+"</div>\n      <div class='jnc-track-stat-item-val'>"+this.track.speed.max+"\n        <small>"+this.track.speed.measuring+"</small>\n      </div>\n      <div class='jnc-track-stat-item-max-type'>"+$e($c(this.translate("tracks.record")))+"</div>\n    </div>\n    <div class='jnc-track-stat-chart'>\n      <div class='jnc-track-stat-chart-bar' style='width: "+$e($c(this.track.speed.current/this.track.speed.max*100))+"%'></div>\n      <div class='jnc-track-stat-chart-value'>"+this.track.speed.current+"\n        <small>"+this.track.speed.measuring+"</small>\n      </div>"),this.track.speed.current>this.track.speed.max&&$o.push("      <div class='jnc-track-stat-chart-cup'></div>"),$o.push("    </div>\n  </div>\n  <div class='depth jnc-track-stat-item'>\n    <div class='jnc-track-stat-item-heading'>\n      <div class='jnc-track-stat-item-title'>"+$e($c(this.translate("tracks.max_depth")))+"</div>\n      <div class='jnc-track-stat-item-val'>"+this.track.depth.max+"\n        <small>"+this.track.depth.measuring+"</small>\n      </div>\n      <div class='jnc-track-stat-item-max-type'>"+$e($c(this.translate("tracks.record")))+"</div>\n    </div>\n    <div class='jnc-track-stat-chart'>\n      <div class='jnc-track-stat-chart-bar' style='width: "+$e($c(this.track.depth.current/this.track.depth.max*100))+"%'></div>\n      <div class='jnc-track-stat-chart-value'>"+this.track.depth.current+"\n        <small>"+this.track.depth.measuring+"</small>\n      </div>"),this.track.depth.current>this.track.depth.max&&$o.push("      <div class='jnc-track-stat-chart-cup'></div>"),$o.push("    </div>\n  </div>\n  <div class='duration jnc-track-stat-item'>\n    <div class='jnc-track-stat-item-heading'>\n      <div class='jnc-track-stat-item-title'>"+$e($c(this.translate("tracks.duration")))+"</div>\n      <div class='jnc-track-stat-item-val'>"+this.formatTimeInterval(this.track.duration.max)+"</div>\n      <div class='jnc-track-stat-item-max-type'>"+$e($c(this.translate("tracks.record")))+"</div>\n    </div>\n    <div class='jnc-track-stat-chart'>\n      <div class='jnc-track-stat-chart-bar' style='width: "+$e($c(this.track.duration.current/this.track.duration.max*100))+"%'></div>\n      <div class='jnc-track-stat-chart-value'>"+this.formatTimeInterval(this.track.duration.current)+"</div>"),this.track.duration.current>this.track.duration.max&&$o.push("      <div class='jnc-track-stat-chart-cup'></div>"),$o.push("    </div>\n  </div>\n  <div class='distance jnc-track-stat-item'>\n    <div class='jnc-track-stat-item-heading'>\n      <div class='jnc-track-stat-item-title'>"+$e($c(this.translate("tracks.distance")))+"</div>\n      <div class='jnc-track-stat-item-val'>"+this.track.distance.max+"\n        <small>"+this.track.distance.measuring+"</small>\n      </div>\n      <div class='jnc-track-stat-item-max-type'>"+$e($c(this.translate("tracks.record")))+"</div>\n    </div>\n    <div class='jnc-track-stat-chart'>\n      <div class='jnc-track-stat-chart-bar' style='width: "+$e($c(this.track.distance.current/this.track.distance.max*100))+"%'></div>\n      <div class='jnc-track-stat-chart-value'>"+this.track.distance.current+"\n        <small>"+this.track.distance.measuring+"</small>\n      </div>"),this.track.distance.current>this.track.distance.max&&$o.push("      <div class='jnc-track-stat-chart-cup'></div>"),
$o.push("    </div>\n  </div>\n</div>\n<div class='jnc-track-stat'>\n  <div class='jnc-track-stat-header'>"+$e($c(this.translate("tracks.current_vs_average")))+"</div>\n</div>\n<div class='jnc-track-stat-content'>\n  <div class='jnc-track-stat-item speed'>\n    <div class='jnc-track-stat-item-heading'>\n      <div class='jnc-track-stat-item-title'>"+$e($c(this.translate("tracks.average_speed")))+"</div>\n      <div class='jnc-track-stat-item-val'>"+this.track.speed.avg+"\n        <small>"+this.track.speed.measuring+"</small>\n      </div>\n      <div class='jnc-track-stat-item-max-type'>"+$e($c(this.translate("tracks.average")))+"</div>\n    </div>\n    <div class='jnc-track-stat-chart'>\n      <div class='jnc-track-stat-chart-bar' style='width: "+$e($c(this.track.speed.current/this.track.speed.avg*100))+"%'></div>\n      <div class='jnc-track-stat-chart-value'>"+this.track.speed.current+"\n        <small>"+this.track.speed.measuring+"</small>\n      </div>"),this.track.speed.current>this.track.speed.avg&&$o.push("      <div class='jnc-track-stat-chart-cup'></div>"),$o.push("    </div>\n  </div>\n  <div class='depth jnc-track-stat-item'>\n    <div class='jnc-track-stat-item-heading'>\n      <div class='jnc-track-stat-item-title'>"+$e($c(this.translate("tracks.average_depth")))+"</div>\n      <div class='jnc-track-stat-item-val'>"+this.track.depth.avg+"\n        <small>"+this.track.depth.measuring+"</small>\n      </div>\n      <div class='jnc-track-stat-item-max-type'>"+$e($c(this.translate("tracks.average")))+"</div>\n    </div>\n    <div class='jnc-track-stat-chart'>\n      <div class='jnc-track-stat-chart-bar' style='width: "+$e($c(this.track.depth.current/this.track.depth.avg*100))+"%'></div>\n      <div class='jnc-track-stat-chart-value'>"+this.track.depth.current+"\n        <small>"+this.track.depth.measuring+"</small>\n      </div>"),this.track.depth.current>this.track.depth.avg&&$o.push("      <div class='jnc-track-stat-chart-cup'></div>"),$o.push("    </div>\n  </div>\n  <div class='distance jnc-track-stat-item'>\n    <div class='jnc-track-stat-item-heading'>\n      <div class='jnc-track-stat-item-title'>"+$e($c(this.translate("tracks.distance")))+"</div>\n      <div class='jnc-track-stat-item-val'>"+this.track.distance.avg+"\n        <small>"+this.track.distance.measuring+"</small>\n      </div>\n      <div class='jnc-track-stat-item-max-type'>"+$e($c(this.translate("tracks.average")))+"</div>\n    </div>\n    <div class='jnc-track-stat-chart'>\n      <div class='jnc-track-stat-chart-bar' style='width: "+$e($c(this.track.distance.current/this.track.distance.avg*100))+"%'></div>\n      <div class='jnc-track-stat-chart-value'>"+this.track.distance.current+"\n        <small>"+this.track.distance.measuring+"</small>\n      </div>"),this.track.distance.current>this.track.distance.avg&&$o.push("      <div class='jnc-track-stat-chart-cup'></div>"),$o.push("    </div>\n  </div>\n</div>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["tracks/list"]=function(context){return function(){var $c,$e,$o,index,order,readOnly,track,_ref;$e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],$o.push("<div class='jnc-sorting-bar'>"),order=this.collection.getSortKey(),readOnly=this._getMode()===this.MODE.VIEW,$o.push("  <div class='jnc-sorting-bar-btns'>\n    <a class='"+$e($c("start_date"===order?"is-active":void 0))+"' data-type='start_date'>"+$e($c(this.t("date")))+"</a>\n    <a class='"+$e($c("distance"===order?"is-active":void 0))+"' data-type='distance'>"+$e($c(this.t("distance")))+"</a>\n    <a class='"+$e($c("avg_speed"===order?"is-active":void 0))+"' data-type='avg_speed'>"+$e($c(this.t("speed")))+"</a>\n    <a class='"+$e($c("duration"===order?"is-active":void 0))+"' data-type='duration'>"+$e($c(this.t("time.title")))+"</a>\n  </div>\n</div>\n<div class='jnc-tracks-content'>\n  <ul class='"+["jnc-tracks-list",""+$e($c(readOnly?void 0:"in-select-state"))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'>"),_ref=this.collection.models;for(index in _ref)track=_ref[index],$o.push("    <li class='jnc-track' data-track-id='"+$e($c(track.get("id")))+"'>"),readOnly||$o.push("      <label class='jnc-archive-item-checkbox' for='track_"+$e($c(track.get("id")))+"'>\n        <input class='jnc-params-checkbox-input' id='track_"+track.get("id")+"' data-id='"+$e($c(track.get("id")))+"' type='checkbox' checked='"+$e($c(this._isItemChecked(track)))+"'>\n        <span class='jnc-params-checkbox na-icon na-icon-check'></span>\n      </label>"),$o.push("      <div class='jnc-grid-table'>\n        <div class='jnc-grid-col'>\n          <div class='jnc-track-title'>"+$e($c(track.get("title")))+"</div>\n          <div class='jnc-grid-table'>\n            <div class='jnc-grid-row'>\n              <div class='"+["jnc-archive-measure",""+$e($c("start_date"===order?"is-active":void 0))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'>"+$c(this.formatDate(track.get("date")))+"</div>\n              <div class='"+["jnc-archive-measure",""+$e($c("distance"===order?"is-active":void 0))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'>"+$c(this.formatDistance(track.get("distance"),this.displayUnit.distance,this.dataUnit.distance))+"</div>\n            </div>\n            <div class='jnc-grid-row'>\n              <div class='"+["jnc-archive-measure",""+$e($c("avg_speed"===order?"is-active":void 0))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'>"+$c(this.formatSpeed(track.get("avg_speed"),this.displayUnit.speed,this.dataUnit.speed))+"</div>\n              <div class='"+["jnc-archive-measure",""+$e($c("duration"===order?"is-active":void 0))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'>"+$c(this.formatTimeInterval(track.get("duration")))+"</div>\n            </div>\n          </div>\n        </div>\n        <div class='jnc-grid-col jnc-track-item-col-status'>"),track.get("track_status")?$o.push("          <div class='jnc-track-status-container'>\n            <i class='"+["track-status-icon","na-icon","na-icon-sonar","status-"+$e($c(JNC.TRACK_STATUS.toStringStatus(track.get("track_status").status).toLowerCase()))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'></i>\n          </div>"):$o.push("          <a class='jnc-track-stat-icon' href='#'>\n            <span></span>\n            <span></span>\n            <span></span>\n            <span></span>\n          </a>"),$o.push("        </div>\n      </div>\n    </li>");return this.collection.models.length||$o.push("    <li class='jnc-no-tracks'>"+$e($c(this.t("tracks.no_data")))+"</li>"),$o.push("  </ul>\n</div>\n<div class='jnc-grid-table jnc-navigable-list-footer'>\n  <div class='jnc-grid-col'>"),readOnly?$o.push("    <div class='jnc-navigable-items-edit jnc-simple-btn jnc-simple-btn-light-blue'>"+$e($c(this.t("buttons.edit")))+"</div>\n    <div class='jnc-navigable-list-footer-text'>"+$c(this.t("tracks.just_updated"))+"</div>"):($o.push("    <div class='jnc-navigable-items-cancel jnc-simple-btn jnc-simple-btn-light-blue'>"+$e($c(this.t("buttons.cancel")))+"</div>"),this._isDeleteAvailable()&&$o.push("    <div class='jnc-navigable-items-delete-btn jnc-simple-btn jnc-simple-btn-red' disabled='disabled'>\n      <i class='na-icon-trash'></i>\n      <span></span>\n    </div>")),$o.push("  </div>\n</div>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["tracks/status"]=function(context){return function(){var $c,$e,$o;return $e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],$o.push("<div class='jnc-track-status-container'>\n  <div class='jnc-track-status-row'>\n    <div class='jnc-track-status-col jnc-track-status-col-icon'>\n      <div class='track-status-icon status-"+this.status+" na-icon-sonar'></div>\n    </div>\n    <div class='jnc-track-status-col'>\n      <div class='jnc-track-status-date'>"),$o.push("        "+$e($c(this.translate("last_update")))),$o.push("        :\n        "+this.date_time+"\n      </div>\n      <div class='jnc-track-status-text'>"),$o.push("        "+$c(this.description)),$o.push("      </div>\n    </div>\n  </div>\n</div>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["tracks/statusTooltip"]=function(context){return function(){var $c,$e,$o;return $e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],$o.push("<div class='jnc-track-tooltip-container'>\n  <div class='jnc-track-tooltip'>\n    <span class='"+["jnc-track-tooltip-round","status-"+$e($c(this.status))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'></span>\n    <a class='jnc-track-tooltip-more' target='_blank' href='"+$e($c(this.article_link))+"'>"+$e($c(this.translate("buttons.learnMore")))+"</a>\n  </div>\n</div>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["translatable/converter_examples"]=function(context){return function(){var $o,date,index,_ref;$o=[],$o.push("<div class='price'>\n  <h4>price:</h4>\n  <ul>\n    <li>"+this.formatPrice(120,"dollar",!0)+"</li>\n    <li>"+this.formatPrice(120.09,"euro")+"</li>\n  </ul>\n</div>\n<div class='depth'>\n  <h4>depth:</h4>\n  <ul>\n    <li>"+this.formatDepth(10)+"</li>\n    <li>"+this.formatDepth(10,"feet","feet",!0)+"</li>\n    <li>"+this.formatDepth(10,"fathoms")+"</li>\n  </ul>\n</div>\n<div class='temp'>\n  <h4>temperature:</h4>\n  <ul>\n    <li>"+this.formatTemperature(36.6)+"</li>\n    <li>"+this.formatTemperature(36.6,"fahrenheit")+"</li>\n  </ul>\n</div>\n<div class='distance'>\n  <h4>distance:</h4>\n  <ul>\n    <li>"+this.formatDistance(10)+"</li>\n    <li>"+this.formatDistance(10,"nautical")+"</li>\n    <li>"+this.formatDistance(10,"miles","miles",1)+"</li>\n  </ul>\n</div>\n<div class='speed'>\n  <h4>speed:</h4>\n  <ul>\n    <li>"+this.formatSpeed(10)+"</li>\n    <li>"+this.formatSpeed(10,"knot")+"</li>\n    <li>"+this.formatSpeed(10,"mph")+"</li>\n  </ul>\n</div>\n<div class='consumption'>\n  <h4>consumption:</h4>\n  <ul>\n    <li>"+this.formatConsumption(10)+"</li>\n    <li>"+this.formatConsumption(10,"gph","gph",!0)+"</li>\n  </ul>\n</div>\n<div class='timeInterval'>\n  <h4>timeInterval:</h4>\n  <ul>\n    <li>"+this.formatTimeInterval(1024)+" - "+this.formatTimeInterval(84)+" - "+this.formatTimeInterval(24)+" - "+this.formatTimeInterval(60)+"</li>\n    <li>"+this.formatTimeInterval(500)+" - "+this.formatTimeInterval(10240)+"</li>\n    <li>"+this.formatTimeInterval(85342)+" - "+this.formatTimeInterval(123578955)+" - 12dd7hh4mm8ss:"+this.formatTimeInterval(1062248)+"</li>\n    <li>extra7h: "+this.formatTimeInterval(25200,3)+"</li>\n  </ul>\n</div>\n<div class='jnc-time-value'>\n  <h4>time:</h4>\n  <ul>\n    <li>"+this.formatTime()+"</li>\n    <li>now: "+this.formatTime("now")+"</li>\n  </ul>\n</div>\n<div class='date'>\n  <h4>date:</h4>\n  <ul>\n    <li>"+this.formatDate()+"</li>\n    <li>"+this.formatDate(3600,!0)+"</li>\n  </ul>\n  <div class='small-block'>\n    <ul></ul>"),_ref=this.dates;for(index in _ref)date=_ref[index],$o.push("    <li>\n      <small>"+this.formatDate(date,!0)+"</small>\n    </li>");return $o.push("  </div>\n</div>"),$o.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["translatable/stylize_number"]=function(context){return function(){var $o;return $o=[],$o.push("<div class='jnc-measure-number'>\n"+this.int),this.showDecimal&&$o.push("<span>."+this.decimal+"</span>"),$o.push("</div>"),$o.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"").replace(/[\s\n]*\u0091/gm,"").replace(/\u0092[\s\n]*/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["translatable/system_measure"]=function(context){return function(){var $c,$e,$o;return $e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],$o.push("<div class='"+["jnc-measure",""+$e($c(this.size?"is-"+this.size:void 0))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'>\n<span class='jnc-measure-value'>"+this.value+"</span>\n<span class='jnc-measure-item'>"+this.unit+"</span>\n</div>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"").replace(/[\s\n]*\u0091/gm,"").replace(/\u0092[\s\n]*/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["translatable/system_time"]=function(context){return function(){var $o;return $o=[],$o.push("<div class='jnc-time'>\n<span class='jnc-time-value'>"+this.hours+":"+this.minutes+"</span>\n<span class='jnc-time-part'>"+this.amPm+"</span>\n</div>"),$o.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"").replace(/[\s\n]*\u0091/gm,"").replace(/\u0092[\s\n]*/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["translatable/system_time_interval"]=function(context){return function(){var $o,index,part,_ref;$o=[],$o.push("<div class='jnc-time'>"),_ref=this.parts;for(index in _ref)part=_ref[index],$o.push("<span class='jnc-time-number'>"+part.value+"</span>\n<span class='jnc-time-unit'>"+part.unit+"</span>");return $o.push("</div>"),$o.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"").replace(/[\s\n]*\u0091/gm,"").replace(/\u0092[\s\n]*/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["utils/accordion"]=function(context){return function(){var $c,$e,$o,i,item,_ref;$e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],$o.push("<div class='nav-accordion'>"),_ref=this.data;for(i in _ref)item=_ref[i],$o.push("  <h3 id='"+$e($c(item.id))+"'>"),$o.push("    "+$c(item.title)),$o.push("    <span class='arrow'></span>\n  </h3>\n  <div>"),$o.push("    "+$c(item.content)),$o.push("  </div>");return $o.push("</div>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["utils/buttons_menu"]=function(context){return function(){var $c,$e,$o,button,buttonClasses,groupClasses,subButton,subButtonClasses,_i,_j,_len,_len1,_ref,_ref1;for($e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],groupClasses=[this.group?"jnc-view-btn-group":void 0,this.group&&this.groupsmall?"jnc-view-btn-group-small":void 0,this.justify?"justified":void 0].join(" ").trim(),$o.push("<div class='"+$e($c(groupClasses))+"'>"),_ref=this.buttons,_i=0,_len=_ref.length;_i<_len;_i++)if(button=_ref[_i],button.isVisible){if($o.push("  <span class='jnc-view-btn-section'>"),buttonClasses=[button.isDefault?"jnc-view-btn-default":"jnc-view-btn-success",button.isDanger?"jnc-view-btn-danger":void 0,button.isSmall&&!button.isLarge?"jnc-view-btn-small":void 0,button.isLarge&&!button.isSmall?"jnc-view-btn-large":void 0,button.isActive?"is-active":void 0,button.isDisabled?"is-disabled":void 0,button.isPrimary?"is-primary":void 0].join(" ").trim(),$o.push("    <a class='"+["jnc-view-btn",""+$e($c(buttonClasses))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"' data-id='"+$e($c(button.id))+"' href='"+$e($c(button.link))+"'>"+$c(button.text)+"</a>"),null!=button.subitems&&button.subitems.length>0){for($o.push("    <div class='"+["jnc-view-btn-sub",""+$e($c(button.isOpened?"is-visible":void 0))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'>"),_ref1=button.subitems,_j=0,_len1=_ref1.length;_j<_len1;_j++)subButton=_ref1[_j],subButton.isVisible&&(subButtonClasses=[subButton.isDefault?void 0:"state-danger"].join(" ").trim(),!0===subButton.isText?$o.push("      <div class='"+["jnc-sub-text",""+$e($c(subButtonClasses))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"' data-id='"+$e($c(subButton.id))+"' data-parent-id='"+$e($c(button.id))+"'>"+$c(subButton.text)+"</div>"):$o.push("      <a class='"+["jnc-sub-btn",""+$e($c(subButtonClasses))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"' data-id='"+$e($c(subButton.id))+"' data-parent-id='"+$e($c(button.id))+"' href='"+$e($c(subButton.link))+"'>"+$c(subButton.text)+"</a>"));$o.push("    </div>")}$o.push("  </span>")}return $o.push("</div>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["utils/cookie_banner"]=function(context){return function(){var $c,$o;return $c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],$o.push("<div class='jnc-cookie'>\n  <div class='jnc-cookie-text'>"+$c(this.translate("cookie_law"))+"</div>\n  <span class='jnc-cookie-close'>&times;</span>\n</div>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["utils/panel_base"]=function(context){return function(){var $c,$e,$o;return $e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],$o.push("<div class='jnc-content'>\n  <div class='jnc-component-header'>\n    <div class='jnc-component-header-title'>\n      <div class='"+["jnc-component-header-title-text",""+$e($c(this.backButton?"has-buttons":void 0))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"'>"+$e($c(this.translate(this.title)))+"</div>\n    </div>"),this.backButton&&$o.push("    <div class='jnc-btn-back jnc-component-header-btn-left jnc-simple-btn jnc-simple-btn-light-blue'>"+$e($c(this.translate("buttons.back")))+"</div>"),this.rightButton&&$o.push("    <div class='jnc-component-header-btn-right jnc-simple-btn jnc-simple-btn-light-blue'>"+$e($c(this.translate(this.rightButtonText)))+"</div>"),$o.push("  </div>\n  <div class='jnc-scrollable'>\n    <div class='jnc-scrollable-content'></div>\n  </div>\n</div>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["utils/preloader"]=function(context){return function(){var $o;return $o=[],$o.push("<div class='jnc-preloader-overlay'>\n  <div class='jnc-preloader'>\n    <div></div>\n    <div></div>\n    <div></div>\n    <div></div>\n    <div></div>\n    <div></div>\n    <div></div>\n    <div></div>\n  </div>\n</div>"),$o.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["widgets/alert"]=function(context){return function(){var $c,$e,$o;return $e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],$o.push("<div class='jnc-alert-overlay "+this.jncOverlayWithIdClass+"'></div>\n<div class='jnc-alert'>\n  <div class='jnc-alert-content'>"),this.title&&$o.push("    <div class='jnc-alert-title'>"+$e($c(this.title))+"</div>"),this.description&&$o.push("    <div class='jnc-alert-description'>"+$e($c(this.description))+"</div>"),$o.push("  </div>\n  <div class='jnc-alert-btns'></div>\n</div>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["widgets/availableOnMobileBalloon"]=function(context){return function(){var $c,$e,$o;return $e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],$o.push("<div class='jnc-aom'>\n  <div class='jnc-aom-arrow'></div>\n  <div class='jnc-aom-cont'>"+$e($c(this.translate("available_on_mobile")))+"</div>\n  <div class='jnc-aom-stores'>\n    <a class='jnc-aom-app-store jnc-aom-store' href='"+$e($c(this.links.appStore))+"' target='_blank'></a>\n    <a class='jnc-aom-google-play jnc-aom-store' href='"+$e($c(this.links.googlePlay))+"' target='_blank'></a>\n  </div>\n</div>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["widgets/balloon"]=function(context){return function(){var $c,$e,$o,classes;return $e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],classes=[this.closeButton?"has-close":void 0,this.class?this.class:void 0,this.hasDetails?"is-link":void 0].join(" "),$o.push("<div class='"+["jnc-balloon",""+$e($c(classes))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"' data-available-on-mobile='"+$e($c(this.isAvailable))+"'>\n  <div class='close-button'></div>\n  <div class='jnc-balloon-container'>\n    <div class='jnc-balloon-title'>"+$c(this.title)+"</div>\n    <div class='jnc-balloon-content'>"+$c(this.content)+"</div>\n  </div>\n</div>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["widgets/modal_lake_list"]=function(context){return function(){var $c,$e,$o;return $e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],$o.push("<div class='jnc-popup-container'>\n  <div class='jnc-popup-row'>\n    <div class='jnc-popup-col'>\n      <div class='jnc-popup'>\n        <header class='jnc-popup-header'>\n          <div class='jnc-grid-row'>\n            <span class='jnc-close-button'></span>\n          </div>\n          <div class='jnc-popup-header-title'>"+$e($c(this.title))+"</div>\n          <div class='jnc-grid-row'>\n            <div class='jnc-grid-col jnc-grid-col-6'>\n              <input class='jnc-lake-search jnc-search-form-input' type='text' value='"+$e($c(this.searchValue))+"' placeholder='"+$e($c(this.translate("lake_list_search")))+"'>\n            </div>"),this.showExportButtons&&$o.push("            <div class='jnc-grid-col jnc-grid-col-6 jnc-popup-lakelist-buttons'>\n              <a class='jnc-popup-lakelist-button jnc-popup-lakelist-export' href='#'>"+$e($c(this.translate("buttons.export")))+"</a>\n              <span class='jnc-popup-lakelist-button jnc-popup-lakelist-print'>"+$e($c(this.translate("buttons.print")))+"</span>\n            </div>"),$o.push("          </div>\n          <div class='jnc-lake-list-content'>\n            <div class='jnc-table-content-container'>\n              <div class='jnc-cluster-list-scroll' id='clusterListScroll'>\n                <div class='jnc-cluster-list-content jnc-popup-table-content'>\n                  <div class='jnc-table-proloader'>\n                    <div class='jnc-preloader-container'></div>\n                  </div>\n                </div>\n                <div class='jnc-grid-row no-results'>\n                  <div class='jnc-grid-col jnc-grid-col-12'>"+$e($c(this.translate("table.noresults")))+"</div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </header>\n        <footer class='jnc-popup-footer'>\n          <span class='jnc-popup-close-button'>"+$e($c(this.translate("lake_list_close")))+"</span>\n        </footer>\n      </div>\n    </div>\n  </div>\n</div>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["widgets/modal_lake_list_content"]=function(context){return function(){var $c,$e,$o;return $e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],$o.push("<div class='jnc-grid-row'>\n  <div class='jnc-grid-col jnc-grid-col-2'>"+$e($c(this.country_code))+"</div>\n  <div class='jnc-grid-col jnc-grid-col-3'>"+$e($c(this.name))+"</div>\n  <div class='jnc-grid-col jnc-grid-col-5'>"+$e($c(this.country))+"</div>\n  <div class='jnc-grid-col jnc-grid-col-1'>"+$e($c(this.new_flag?"New":""))+"</div>\n  <div class='jnc-grid-col jnc-grid-col-21'>"+$e($c(this.hd?"HD":""))+"</div>\n</div>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["widgets/modal_lake_list_content_caption"]=function(context){return function(){var $c,$e,$o;return $e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],$o.push("<div class='jnc-grid-row'>\n  <div class='jnc-grid-col jnc-grid-col-12 jnc-table-country'>"+$e($c(this.country))+"</div>\n</div>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["widgets/modal_popup"]=function(context){return function(){var $c,$e,$o;return $e=function(text,escape){return(""+text).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/"/g,"&quot;")},$c=function(text){switch(text){case null:case void 0:return"";case!0:case!1:return""+text;default:return text}},$o=[],$o.push("<div class='jnc-popup-container'>\n  <div class='jnc-popup-row'>\n    <div class='jnc-popup-col'>\n      <div class='jnc-popup'>\n        <header class='jnc-popup-header'>\n          <span class='jnc-close-button'></span>\n          <div class='jnc-popup-header-title'>"+$e($c(this.title))+"</div>\n        </header>\n        <div class='jnc-popup-content'>"+$c(this.content)+"</div>\n        <footer class='jnc-popup-footer'>\n          <span class='jnc-popup-close-button'>"+$e($c(this.translate("buttons.close")))+"</span>\n        </footer>\n      </div>\n    </div>\n  </div>\n</div>"),$o.join("\n").replace(/\s([\w-]+)='true'/gm," $1").replace(/\s([\w-]+)='false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this),function(){null==window.JNC_TPL&&(window.JNC_TPL={}),window.JNC_TPL["widgets/modal_window"]=function(context){return function(){var $o;return $o=[],$o.push("<div class='jnc-modal-container'>"),this.enableOverlay&&$o.push("  <div class='jnc-modal-overlay'></div>"),$o.push("  <div class='jnc-popup-row'>\n    <div class='jnc-popup-col'></div>\n  </div>\n</div>"),$o.join("\n").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(context)}}.call(this);var prevOl;prevOl=window.ol,function(root,factory){var Backbone,FULL_INCLUSION,_;FULL_INCLUSION=!1,!FULL_INCLUSION&&"function"==typeof define&&define.amd?define(["exports","jquery","underscore","backbone","ol"],function(exports,$,_,Backbone,ol){return root.JNC=factory(root,exports,$,_,Backbone,ol)}):FULL_INCLUSION||"undefined"==typeof exports?root.JNC=factory(root,{},root.jQuery||root.Zepto||root.ender||root.$,root._,root.Backbone,root.ol):(Backbone=require("backbone"),_=require("underscore"),window._TEST_MODE?root.JNC=factory(root,exports,root.jQuery||root.Zepto||root.ender||root.$||$,_,Backbone,root.ol||ol):factory(root,exports,root.jQuery||root.Zepto||root.ender||root.$,_,Backbone,root.ol))}(this,function(root,JNC,$,_,Backbone,ol){var TPL,initI18n,previousJNC;return void 0===$?void alert("jQuery not found!"):void 0===_?void alert("Underscore not found!"):void 0===Backbone?void alert("Backbone not found!"):void 0===ol?void alert("OpenLayer3 not found!"):(previousJNC=root.JNC,window._TEST_MODE&&(root.JNC_TPL=window.JNC_TPL),TPL=root.JNC_TPL?root.JNC_TPL:{},root.JNC_TPL=null,JNC={ROOT_CONTEXT:null,utils:{},Routers:{},Models:{},Controllers:{},Views:{},Collections:{},Widgets:{},Events:_.extend({},Backbone.Events),TPL:TPL,i18n:null,DataTypes:{},Leaflet:{},Google:{}},JNC.VERSION="2.1.19",JNC.BUILD_TIME="2018-11-27T15:31:20Z",JNC.$=$.noConflict(!0),JNC._=_.noConflict(),JNC.Backbone=Backbone.noConflict(),JNC.ol=ol,window.ol=prevOl,JNC.noConflict=function(){return root.JNC=previousJNC,this},JNC.setTranslationFunction=function(callback){return JNC.i18n.setTranslationFunction(callback)},JNC.getContext=function(optionalAsset){return null==JNC.ROOT_CONTEXT&&("undefined"!=typeof document&&null!==document&&null!=document.body&&null!=document.body.getAttribute("data-root")?JNC.ROOT_CONTEXT=document.body.getAttribute("data-root"):JNC.ROOT_CONTEXT="/"),null!=optionalAsset?JNC.ROOT_CONTEXT+optionalAsset:JNC.ROOT_CONTEXT},JNC.setContext=function(value){if(null!=value)return JNC.ROOT_CONTEXT=value},JNC.setContent=function(value){if(null!=value)return JNC.ROOT_CONTEXT=value},JNC.MAP_MODE={BOATING:"boating",SKI:"ski"},JNC.MODE={MARINE:"marine",
SKI:"ski",HIKE_BIKE:"hike_bike",FLY:"fly"},JNC.NAVIONICS_CHARTS={NAUTICAL:"nautical",SONARCHART:"sonar",SKI:"ski"},JNC.DEPTH_UNIT={METERS:"meters",FEET:"feet",FATHOMS:"fathoms"},JNC.SAFETY_DEPTH_LEVEL={METERS_20:"level_0",FEET_60:"level_0",FATHOMS_10:"level_0",METERS_10:"level_1",FEET_30:"level_1",FATHOMS_5:"level_1",METERS_5:"level_2",FEET_18:"level_2",FATHOMS_2:"level_2",METERS_2:"level_3",FEET_6:"level_3",FATHOMS_1:"level_3",LEVEL1:"level_1",LEVEL2:"level_2",LEVEL3:"level_3",LEVEL4:"level_4",LEVEL0:"level_0"},JNC.SAFETY_DEPTH_RANGE={METERS:[0,20],FEET:[0,60],FATHOMS:[0,10]},JNC.DISTANCE_UNIT={FEET:"feet",METERS:"meters",FATHOMS:"fathoms",KILOMETERS:"kilometers",MILES:"miles",NAUTICAL:"nautical"},JNC.MAP_LAYERS={NO_OVERLAY:"NOOVERLAY",TERRAIN:"TERRAIN",SATELLITE:"SATELLITE"},JNC.SPEED_UNIT={KMPH:"kmph",KNOT:"knot",MPH:"mph"},JNC.TEMPERATURE_UNIT={CELSIUS:"celsius",FAHRENHEIT:"fahrenheit"},JNC.CONSUMPTION_UNIT={LITERS:"lph",GALLONS:"gph"},JNC.VOLUME_UNIT={LITERS:"liters",GALLONS:"gallons"},JNC.LOCATION_CATEGORIES={POSITION:0,MARINE:1,FUEL_STATION:3,WATERFRONT_RESTAURANT:4,MARINE_OUTDOOR_SHOP:7,MARINE_REPAIR:9,TIDE:10,CURRENTS:11,BOAT_DEALER_AND_BUILDER:12,LAKE:13},JNC.GA_EVENT={CATEGORIES:{BOATING_SEARCH:"BoatingSearch",BOATING_QUICKINFO:"BoatingQuickInfo",ROUTING:"Routing"},ACTIONS:{SEARCH_BY_NAME:"SearchByName",SEARCH_BY_CATEGORY:"SerachByCategory",QUICKINFO:"QuickInfo",ROUTE_CREATION:"RouteCreation",ROUTE_EDIT:"RouteEdit",ROUTE_SAVING:"RouteSaving",ROUTE_DELETE:"RouteDelete"},LABELS:{EMPTY_LABEL:"-",MANUAL_ROUTING:"Manual",AUTO_ROUTING:"Automatic"}},initI18n=function(){var detectLocale,dictionary,i18n,locale,metricCountryUnits,nonMetricCountries,nonMetricCountryUnits;return dictionary={get_it_now:"Buy Now",product_catalog:"Product Catalog",chartplotter_charts:"Chartplotter",lake_list_close:"Close",lake_list_search:"Search",lake_see_list:"See lake list",mobile_apps:"Mobile",date:"Date",length:"Length",distance:"Distance",depth:"Depth",speed:"Speed",duration:"Duration",recorded_by:"Recorded by",start:"Start",end:"End",max_speed:"Max Speed",avg_speed:"Avg Speed",last_update:"Last update",max_depth:"Max Depth",avg_depth:"Avg Depth",disclaimer_msg:"<a href='http://www.navionics.com/en/acknowledgements' target='_new' class='navionics-acknowledgements'>Acknowledgements</a> | Not to be used for navigation",no_data:"There is no data to display",minValue:"Min",maxValue:"Max",boating:"Boating",available_on_mobile:"Feature available in our mobile app only",error:"Error",updated:"Updated",boat_settings:{title:"Boat Settings",description:"Please set your boat parameters before starting an Automatic route",draft_title:"Draft",cruising_speed_title:"Cruising Speed",fuel_consumption_title:"Fuel Consumption",map_safety_depth_min:"Min {value} {units}",map_safety_depth_max:"Max {value} {units}"},distance_ruler:{distance:"Distance",heading:"Heading"},dealers:{title:"Find a dealer",by_location:"by location",by_name:"by name",location_placeholder:"Enter a location",name_placeholder:"Enter a dealer name"},tracks:{just_updated:"Updated just now",no_data:"No tracks to display.",delete_tracks_template:"Delete {count} track(s)",delete_routes_template:"Delete {count} route(s)",not_found:"Track not found",start:"Start:",end:"End:",current_vs_best:"Current vs Best",current_vs_average:"Current vs Average",max_speed:"Max Speed",record:"Record",max_depth:"Max Depth",duration:"Duration",distance:"Distance",average:"Average",average_speed:"Avg Speed",average_depth:"Avg Depth"},latitude:{name:"Latitude",north:"N",south:"S"},longitude:{name:"Longitude",east:"E",west:"W"},buttons:{select:"Select",delete:"Delete",cancel:"Cancel",show_on_map:"Show On Map",latlong:"Lat/Long",map:"Map",back:"Back",search:"Search",close:"Close",learnMore:"Learn More",add_way_point:"Add Way Point",edit_map:"Edit Map",add_waypoint:"Add Waypoint",boat_to:"Boat To",drive_to:"Drive To",move:"Move",abuse:"Report Abuse",review:"Rate & Review",edit:"Edit",compare_prices:"Compare Prices",print:"Print",export:"Export",login:"Login",do_not_save:"Do not save"},currency:{dollar:"&#36;",euro:"&euro;"},units:{meters:"m",feet:"ft",fathoms:"fa",kilometers:"km",miles:"mi",nautical:"NM",kmph:"km/h",knot:"kts",mph:"mph",fahrenheit:"F°",celsius:"C°",lph:"L/h",gph:"G/h",liters:"L",gallons:"G",degree:"°",minutes:"'",datetime:{days:"d",hours:"h",minutes:"m",seconds:"s"},meters_full:"Meters",feet_full:"Feet",fathoms_full:"Fathoms",kilometers_full:"km",miles_full:"mi",nautical_full:"NM",kmph_full:"km/h",knot_full:"kts",mph_full:"mph",liters_full:"Liters",gallons_full:"Gallons"},no_data_unit_format:{depth:"--.-",distance:"--.-",speed:"--.-",consumption:"--",temperature:"--",date:"--",time:"--",datetime:{seconds:"--",minutes:"--",hours:"--",days:"--",amPm:"AM"},currency:{int:"-",decimal:"--"}},time:{title:"Time",am:"AM",pm:"PM"},hemispheres:{north:"N",south:"S",west:"W",east:"E"},routing:{start_point:"Start point",end_point:"End point",route_info:"Route Info",route_name_cancel:"Cancel",name_placeholder:"Enter name...",start_point_placeholder:"Start: search or tap the map",start_point_placeholder_without_search:"Start: tap the map",finish_point_placeholder:"End: search or tap the map",finish_point_placeholder_without_search:"End: tap the map",no_waypoints:"Tap the map to add waypoints.",delete_waypoint:"Delete Waypoint",planning_route:"Planning Route",around:"Around your destination",attention_message:"A route automatically calculated by this app does NOT replace safe navigation practices and should never be your only reference.",attention_danger_text:"Not to be used in hazardous waters",empty_name_error:"Please insert a name",duplicate_route_name:"A route with this name already exists",easy_view:"Easy View",unnamed_route:"Unnamed Route",boatsettings:{button_text:"Boat Settings",draft:"Draft",speed:"Speed",consumption:"Cons."},existing_route_alert:{title:"You have an active Route",description:"Would you like to create a new route?\n Your current route will be saved automatically.",new:"New Route"},forbidden_area:"Autorouting in this area not fully optimized",route_saving_alert:{title:"Save Route",description:"Please login to save and keep your routes synchronised across all your devices"},validating_route_name:"Checking Route Name…",notice:"Notice",error_on_route_saving:"On error occurred, please try later",route_saving_progress:"In progress..."},search:{title:"Search",categories:"Category",diesel:"Diesel",gasoline:"Gasoline",lat_long:"Lat/Long",search_small_query_message:"Insert at least 2 characters"},sort_keys:{distance:"Distance",gasoline:"Gasoline Price",diesel:"Diesel Price"},quickInfo:{distance:"Distance",magazines:"Magazines",weather:"Weather",marker:"Marker",diesel:"Diesel",gasoline:"Gasoline",lastModifiedBy:"Last modified by",lastModifiedDate:"On"},categories:{category_0:"Geoname",category_1:"Marina",category_2:"Marine & Outdoor Shop",category_3:"Marine Repair",category_4:"Boat Dealer and Builder",category_5:"Waterfront Restaurant",category_6:"Lakes",category_7:"Fuel Station",category_8:"Tides",category_9:"Currents"},errors:{invalid_latitude:"Latitude must be a number and not greater then 90°,<br/>e.g. 45° 48.957' N",invalid_longitude:"Longitude must be a number and not greater then  180°,<br/>e.g. 150° 20.957' E"},statuses:{Processing:"Processing",Accepted:"Ready",Rejected:"Rejected",Waiting:"Processing",Undefined:""},cartography_selector:{navionics:"NAVIONICS™",sonar_charts:"SonarChart™"},table:{state:"State",lakes:"Lakes",country:"Country",new:"New",hd:"HD",noresults:"No results found",lakelistlink:"See lake list"}},nonMetricCountries=["AI","AQ","AG","AR","AW","BS","BB","BZ","BM","BO","BR","VG","CA","KY","CL","CO","CR","CU","DM","DO","EC","SV","GF","GL","GD","VC","GP","GT","GY","HT","HN","JM","MQ","MX","MS","AN","NC","NI","PA","PY","PE","PR","SH","KN","LC","PM","VC","SR","TT","TC","US","UY","VE"],metricCountryUnits={depth:JNC.DEPTH_UNIT.METERS,distance:JNC.DISTANCE_UNIT.KILOMETERS,speed:JNC.SPEED_UNIT.KMPH,volume:JNC.VOLUME_UNIT.LITERS,consumption:JNC.CONSUMPTION_UNIT.LITERS,temperature:JNC.TEMPERATURE_UNIT.CELSIUS},nonMetricCountryUnits={depth:JNC.DEPTH_UNIT.FEET,distance:JNC.DISTANCE_UNIT.MILES,speed:JNC.SPEED_UNIT.MPH,volume:JNC.VOLUME_UNIT.GALLONS,consumption:JNC.CONSUMPTION_UNIT.GALLONS,temperature:JNC.TEMPERATURE_UNIT.FAHRENHEIT},i18n={defaultLang:"en",defaultDictionary:dictionary,translationFunction:null,locale:null,countryCode:null,metricSystem:!0,systemUnits:metricCountryUnits,setTranslationFunction:function(translateFunction){return this.translationFunction=translateFunction},setLocale:function(options){return this.locale=options.locale,this.countryCode=options.countryCode,this.metricSystem=!_.contains(nonMetricCountries,this.countryCode),this.systemUnits=this.metricSystem?metricCountryUnits:nonMetricCountryUnits},t:function(key){return this.translate(key)},translate:function(key){var result;return result=key,null!=key&&null!=this.translationFunction&&null!=this.translationFunction(key)&&(result=this.translationFunction(key)),null!=result&&result!==key||(result=this.translateDefault(key)),result},translateDefault:function(key){var index,path,value;for(path=key.split("."),index=0,value=this.defaultDictionary[path[index++]];path.length>index&&_.isObject(value);)value=null!=value?value[path[index++]]:void 0;return value||key}},detectLocale=function(){var language;return language=navigator.languages?navigator.languages[0]:navigator.language||navigator.userLanguage,language?language.substr(0,2).toLowerCase():i18n.defaultLang},locale=detectLocale(),i18n.setLocale({countryCode:locale.toUpperCase(),locale:locale}),i18n},JNC.i18n=initI18n(),JNC)}),function(root,factory){factory(root.JNC)}(this,function(JNC){return JNC.DataTypes.Time=function(){function Time(ms){this.ms=ms}return Time.prototype.addMilliseconds=function(ms){return this.ms+=ms},Time.prototype.getSeconds=function(){return Math.floor(this.ms/1e3%86400%3600%60)},Time.prototype.getMinutes=function(){return Math.floor(this.ms/1e3%86400%3600/60)},Time.prototype.getHours=function(){return Math.floor(this.ms/1e3%86400/3600)},Time.prototype.getDays=function(){return Math.floor(this.ms/1e3/86400)},Time.prototype.getPreformatted=function(){return{seconds:this.getSeconds(),minutes:this.getMinutes(),hours:this.getHours(),days:this.getDays()}},Time}()}),function(root,factory){factory(root.JNC,root.JNC._,root.JNC.ol)}(this,function(JNC,_,ol){return JNC.utils.Converter={_distanceMatrix:{feet:{meters:.3048,fathoms:.166666667,kilometers:3048e-7,miles:.000189393939,nautical:.000164578834},meters:{feet:3.2808399,fathoms:.546806649,kilometers:.001,miles:.000621371192,nautical:.000539956803},fathoms:{feet:6,meters:1.8288,kilometers:.0018288,miles:.00113636364,nautical:.000987473002},kilometers:{feet:3280.8399,meters:1e3,fathoms:546.806649,miles:.621371192,nautical:.539956803},miles:{feet:5280,meters:1609.344,fathoms:880,kilometers:1.609344,nautical:.868976242},nautical:{feet:6076.11549,meters:1852,fathoms:1012.68591,kilometers:1.852,miles:1.15077945}},_speedMatrix:{kmph:{mph:.621371,knot:.539957},mph:{kmph:1.609344,knot:.868976},knot:{kmph:1.852,mph:1.150779}},_volumeMatrix:{liters:{gallons:.264172052},gallons:{liters:3.78541178}},_temperatureMatrix:{celsius:{fahrenheit:function(x){return 1.8*x+32}},fahrenheit:{celsius:function(x){return(x-32)/1.8}}},_convert:function(matrix,source,destination,value){var multiply;if(source===destination)return value;if(null==matrix[source])throw new Error("Unknown unit <"+source+">");if(null==matrix[source][destination])throw new Error("Unknown unit <"+destination+">");return multiply=matrix[source][destination],_.isFunction(multiply)?multiply(value):value*multiply},distance:function(value,sourceUnits,destinationUnits){return this._convert(this._distanceMatrix,sourceUnits,destinationUnits,value)},depth:function(value,sourceUnits,destinationUnits){return this._convert(this._distanceMatrix,sourceUnits,destinationUnits,value)},speed:function(value,sourceUnits,destinationUnits){return this._convert(this._speedMatrix,sourceUnits,destinationUnits,value)},volume:function(value,sourceUnits,destinationUnits){return this._convert(this._volumeMatrix,sourceUnits,destinationUnits,value)},consumption:function(value,sourceUnits,destinationUnits){return this._convert(this._volumeMatrix,this.consumptionUnitsToVolume(sourceUnits),this.consumptionUnitsToVolume(destinationUnits),value)},temperature:function(value,sourceUnits,destinationUnits){return this._convert(this._temperatureMatrix,sourceUnits,destinationUnits,value)},volumeUnitsToConsumption:function(volumeUnits){switch(volumeUnits){case JNC.VOLUME_UNIT.LITERS:return JNC.CONSUMPTION_UNIT.LITERS;case JNC.VOLUME_UNIT.GALLONS:return JNC.CONSUMPTION_UNIT.GALLONS;default:throw new Error("Not valid volume units - <"+volumeUnits+">")}},consumptionUnitsToVolume:function(consumptionUnits){switch(consumptionUnits){case JNC.CONSUMPTION_UNIT.LITERS:return JNC.VOLUME_UNIT.LITERS;case JNC.CONSUMPTION_UNIT.GALLONS:return JNC.VOLUME_UNIT.GALLONS;default:throw new Error("Not valid consumption units - <"+consumptionUnits+">")}},distanceUnitsToSpeed:function(distanceUnits){switch(distanceUnits){case JNC.DISTANCE_UNIT.NAUTICAL:return JNC.SPEED_UNIT.KNOT;case JNC.DISTANCE_UNIT.KILOMETERS:return JNC.SPEED_UNIT.KMPH;case JNC.DISTANCE_UNIT.MILES:return JNC.SPEED_UNIT.MPH;default:throw new Error("Not valid distance units - <"+distanceUnits+">")}},speedUnitsToDistance:function(speedUnits){switch(speedUnits){case JNC.SPEED_UNIT.KNOT:return JNC.DISTANCE_UNIT.NAUTICAL;case JNC.SPEED_UNIT.KMPH:return JNC.DISTANCE_UNIT.KILOMETERS;case JNC.SPEED_UNIT.MPH:return JNC.DISTANCE_UNIT.MILES;default:throw new Error("Not valid speed units - <"+speedUnits+">")}},standardMercatorToWeb:function(coordinates){return ol.proj.transform(coordinates,"EPSG:4326","EPSG:3857")},webMercatorToStandard:function(coordinates){return ol.proj.transform(coordinates,"EPSG:3857","EPSG:4326")},standardMercatorExtentToWeb:function(coordinates){return ol.proj.transformExtent(coordinates,"EPSG:4326","EPSG:3857")},webMercatorExtentToStandard:function(coordinates){return ol.proj.transformExtent(coordinates,"EPSG:3857","EPSG:4326")},toLonLat:function(coordinate){return coordinate.lon&&coordinate.lat?coordinate:{lon:coordinate[0],lat:coordinate[1]}},fromLonLat:function(lonLatCoord){return[lonLatCoord.lon,lonLatCoord.lat]},hexToRGBA:function(hex,opacity){var b,g,r;return null==opacity&&(opacity=.2),hex=hex.replace("#",""),r=parseInt(hex.substring(0,2),16),g=parseInt(hex.substring(2,4),16),b=parseInt(hex.substring(4,6),16),"rgba("+r+","+g+","+b+","+opacity+")"}}}),function(root,factory){factory(root.JNC,root.JNC._,root.JNC.DataTypes.Time,root.JNC.utils.Converter)}(this,function(JNC,_,Time,Converter){return JNC.utils.Formatter={days:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],formatPrice:function(price,currency,short){var decimal,delimiter,intPrice,sign;return null==currency&&(currency="dollar"),null==short&&(short=!1),null===price?"-.--":(delimiter="dollar"===currency?".":",",sign=JNC.i18n.translate("currency."+currency),isNaN(price)?(intPrice=JNC.i18n.translate("no_data_unit_format.currency.int"),decimal=delimiter+JNC.i18n.translate("no_data_unit_format.currency.decimal")):(price=parseFloat(price),intPrice=Math.floor(price),decimal=Math.round(100*price)%100,decimal=short&&0===decimal?"":delimiter+this.addLeadingZero(decimal)),price=sign+intPrice+decimal)},_formatDecimalUnit:function(unitName,unitValue,formatUnit,dataUnit,zeroAcceptable){var unitValueFloat,value;return null==formatUnit&&(formatUnit=null),null==dataUnit&&(dataUnit=null),null==zeroAcceptable&&(zeroAcceptable=!0),unitValueFloat=parseFloat(unitValue),null==formatUnit&&(formatUnit=JNC.i18n.systemUnits[unitName]),null==dataUnit&&(dataUnit=JNC.i18n.systemUnits[unitName]),null==unitValueFloat||isNaN(unitValueFloat)||!zeroAcceptable&&0===unitValueFloat?value="string"==typeof unitValue?unitValue:JNC.i18n.translate("no_data_unit_format."+unitName):(value=function(){switch(unitName){case"depth":return Converter.depth(unitValueFloat,dataUnit,formatUnit);case"distance":return Converter.distance(unitValueFloat,dataUnit,formatUnit);case"speed":return Converter.speed(unitValueFloat,dataUnit,formatUnit);case"temperature":return Converter.temperature(unitValueFloat,dataUnit,formatUnit);case"volume":return Converter.volume(unitValueFloat,dataUnit,formatUnit);case"consumption":return Converter.consumption(unitValueFloat,dataUnit,formatUnit);default:throw new Error("Unknown unit <"+unitName+">")}}(),value=value<1e3?Math.round(10*value)/10:Math.round(value)),{value:value,unit:formatUnit}},formatDepth:function(depth,formatUnit,dataUnit){return null==formatUnit&&(formatUnit=null),null==dataUnit&&(dataUnit=null),this._formatDecimalUnit("depth",depth,formatUnit,dataUnit)},formatTemperature:function(temperature,formatUnit,dataUnit){return null==formatUnit&&(formatUnit=null),null==dataUnit&&(dataUnit=null),this._formatDecimalUnit("temperature",temperature,formatUnit,dataUnit)},formatDistance:function(distance,formatUnit,dataUnit){return null==formatUnit&&(formatUnit=null),null==dataUnit&&(dataUnit=null),this._formatDecimalUnit("distance",distance,formatUnit,dataUnit)},formatSpeed:function(speed,formatUnit,dataUnit,zeroAcceptable){return null==formatUnit&&(formatUnit=null),null==dataUnit&&(dataUnit=null),null==zeroAcceptable&&(zeroAcceptable=!1),this._formatDecimalUnit("speed",speed,formatUnit,dataUnit,zeroAcceptable)},formatConsumption:function(consumption,formatUnit,dataUnit){return null==formatUnit&&(formatUnit=null),null==dataUnit&&(dataUnit=null),this._formatDecimalUnit("consumption",consumption,formatUnit,dataUnit)},formatVolume:function(volume,formatUnit,dataUnit){return null==formatUnit&&(formatUnit=null),null==dataUnit&&(dataUnit=null),this._formatDecimalUnit("volume",volume,formatUnit,dataUnit)},formatTime:function(time){var amPm,hours,minutes,seconds;return time=this._initDate(time),hours=0,minutes=0,seconds=0,null!=time?(hours=time.getHours(),minutes=time.getMinutes(),seconds=time.getSeconds(),hours>=12?(hours>12&&(hours-=12),amPm=JNC.i18n.translate("time.pm")):(0===hours&&(hours=12),amPm=JNC.i18n.translate("time.am"))):(hours=JNC.i18n.translate("no_data_unit_format.datetime.hours"),minutes=JNC.i18n.translate("no_data_unit_format.datetime.minutes"),seconds=JNC.i18n.translate("no_data_unit_format.datetime.seconds"),amPm=JNC.i18n.translate("no_data_unit_format.datetime.amPm")),{hours:hours,minutes:minutes,seconds:seconds,amPm:amPm}},formatTimeInterval:function(time){var days,hours,minutes,seconds;return(time=this._initDate(time))instanceof Time?time.getPreformatted():(null!=time?(seconds=time.getUTCSeconds(),minutes=time.getUTCMinutes(),hours=time.getUTCHours(),days=Math.floor(time/864e5)):(seconds=JNC.i18n.translate("no_data_unit_format.datetime.seconds"),minutes=JNC.i18n.translate("no_data_unit_format.datetime.minutes"),hours=JNC.i18n.translate("no_data_unit_format.datetime.hours"),days=JNC.i18n.translate("no_data_unit_format.datetime.days")),{seconds:seconds,minutes:minutes,hours:hours,days:days})},formatDate:function(date,isExtended){var time,timeAmPm;return null==isExtended&&(isExtended=!1),null==date?JNC.i18n.translate("no_data_unit_format.date"):(date=this._initDate(date),date instanceof Date||(date=new Date(date)),isExtended?(time=this.formatTime(date),timeAmPm=0===time.minutes?time.hours+time.amPm:time.hours+":"+this.addLeadingZero(time.minutes)+time.amPm,date=this.days[date.getDay()]+" "+this.months[date.getMonth()]+" "+this.addLeadingZero(date.getDate())+", "+date.getFullYear()+" "+timeAmPm):(this.metricSystem=null!=JNC.metricSystem?JNC.metricSystem:JNC.i18n.metricSystem,date=this.metricSystem?this.addLeadingZero(date.getDate())+" "+this.months[date.getMonth()]+" "+date.getFullYear().toString().slice(-2):this.days[date.getDay()]+", "+this.months[date.getMonth()]+" "+this.addLeadingZero(date.getDate())),date)},addLeadingZero:function(value,length){var result;for(null==length&&(length=2),result=value.toString();result.length<length;)result="0"+result;return result},htmlspecialchars:function(string,quote_style,charset,double_encode){var OPTS,i,noquotes,optTemp;if(optTemp=0,i=0,noquotes=!1,void 0!==quote_style&&null!==quote_style||(quote_style=2),string+="",!1!==double_encode&&(string=string.replace(/&/g,"&amp;")),string=string.replace(/</g,"<").replace(/>/g,">"),OPTS={ENT_NOQUOTES:0,ENT_HTML_QUOTE_SINGLE:1,ENT_HTML_QUOTE_DOUBLE:2,ENT_COMPAT:2,ENT_QUOTES:3,ENT_IGNORE:4},0===quote_style&&(noquotes=!0),"number"!=typeof quote_style){for(quote_style=[].concat(quote_style),i=0;i<quote_style.length;)0===OPTS[quote_style[i]]?noquotes=!0:OPTS[quote_style[i]]&&(optTemp|=OPTS[quote_style[i]]),i++;quote_style=optTemp}return quote_style&OPTS.ENT_HTML_QUOTE_SINGLE&&(string=string.replace(/'/g,"&#039;")),noquotes||(string=string.replace(/"/g,'"')),string},_initDate:function(time){return null==time?time:(_.isString(time)&&(time="now"===time?new Date:new Date(1e3*time)),_.isNumber(time)&&(time=new Date(1e3*time)),time instanceof Date||time instanceof Time||(time=new Date),time)}}}),function(root,factory){factory(root.JNC,root.JNC.$,root.JNC._,root.JNC.Backbone)}(this,function(JNC,$,_,Backbone){return JNC.utils.BannerHandler=function(){function BannerHandler(options){this.attribute=_.extend({},INTERNAL_DEFAULTS,options),this.map_div=$(this.attribute.element),window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],function(){var gads,node;gads=document.createElement("script"),gads.async=!0,gads.src="https://www.googletagservices.com/tag/js/gpt.js",node=document.getElementsByTagName("script")[0],node.parentNode.insertBefore(gads,node)}()}var INTERNAL_DEFAULTS;return INTERNAL_DEFAULTS={DFPAccount:"51662343",DFPUnitBanner:"WebAPIv2",DFPUnitLogo:"WebAPIv2_Logo",element:".map",navKey:"no-key-provided"},BannerHandler.prototype.replaceLogo=function(tag_logo,tag_id,tag_class){return null==tag_id&&(tag_id=this._guidGenerator()),null==tag_class&&(tag_class=""),$("<div/>",{id:tag_id,class:"jnc-banner jnc-banner-on-logo "+tag_class}).appendTo(this.map_div.find(".navionics-map-container")),this._pushBanner(tag_id,this.attribute.DFPUnitLogo,[220,30])},BannerHandler.prototype.loadBanner=function(tag_id,tag_class,position){return null==tag_id&&(tag_id=this._guidGenerator()),null==tag_class&&(tag_class=""),null==position&&(position="south"),$("<div/>",{id:tag_id,class:"jnc-banner jnc-banner-"+position.toLowerCase()+" "+tag_class}).appendTo(this.map_div.find(".navionics-map-container")),this._pushBanner(tag_id,this.attribute.DFPUnitBanner,[234,60])},BannerHandler.prototype._pushBanner=function(tag_id,DFPUnit,size){var _this=this;return window.googletag.cmd.push(function(){return window.googletag.defineSlot("/"+_this.attribute.DFPAccount+"/"+DFPUnit,size,tag_id).addService(googletag.pubads()),window.googletag.pubads().setTargeting("webapi_id",encodeURIComponent(_this.attribute.navKey)),window.googletag.pubads().enableSingleRequest(),window.googletag.enableServices(),window.googletag.display(tag_id)})},BannerHandler.prototype._guidGenerator=function(){var S4;return(S4=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)})()+S4()+"-"+S4()+"-"+S4()+"-"+S4()+"-"+S4()+S4()+S4()},BannerHandler}()}),function(root,factory){factory(root.JNC,root.JNC.$)}(this,function(JNC,$){return null!=$.ui&&$.widget("custom.jncSelect",$.ui.selectmenu,{options:{optionIconClassName:"ui-option-icon",dataIconClassAttributeName:"data-icon-class",dataIconStyleAttributeName:"data-icon-style",dataIconUrlAttributeName:"data-icon-url",useIcons:!1,hideSelected:!1,selectButtonClassName:"jnc-select",optionsClassName:"jnc-select-options"},setVal:function(value){},refresh:function(){var item;if(this._super(),item=this.items[this.element[0].selectedIndex],this.options.useIcons&&item)return this._addIcon(item.element,this.buttonText)},_create:function(){if(this._super(),this.options.selectButtonClassName&&this.button.addClass(this.options.selectButtonClassName),this.options.optionsClassName)return this.menu.addClass(this.options.optionsClassName)},_addIcon:function(element,$container){var $img,$span;if($span=$("<span>",{style:element.attr(this.options.dataIconStyleAttributeName),class:this.options.optionIconClassName+" "+element.attr(this.options.dataIconClassAttributeName)}),$span.prependTo($container),element.attr(this.options.dataIconUrlAttributeName))return $img=$("<img/>").attr("src",element.attr(this.options.dataIconUrlAttributeName)),$img.prependTo($span)},_renderItem:function(ul,item){var $li;return $li=this._super(ul,item),this.options.useIcons&&this._addIcon(item.element,$li),$li},_drawButton:function(item,event){if(this._super(item,event),this.options.useIcons)return this._addIcon($(this.element.find("option:selected")),this.buttonText)},_select:function(item,event){if(this._super(item,event),this.element.trigger("change",[event,{item:item}]),this.options.useIcons)return this._addIcon(item.element,this.buttonText)},open:function(event){if(this._super(event),this.options.hideSelected)return this.menu.find(".ui-state-focus").hide().siblings().show()}}),JNC});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC.$,root.JNC._,root.JNC.Backbone,root.JNC.ol)}(this,function(JNC,$,_,Backbone,ol){var _ref;return JNC.Widgets.Balloon=function(_super){function Balloon(){return _ref=Balloon.__super__.constructor.apply(this,arguments)}return __extends(Balloon,_super),Balloon.prototype.template=JNC.TPL["widgets/balloon"],Balloon.prototype.id=null,Balloon.prototype.featureId=null,Balloon.prototype.options=null,Balloon.prototype._map=null,Balloon.prototype._overlay=null,Balloon.prototype.events=function(){var events;return events={},this.options.closeButton&&(events["click .close-button"]="close"),events},Balloon.prototype.initialize=function(options){return _.bindAll(this,"close"),this.id=_.uniqueId("balloon_"),this.featureId=options.id,this.options=_.omit(options,"map"),this._map=options.map,options.template&&(this.template=options.template),this._subscribeEvents(),this.render()},Balloon.prototype._subscribeEvents=function(){if(!this.options.closeButton)return this._map.getRowMap().on("click",this.close)},Balloon.prototype._unsubscribeEvents=function(){if(!this.options.closeButton)return this._map.getRowMap().un("click",this.close)},Balloon.prototype.render=function(){return this.setElement(this.template(_.clone(this.options))),null==this._overlay&&(this._overlay=new ol.Overlay({id:this.id,element:this.el,position:this.options.coordinates,positioning:"bottom-center",offset:this.options.offset||[0,0]}),this._overlay.set("balloonId",this.id)),this.show(),this},Balloon.prototype.close=function(){if(null!=this._map)return this._unsubscribeEvents(),this.hide(),this.undelegateEvents(),this.remove(),this._map=this._overlay=this.options=null,JNC.Events.trigger("balloon_info:closed",this.id,this.featureId),this.trigger("closed",this.id)},Balloon.prototype.hide=function(){if(null!=this._map)return this._map.getRowMap().removeOverlay(this._overlay)},Balloon.prototype.show=function(){if(null!=this._map)return this.visible()?void 0:this._map.getRowMap().addOverlay(this._overlay)},Balloon.prototype.visible=function(){var overlays;return!!this._map&&(overlays=this._map.getRowMap().getOverlays().getArray().map(function(overlay){return overlay.get("balloonId")}),_.contains(overlays,this._overlay.get("balloonId")))},Balloon.prototype.setPosition=function(coordinate){return this._overlay.setPosition(coordinate)},Balloon}(Backbone.View),_.extend(JNC.Widgets.Balloon.prototype,Backbone.Events),JNC.Widgets.Balloon}),function(root,factory){factory(root.JNC)}(this,function(JNC){return JNC.TRACK_STATUS={Undefined:"Undefined",Processing:"Processing",Accepted:"Accepted",Rejected:"Rejected",Waiting:"Waiting",toStringStatus:function(intStatus){switch(intStatus){case 0:return this.Processing;case 1:return JNC.TRACK_STATUS.Accepted;case 2:return JNC.TRACK_STATUS.Rejected;case 3:return JNC.TRACK_STATUS.Waiting;default:return JNC.TRACK_STATUS.Undefined}}},JNC}),function(root,factory){factory(root.JNC,root.JNC._)}(this,function(JNC,_){return JNC.utils.GeneralUtils={uuid4:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r,v;return r=16*Math.random()|0,v="x"===c?r:3&r|8,v.toString(16)})},isIE:function(){return!!top.execScript},isIE11:function(){return!(!window.navigator.userAgent.match(/Trident/)||!window.navigator.userAgent.match(/rv[ :]11/))},isFirefox:function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1},getPointerCoordinateForCanvas:function(element,event){var canvasX,canvasY,currentElement,totalOffsetX,totalOffsetY;for(totalOffsetX=0,totalOffsetY=0,canvasX=0,canvasY=0,currentElement=element;;)if(totalOffsetX+=currentElement.offsetLeft-currentElement.scrollLeft,totalOffsetY+=currentElement.offsetTop-currentElement.scrollTop,!(currentElement=currentElement.offsetParent))break;return canvasX=event.pageX-totalOffsetX,canvasY=event.pageY-totalOffsetY,[canvasX,canvasY]},isUrl:function(url){return/^(https?|ftp|file):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(url)},isRetina:function(){var mediaQuery;return mediaQuery="(-webkit-min-device-pixel-ratio: 1.5),(min--moz-device-pixel-ratio: 1.5),(-o-min-device-pixel-ratio: 3/2),(min-resolution: 1.5dppx)",window.devicePixelRatio>1||window.matchMedia&&window.matchMedia(mediaQuery).matches},isTouchSupported:function(){return void 0!==window.ontouchstart||window.DocumentTouch&&document instanceof DocumentTouch},hashGenerator:function(){var reduceFunc;return reduceFunc=function(memo,argument){return memo+(memo.length>0?"_":"")+argument},_.reduce(arguments,reduceFunc,"")},round:function(value,precision,fixed){var multiple,result;return null==precision&&(precision=0),null==fixed&&(fixed=!0),multiple=Math.pow(10,precision),result=Math.round(value*multiple)/multiple,fixed&&(result=result.toFixed(precision)),result},arrayMax:function(array){return Math.max.apply(Math,array)},arrayMin:function(array){return Math.min.apply(Math,array)},isNumber:function(value){var isNumeric;return isNumeric=/^(\d+|\d+\.\d+)$/.test(value.toString()),_.isNumber(value)||(value=parseFloat(value)),isNumeric&&_.isNumber(value)&&!isNaN(value)&&isFinite(value)},forAllEvents:function(events,selector,callback){var reduceFunction;return callback?selector=" "+selector:(callback=selector,selector=""),"string"==typeof events&&(events=events.split(/[,\s]\s*/)),reduceFunction=function(result,event){
return result[event+selector]=function(e){},result},events.reduce(reduceFunction,{})},MARK_EXCLUSIVE_KEY_EVENTS:"jnc-exclusive-key",markElement:function(mark,$element){if($element instanceof JNC.$)return $element.addClass(mark)},hasMarkElement:function(mark,$element){if($element instanceof JNC.$)return $element.hasClass(mark)},debounce:function(func,wait,immediate){var debounced,later,result,timeout;return timeout=null,result=null,later=function(context,args){if(timeout=null,args)return void(result=func.apply(context,args))},debounced=this.restArgs(function(args){var callNow;return timeout&&clearTimeout(timeout),immediate?(callNow=!timeout,timeout=setTimeout(later,wait),callNow&&(result=func.apply(this,args))):timeout=_.delay(later,wait,this,args),result}),debounced.cancel=function(){return clearTimeout(timeout),timeout=null},debounced},restArgs:function(func,startIndex){return startIndex=null==startIndex?func.length-1:+startIndex,function(){var args1,index,length,rest;for(length=Math.max(arguments.length-startIndex,0),rest=new Array(length),index=0;index<length;)rest[index]=arguments[index+startIndex],index++;switch(startIndex){case 0:return func.call(this,rest);case 1:return func.call(this,arguments[0],rest);case 2:return func.call(this,arguments[0],arguments[1],rest)}for(args1=new Array(startIndex+1),index=0;index<startIndex;)args1[index]=arguments[index],index++;return args1[startIndex]=rest,func.apply(this,args1)}}}}),function(root,factory){root.dcodeIO||(root.dcodeIO={ProtoBuf:null,ByteBuffer:null}),factory(root.JNC,root.JNC.$,root.JNC._,root.dcodeIO.ProtoBuf,root.dcodeIO.ByteBuffer)}(this,function(JNC,$,_,ProtoBuf,ByteBuffer){return JNC.utils.ProtoBufferParser={_protoCache:{},parse:function(options){var d1,d2,onFailure,onSuccess,_this=this;return null==options&&(options={}),d1=this._loadProto(options.protoUrl),d2=this._loadMessage(options.messageUrl),onSuccess=function(builder,data){var result;if(result=_this._parse(builder,data,options),_.isFunction(options.onSuccess))return options.onSuccess(result)},onFailure=function(e){if(_.isFunction(options.onFailure))return options.onFailure(e)},$.when(d1,d2).done(onSuccess).fail(onFailure)},_parse:function(builder,data,options){var messageType;return messageType=builder.build(options.messageType),options.delimited?this._readDelimited(data,messageType):this._readSingle(data,messageType)},_readSingle:function(data,messageType){return messageType.decode64(data)},_readDelimited:function(data,messageType){var buffer,message,messages;for(buffer=ByteBuffer.wrap(data,"base64"),messages=[];buffer.remaining()>0;)message=messageType.decodeDelimited(buffer),messages.push(message);return messages},_loadProto:function(url){var d,resolve,_this=this;return d=$.Deferred(),resolve=function(){return d.resolve(_this._protoCache[url])},_.has(this._protoCache,url)?resolve():ProtoBuf.loadProtoFile(url,function(data,builder){return _this._protoCache[url]=builder,resolve()}),d.promise()},_loadMessage:function(url){var d,xhr;return d=$.Deferred(),xhr=ProtoBuf.Util.XHR(),xhr.open("GET",url,!0),xhr.responseType="arraybuffer",xhr.onload=function(evt){if(4===evt.target.readyState)return d.resolve(xhr.response)},xhr.send(null),d.promise()}},JNC.utils.ProtoBufferParser}),function(root,factory){factory(root.JNC)}(this,function(JNC){var LatLonE;return LatLonE=function(lat,lon,datum,height){if(!(this instanceof LatLonE))return new LatLonE(lat,lon,datum,height);void 0===datum&&(datum=LatLonE.datum.WGS84),void 0===height&&(height=0),this.lat=Number(lat),this.lon=Number(lon),this.datum=datum,this.height=Number(height)},LatLonE.ellipsoid={WGS84:{a:6378137,b:6356752.3142,f:1/298.257223563},GRS80:{a:6378137,b:6356752.31414,f:1/298.257222101},Airy1830:{a:6377563.396,b:6356256.909,f:1/299.3249646},AiryModified:{a:6377340.189,b:6356034.448,f:1/299.32496},Intl1924:{a:6378388,b:6356911.946,f:1/297},Bessel1841:{a:6377397.155,b:6356078.963,f:1/299.152815351}},LatLonE.datum={WGS84:{ellipsoid:LatLonE.ellipsoid.WGS84,transform:{tx:0,ty:0,tz:0,rx:0,ry:0,rz:0,s:0}},OSGB36:{ellipsoid:LatLonE.ellipsoid.Airy1830,transform:{tx:-446.448,ty:125.157,tz:-542.06,rx:-.1502,ry:-.247,rz:-.8421,s:20.4894}},ED50:{ellipsoid:LatLonE.ellipsoid.Intl1924,transform:{tx:89.5,ty:93.8,tz:123.1,rx:0,ry:0,rz:.156,s:-1.2}},Irl1975:{ellipsoid:LatLonE.ellipsoid.AiryModified,transform:{tx:-482.53,ty:130.596,tz:-564.557,rx:-1.042,ry:-.214,rz:-.631,s:-8.15}},TokyoJapan:{ellipsoid:LatLonE.ellipsoid.Bessel1841,transform:{tx:148,ty:-507,tz:-685,rx:0,ry:0,rz:0,s:0}}},void 0===Number.prototype.toRadians&&(Number.prototype.toRadians=function(){return this*Math.PI/180}),void 0===Number.prototype.toDegrees&&(Number.prototype.toDegrees=function(){return 180*this/Math.PI}),LatLonE.prototype.distanceTo=function(point){try{return this.inverse(point).distance}catch(_error){return _error,NaN}},LatLonE.prototype.inverse=function(point){var A,Alfa1,Alfa2,B,C,DeltaSigma,L,Sigma,a,b,cos2SigmaM,cosSigma,cosSqAlfa,cosU1,cosU2,coslambda,f,iterations,lambda,lambda1,lambda2,lambda_primo,p1,p2,phi1,phi2,s,sinAlfa,sinSigma,sinSqSigma,sinU1,sinU2,sinlambda,tanU1,tanU2,uSq;for(p1=this,p2=point,phi1=p1.lat.toRadians(),lambda1=p1.lon.toRadians(),phi2=p2.lat.toRadians(),lambda2=p2.lon.toRadians(),a=this.datum.ellipsoid.a,b=this.datum.ellipsoid.b,f=this.datum.ellipsoid.f,L=lambda2-lambda1,tanU1=(1-f)*Math.tan(phi1),cosU1=1/Math.sqrt(1+tanU1*tanU1),sinU1=tanU1*cosU1,tanU2=(1-f)*Math.tan(phi2),cosU2=1/Math.sqrt(1+tanU2*tanU2),sinU2=tanU2*cosU2,lambda=L,lambda_primo=void 0,iterations=0;;){if(sinlambda=Math.sin(lambda),coslambda=Math.cos(lambda),sinSqSigma=cosU2*sinlambda*(cosU2*sinlambda)+(cosU1*sinU2-sinU1*cosU2*coslambda)*(cosU1*sinU2-sinU1*cosU2*coslambda),0===(sinSigma=Math.sqrt(sinSqSigma)))return 0;if(cosSigma=sinU1*sinU2+cosU1*cosU2*coslambda,Sigma=Math.atan2(sinSigma,cosSigma),sinAlfa=cosU1*cosU2*sinlambda/sinSigma,cosSqAlfa=1-sinAlfa*sinAlfa,cos2SigmaM=cosSigma-2*sinU1*sinU2/cosSqAlfa,isNaN(cos2SigmaM)&&(cos2SigmaM=0),C=f/16*cosSqAlfa*(4+f*(4-3*cosSqAlfa)),lambda_primo=lambda,lambda=L+(1-C)*f*sinAlfa*(Sigma+C*sinSigma*(cos2SigmaM+C*cosSigma*(2*cos2SigmaM*cos2SigmaM-1))),!(Math.abs(lambda-lambda_primo)>1e-12&&++iterations<200))break}if(iterations>=200)throw new Error("Formula failed to converge");return uSq=cosSqAlfa*(a*a-b*b)/(b*b),A=1+uSq/16384*(4096+uSq*(uSq*(320-175*uSq)-768)),B=uSq/1024*(256+uSq*(uSq*(74-47*uSq)-128)),DeltaSigma=B*sinSigma*(cos2SigmaM+B/4*(cosSigma*(2*cos2SigmaM*cos2SigmaM-1)-B/6*cos2SigmaM*(4*sinSigma*sinSigma-3)*(4*cos2SigmaM*cos2SigmaM-3))),s=b*A*(Sigma-DeltaSigma),Alfa1=Math.atan2(cosU2*sinlambda,cosU1*sinU2-sinU1*cosU2*coslambda),Alfa2=Math.atan2(cosU1*sinlambda,-sinU1*cosU2+cosU1*sinU2*coslambda),Alfa1=(Alfa1+2*Math.PI)%(2*Math.PI),Alfa2=(Alfa2+2*Math.PI)%(2*Math.PI),s=Number(s.toFixed(3)),{distance:s,initialBearing:Alfa1.toDegrees(),finalBearing:Alfa2.toDegrees()}},JNC.utils.GeoTools={calculateVincentyDistance:function(start,end){var point1,point2;return point1=new LatLonE(start[1],start[0]),point2=new LatLonE(end[1],end[0]),point1.distanceTo(point2)},returnBearing:function(a,b){return Math.round(this.toBearing(Math.atan2(b[1]-a[1],b[0]-a[0])))+"°"},toBearing:function(a){return(450-this.toDeg(a))%360},toDeg:function(a){return 180*a/Math.PI},dmsToDecimalDegrees:function(degrees,minutes,seconds){var sign;return sign=degrees>=0?1:-1,degrees=Math.abs(degrees),sign*(degrees+minutes/60+seconds/3600)},dmToDecimalDegrees:function(degrees,minutes){var sign;return sign=degrees>=0?1:-1,degrees=Math.abs(degrees),sign*(degrees+minutes/60)},decimalDegreesToDms:function(decimalDegrees){var degrees,minutes,seconds,sign;return sign=decimalDegrees>=0?1:-1,decimalDegrees=Math.abs(decimalDegrees),degrees=Math.floor(decimalDegrees),minutes=Math.floor(60*(decimalDegrees-degrees)),seconds=3600*(decimalDegrees-degrees-minutes/60),[sign*degrees,minutes,seconds]},decimalDegreesToDm:function(decimalDegrees,minuteFractionDigits){var degrees,minutes,sign;return null==minuteFractionDigits&&(minuteFractionDigits=6),sign=decimalDegrees>=0?1:-1,decimalDegrees=Math.abs(decimalDegrees),degrees=Math.floor(decimalDegrees),minutes=1*(60*(decimalDegrees-degrees)).toFixed(minuteFractionDigits),60===minutes&&(degrees++,minutes=0),[sign*degrees,minutes]}}}),function(root,factory){factory(root.JNC,root.JNC._,root.JNC.ol,root.JNC.utils.Converter)}(this,function(JNC,_,ol,Converter){return JNC.utils.KmlDuplicator=function(){function KmlDuplicator(map,debounceDelay){var hash;null==debounceDelay&&(debounceDelay=500),_.bindAll(this,"_checkMap","_isFeatureOriginal","_isFeatureCopy"),this._map=map,this._debounceDelay=debounceDelay,this._layers=[],hash=_.now(),this._copyProperty="_kmlcopy_"+hash,this._originalProperty="_kmloriginal_"+hash,this._sphereNumberProperty="_spherenumber_"+hash,this._subscribeEvents()}return KmlDuplicator.prototype._debounceDelay=null,KmlDuplicator.prototype._layers=null,KmlDuplicator.prototype._map=null,KmlDuplicator.prototype._originalProperty=null,KmlDuplicator.prototype._copyProperty=null,KmlDuplicator.prototype._sphereNumberProperty=null,KmlDuplicator.prototype._subscribeEvents=function(){return this._map.getRowMap().on("postrender",_.debounce(this._checkMap,this._debounceDelay))},KmlDuplicator.prototype._checkMap=function(){var bounds,copyFrom,copyTo;return bounds=this._map.getBoundsArea(),copyFrom=this._getSphereNumber(bounds[0]),copyTo=this._getSphereNumber(bounds[2]),this._copyFeatures(copyFrom,copyTo)},KmlDuplicator.prototype.pushLayer=function(layer){var _this=this;return this._extendLayer(layer),_.each(layer.getSource().getFeatures(),function(feature){return _this._markOriginalFeature(feature)}),layer.getSource().on("addfeature",function(e){if(_this._isFeatureOriginal(e.feature))return _this._markOriginalFeature(e.feature)}),this._layers.push(layer)},KmlDuplicator.prototype.pushLayers=function(layers){var _this=this;return _.each(layers,function(layer){return _this.pushLayer(layer)})},KmlDuplicator.prototype._extendLayer=function(layer){var _this=this;return layer.getOriginalExtent=function(){var extents,features,geometry,hasCenterPolygons,hasNegativePolygons,hasPositiveFeatures,result;return result=ol.extent.createEmpty(),features=_.filter(layer.getSource().getFeatures(),_this._isFeatureOriginal),1===features.length?(geometry=features[0].getGeometry(),"MultiPolygon"===geometry.getType()?(extents=_.map(geometry.getPolygons(),function(polygon){return Converter.webMercatorExtentToStandard(polygon.getExtent())}),hasNegativePolygons=_.any(extents,function(extent){return extent[0]<=-180&&extent[2]<0}),hasPositiveFeatures=_.any(extents,function(extent){return extent[0]>=0&&extent[2]>=180}),hasCenterPolygons=_.any(extents,function(extent){return extent[0]<0&&extent[2]>0}),hasNegativePolygons&&hasPositiveFeatures&&!hasCenterPolygons&&_.each(extents,function(extent){if(extent[2]<0)return extent[0]+=360,extent[2]+=360}),_.each(extents,function(extent){return ol.extent.extend(result,extent)}),result=Converter.standardMercatorExtentToWeb(result)):result=geometry.getExtent()):_.each(features,function(feature){return ol.extent.extend(result,feature.getGeometry().getExtent())}),result}},KmlDuplicator.prototype._markOriginalFeature=function(feature){var center,extent,longLat;return extent=feature.getGeometry().getExtent(),center=ol.extent.getCenter(extent),longLat=Converter.webMercatorToStandard(center),feature[this._sphereNumberProperty]=this._getSphereNumber(longLat[0]),feature[this._originalProperty]=_.uniqueId("kml_duplicator_")},KmlDuplicator.prototype._copyFeatures=function(copyFrom,copyTo){var _this=this;return _.each(this._layers,function(layer){var copies,features,originalFeatures;return features=layer.getSource().getFeatures(),originalFeatures=_.filter(features,_this._isFeatureOriginal),copies=_.difference(features,originalFeatures),_.each(originalFeatures,function(originalFeature){var copy,existingFeatureCopy,sphereNumber,_i,_results;for(_results=[],sphereNumber=_i=copyFrom;copyFrom<=copyTo?_i<=copyTo:_i>=copyTo;sphereNumber=copyFrom<=copyTo?++_i:--_i)originalFeature[_this._sphereNumberProperty]!==sphereNumber?(existingFeatureCopy=_.find(copies,function(feature){return feature[_this._copyProperty]===originalFeature[_this._originalProperty]&&feature[_this._sphereNumberProperty]===sphereNumber}),null==existingFeatureCopy?(copy=_this._copyFeature(originalFeature,sphereNumber),_results.push(layer.getSource().addFeature(copy))):_results.push(void 0)):_results.push(void 0);return _results})})},KmlDuplicator.prototype._copyFeature=function(originalFeature,sphereNumber){var coordinates,feature;return feature=originalFeature.clone(),feature[this._copyProperty]=originalFeature[this._originalProperty],feature[this._sphereNumberProperty]=sphereNumber,coordinates=this._mapCoordinates(feature.getGeometry().getCoordinates(),sphereNumber),feature.getGeometry().setCoordinates(coordinates),feature},KmlDuplicator.prototype._mapCoordinates=function(array,sphereNumber){var _this=this;return this._isCoordinates(array)?this._calculateCoordinates(array,sphereNumber):_.map(array,function(item){return _this._mapCoordinates(item,sphereNumber)})},KmlDuplicator.prototype._isCoordinates=function(array){return _.isArray(array)&&_.all(array,_.isNumber)},KmlDuplicator.prototype._calculateCoordinates=function(coordinates,sphereNumber){var latitude,longLat,longitude,result,zIndex;return zIndex=coordinates[2],longLat=Converter.webMercatorToStandard(coordinates.splice(0,2)),longitude=longLat[0]%360+360*sphereNumber,latitude=longLat[1],result=Converter.standardMercatorToWeb([longitude,latitude]),result.push(zIndex),result},KmlDuplicator.prototype._getSphereNumber=function(latitude){return Math.floor((latitude+180)/360)},KmlDuplicator.prototype._isFeatureCopy=function(feature){return _.has(feature,this._copyProperty)},KmlDuplicator.prototype._isFeatureOriginal=function(feature){return!this._isFeatureCopy(feature)},KmlDuplicator}()});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC.$,root.JNC._,root.JNC.Backbone)}(this,function(JNC,$,_,Backbone){var _ref;return JNC.utils.HTMLInjector=function(_super){function HTMLInjector(){return _ref=HTMLInjector.__super__.constructor.apply(this,arguments)}return __extends(HTMLInjector,_super),HTMLInjector.prototype.defaults={targetTagId:"",url:null,jsUrl:null,cssUrl:null},HTMLInjector.prototype.initialize=function(options){return null==options&&(options={}),this.options=_.defaults(options,this.defaults),HTMLInjector.__super__.initialize.call(this,this.options)},HTMLInjector.prototype.render=function(){return this._loadHtml(),this._loadCssLink(this.options.cssUrl)},HTMLInjector.prototype._loadHtml=function(){var _this=this;return null!=this.options.targetTagId&&null!=this.options.url?$.ajax({url:this.options.url,crossDomain:!0,type:"GET",cache:!0,context:document.body,dataType:"html",xhrFields:{withCredentials:!0},success:function(data){return _this._applyHTML(data)}}):this.onHtmlLoaded()},HTMLInjector.prototype._applyHTML=function(html){return $("#"+this.options.targetTagId).html(html),this._appendScript(this.options.jsUrl),this._evalScripts(),$(window).trigger("resize"),this.onHtmlLoaded()},HTMLInjector.prototype._loadCssLink=function(cssUrl){if(null!=cssUrl)return $("head").append("<link rel='stylesheet' type='text/css' href='"+cssUrl+"'>")},HTMLInjector.prototype._appendScript=function(url){if(null!=url)return $("head").append("<script src='"+url+"'><\/script>")},HTMLInjector.prototype._evalScripts=function(){return $("#"+this.options.targetTagId).find("script").each(function(){return eval($(this).text())})},HTMLInjector.prototype.onHtmlLoaded=function(){},HTMLInjector}(Backbone.View)}),function(root,factory){factory(root.JNC,root.JNC.$,root.JNC._,root.JNC.ol)}(this,function(JNC,$,_,ol){return JNC.utils.MalChecker=function(){function MalChecker(navKey){this.navKey=navKey}var BACKEND_URL,DISABLED,DISTANCE_LIMIT,TIME_LIMIT,TIME_LIMIT_MIN;return TIME_LIMIT=1e3,TIME_LIMIT_MIN=10,DISTANCE_LIMIT=100,BACKEND_URL="//webapp.navionics.com",DISABLED=!0,MalChecker.prototype.trackActivity=function(previousCenter,currentCenter,zoom){var currentTimestamp,distance,line,timeDif;return null==this.timestamp&&(this.timestamp=(new Date).getTime()),null==this.lastZoom&&(this.lastZoom=zoom),line=new ol.geom.LineString([previousCenter,currentCenter]),distance=Math.round(100*line.getLength())/100/(16*(16-zoom)),currentTimestamp=(new Date).getTime(),timeDif=currentTimestamp-this.timestamp,timeDif<TIME_LIMIT&&timeDif>TIME_LIMIT_MIN&&distance>DISTANCE_LIMIT&&this.lastZoom===zoom&&this.sendMalApi(),this.timestamp=currentTimestamp,this.lastZoom=zoom},MalChecker.prototype.sendMalApi=function(){var referer;if(!DISABLED)return referer=encodeURIComponent(document.referrer.replace(/\./g,"&#46;")),null!=referer&&(referer="null"),$.get(BACKEND_URL+"/api/malchecker/"+this.navKey+"/"+referer,function(data){})},MalChecker}()}),function(root,factory){factory(root.JNC)}(this,function(JNC){return JNC.utils.CommonStorage=function(){function CommonStorage(){}return CommonStorage.set=function(name,value,expires,path,domain){null==expires&&(expires=""),null==path&&(path="/"),null==domain&&(domain="")},CommonStorage.get=function(name,defaultValue){null==defaultValue&&(defaultValue=null)},CommonStorage.has=function(name){},CommonStorage.remove=function(name,path,domain){null==path&&(path="/"),null==domain&&(domain="")},CommonStorage.clear=function(){},CommonStorage}()});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC._,root.JNC.utils.CommonStorage)}(this,function(JNC,_,CommonStorage){var _ref;return JNC.utils.LocalStorage=function(_super){function LocalStorage(){return _ref=LocalStorage.__super__.constructor.apply(this,arguments)}return __extends(LocalStorage,_super),LocalStorage.set=function(name,value,expires,path,domain){return null==expires&&(expires=""),null==path&&(path="/"),null==domain&&(domain=""),name=encodeURIComponent(name),(_.isObject(value)||_.isArray(value))&&(value=JSON.stringify(value)),null==expires.toUTCString&&(expires=new Date,expires.setTime(expires.getTime()+31536e6)),expires=expires.getTime(),localStorage.setItem(name,JSON.stringify({value:value,expires:expires}))},LocalStorage.get=function(name,defaultValue){var info;return null==defaultValue&&(defaultValue=null),info=localStorage.getItem(name),info?(info=JSON.parse(info),info.expires>Date.now()?JSON.parse(info.value):defaultValue):defaultValue},LocalStorage.has=function(name){return null!=JNC.utils.LocalStorage.get(name)},LocalStorage.remove=function(name,path,domain){if(null==path&&(path="/"),null==domain&&(domain=""),JNC.utils.LocalStorage.has(name))return window.localStorage.removeItem(name)},LocalStorage.clear=function(){return window.localStorage.clear()},LocalStorage}(CommonStorage)});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC._,root.JNC.utils.CommonStorage)}(this,function(JNC,_,CommonStorage){var _ref;return JNC.utils.CookieStorage=function(_super){function CookieStorage(){return _ref=CookieStorage.__super__.constructor.apply(this,arguments)}return __extends(CookieStorage,_super),CookieStorage.set=function(name,value,expires,path,domain){return null==expires&&(expires=""),null==path&&(path="/"),null==domain&&(domain=""),name=encodeURIComponent(name),(_.isObject(value)||_.isArray(value))&&(value=JSON.stringify(value)),null==expires.toUTCString&&(expires=new Date,expires.setTime(expires.getTime()+31536e6)),expires=expires.toUTCString(),expires.length&&(expires="expires="+expires+";"),domain.length&&(domain="domain="+domain+";"),path.length&&(path="path="+path+";"),document.cookie=name+"="+value+";"+expires+path+domain},CookieStorage.get=function(name,defaultValue){var c,ca,i,nameEQ,value;for(null==defaultValue&&(defaultValue=null),nameEQ=name+"=",ca=document.cookie.split(";"),i=0;i<ca.length;){for(c=ca[i];" "===c.charAt(0);)c=c.substring(1,c.length);if(0===c.indexOf(nameEQ))return value=c.substring(nameEQ.length,c.length),value=value||defaultValue;i++}return defaultValue},CookieStorage.has=function(name){return null!=JNC.utils.CookieStorage.get(name)},CookieStorage.remove=function(name,path,domain){if(null==path&&(path="/"),null==domain&&(domain=""),JNC.utils.CookieStorage.has(name))return JNC.utils.CookieStorage.set(name,"",new Date(0),path,domain)},CookieStorage}(CommonStorage)}),function(root,factory){factory(root.JNC,root.JNC.utils.LocalStorage,root.JNC.utils.CookieStorage)}(this,function(JNC,LocalStorage,CookieStorage){return JNC.utils.StorageFactory=function(){function StorageFactory(){}return StorageFactory.LOCAL_STORAGE="localStorage",StorageFactory.COOKIE_STORAGE="cookieStorage",StorageFactory.getStorage=function(storageType){if(null==storageType&&(storageType=StorageFactory.COOKIE_STORAGE),storageType===StorageFactory.LOCAL_STORAGE)return LocalStorage;if(storageType===StorageFactory.COOKIE_STORAGE)return CookieStorage;throw Error("Not Correct Storage selected")},StorageFactory.canUseStorage=function(storageType){var checkName,checkValues,storage;if(null==storageType&&(storageType=StorageFactory.COOKIE_STORAGE),storageType===StorageFactory.LOCAL_STORAGE)storage=LocalStorage;else{if(storageType!==StorageFactory.COOKIE_STORAGE)throw Error("Not Correct Storage selected");storage=CookieStorage}try{return checkName="test",checkValues={test:"test"},storage.set(checkName,checkValues),!!storage.has(checkName)&&(storage.remove(checkName),!0)}catch(_error){return _error,!1}},StorageFactory}()}),function(root,factory){factory(root.JNC,root.JNC._)}(this,function(JNC,_){return JNC.utils.GoogleAnalytics=function(){function GoogleAnalytics(){}var isTrackerLoaded;return isTrackerLoaded=!1,GoogleAnalytics._addGAonPage=function(){return function(i,s,o,g,r,a,m){i.GoogleAnalyticsObject=r,i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date,a=s.createElement(o),m=s.getElementsByTagName(o)[0],a.async=1,a.src=g,m.parentNode.insertBefore(a,m)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga")},GoogleAnalytics._createNavTracker=function(key){return window[window.GoogleAnalyticsObject]("create",key,"auto","navTracker"),window[window.GoogleAnalyticsObject]("navTracker.require","displayfeatures"),window[window.GoogleAnalyticsObject]("navTracker.require","linkid","linkid.js"),window[window.GoogleAnalyticsObject]("navTracker.linker:autoLink","pageview"),window[window.GoogleAnalyticsObject]("navTracker.send","pageview"),isTrackerLoaded=!0},GoogleAnalytics._isGACodeOnPage=function(){return null!=window[window.GoogleAnalyticsObject]},GoogleAnalytics._isTrackerLoaded=function(){return isTrackerLoaded},GoogleAnalytics.forceConfigure=function(options){return null==options&&(options={}),_.defaults(options,{gaKey:"UA-7614480-10"}),this._isGACodeOnPage()||this._addGAonPage(),this._createNavTracker(options.gaKey)},GoogleAnalytics.sendEvent=function(category,event,label){try{return this._isTrackerLoaded()||this.forceConfigure(),window[window.GoogleAnalyticsObject]("navTracker.send","event",category,event,label)}catch(_error){return void _error}},GoogleAnalytics.sendPageView=function(url){null==url&&(url=null);try{return this._isTrackerLoaded()||this.forceConfigure(),window[window.GoogleAnalyticsObject]("navTracker.send","pageview",url)}catch(_error){return void _error}},GoogleAnalytics}(),this});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC.$,root.JNC._,root.JNC.utils.HTMLInjector,root.JNC.utils.CookieStorage)}(this,function(JNC,$,_,HTMLInjector,CookieStorage){var _ref;return JNC.Views.PageElement=function(_super){function PageElement(){return _ref=PageElement.__super__.constructor.apply(this,arguments)}return __extends(PageElement,_super),PageElement.prototype.defaults={defaultLang:"en",cookieDomain:"navionics.com"},PageElement.prototype.languages={en:"English",it:"Italiano",fr:"Français",es:"Español",de:"Deutsch"},PageElement.prototype.initialize=function(options){var currentLanguage;return null==options&&(options={}),this.options=_.defaults(options,this.defaults),currentLanguage=this._detectLang(),this._setCurrentLang(currentLanguage),this.options.url=this.addParameterToURL(this.options.url,"lang",currentLanguage),PageElement.__super__.initialize.call(this,this.options)},PageElement.prototype._detectLang=function(){var browserLang,browserUrl,cookieLang;return browserUrl=this._browserUrl(),cookieLang=this._cookieLang(),browserLang=this._browserLang(),$("body").hasClass("i18n-it")?"it":$("body").hasClass("i18n-fr")?"fr":$("body").hasClass("i18n-es")?"es":$("body").hasClass("i18n-de")?"de":this.languages[browserUrl]?browserUrl:this.languages[cookieLang]?cookieLang:this.languages[browserLang]?browserLang:this.options.defaultLang},PageElement.prototype._browserUrl=function(){return this._getURLParameter("lang")},PageElement.prototype._cookieLang=function(){return CookieStorage.get("lang")},PageElement.prototype._browserLang=function(){return navigator.language?navigator.language.split("-")[0]:""},PageElement.prototype._getURLParameter=function(name){var regex,results;return name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),regex=new RegExp("[\\?&]"+name+"=([^&#]*)"),results=regex.exec(location.search),null===results?"":decodeURIComponent(results[1].replace(/\+/g," "))},PageElement.prototype._setCurrentLang=function(lang){return CookieStorage.set("lang",lang,"","/",this.options.cookieDomain),this.options.currentLang=lang},PageElement.prototype.getCurrentLang=function(){return CookieStorage.get("lang")},PageElement.prototype.addParameterToURL=function(url,parameterName,parameterValue,atStart){var cl,i,newQueryString,parameterParts,parameters,replaceDuplicates,sourceUrl,urlParts,urlhash;if(replaceDuplicates=!0,url.indexOf("#")>0?(cl=url.indexOf("#"),urlhash=url.substring(url.indexOf("#"),url.length)):(urlhash="",cl=url.length),sourceUrl=url.substring(0,cl),urlParts=sourceUrl.split("?"),newQueryString="",urlParts.length>1)for(parameters=urlParts[1].split("&"),i=0;i<parameters.length;)parameterParts=parameters[i].split("="),replaceDuplicates&&parameterParts[0]===parameterName||(""===newQueryString?newQueryString="?":newQueryString+="&",newQueryString+=parameterParts[0]+"="+(parameterParts[1]?parameterParts[1]:"")),i++;return""===newQueryString&&(newQueryString="?"),atStart?newQueryString="?"+parameterName+"="+parameterValue+(newQueryString.length>1?"&"+newQueryString.substring(1):""):(""!==newQueryString&&"?"!==newQueryString&&(newQueryString+="&"),newQueryString+=parameterName+"="+(parameterValue||"")),urlParts[0]+newQueryString+urlhash},PageElement}(HTMLInjector)});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},__indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++)if(i in this&&this[i]===item)return i;return-1};!function(root,factory){factory(root.JNC,root.JNC.$,root.JNC._,root.JNC.Views.PageElement)}(this,function(JNC,$,_,PageElement){var _ref;return JNC.Views.Header=function(_super){function Header(){return _ref=Header.__super__.constructor.apply(this,arguments)}var defaultOptions;return __extends(Header,_super),defaultOptions={url:"https://store-mirror.navionics.com/templates/header",targetTagId:"site-header"},Header.prototype.initialize=function(options){var _this=this;return null==options&&(options={}),this.options=_.defaults(options,defaultOptions),Header.__super__.initialize.call(this,this.options),_.bindAll(this,"_applyHeaderActions"),$(window).on("hashchange",function(){return _this._renderLang()})},Header.prototype.onHtmlLoaded=function(){return this._renderLang(),this._applyHeaderActions()},Header.prototype._renderLang=function(){var currentLang,hash,langHtml,path,queryString;return window.location.href.indexOf("#")>-1?(path=window.location.href.split("#")[0],hash=window.location.href.split("#")[1]):(path=window.location.href.split("?")[0],queryString=window.location.href.split("?")[1]),currentLang=this.getCurrentLang(),langHtml=this._getLangList(path,currentLang,hash,queryString),$(".jnc-page-lang .jnc-page-lang-current").html('<a href="'+this._getActualPath(path,currentLang,hash,queryString)+'" class="lang-'+currentLang+'" title="'+this.languages[currentLang]+'"></a>'),$(".jnc-page-lang .jnc-page-lang-sub").html(langHtml),$(".jnc-page-lang .jnc-page-lang-current a").on("click",function(e){return e.preventDefault(),$(".jnc-page-lang").toggleClass("is-active")})},Header.prototype._getLangList=function(path,currentLang,hash,queryString){var langHtml,language,selected;langHtml="";for(language in this.languages)language!==currentLang&&(selected=language===currentLang,langHtml+='<li><a href="'+this._getActualPath(path,language,hash,queryString)+'" class="lang-'+language+(selected?" selected":"")+'" title="'+this.languages[language]+'"></a></li>');return langHtml},Header.prototype._applyHeaderActions=function(){var $headCollapsable,host,path,webappHosts;if($headCollapsable=$(".jnc-head-collapsable"),$(".jnc-nav-toggle").on("click",function(){return $(this).hasClass("is-active")?($(this).removeClass("is-active"),$(this).attr("href",this.baseURI),$headCollapsable.removeClass("is-visible")):($(this).addClass("is-active"),$(this).removeAttr("href"),$headCollapsable.addClass("is-visible"))}),$(document).click(function(e){if($(e.target).closest(".jnc-view-btn-section").find(".jnc-button-parent-level").hasClass("is-active")||$(".jnc-button-parent-level").removeClass("is-active"),!$(e.target).closest(".jnc-page-lang").hasClass("is-active"))return $(".jnc-page-lang").removeClass("is-active")}),$(window).resize(function(){return $(".jnc-button-parent-level").removeClass("is-active"),$(".jnc-page-lang").removeClass("is-active")}),host=window.location.host,path=window.location.pathname.substr(4),webappHosts=["webapp.navionics.com","webapp-dev.navionics.com","webapp-alpha.navionics.com","webapp-beta.navionics.com","webapp-qa.navionics.com","webapp-test1.navionics.com","webapp-test2.navionics.com","dws-dev.navionics.com","dws-local.navionics.com","dws-local.navionics.com:8080"],__indexOf.call(webappHosts,host)>=0)return $("a#jnc-webapp").addClass("is-active");switch(path){case"marine-lakes-charts":return $("a#jnc-chartplotter").addClass("is-active");case"mobile-apps":return $("a#jnc-mobile").addClass("is-active")}},Header.prototype._getActualPath=function(path,language,hash,queryString){return null!=hash?this.addParameterToURL(path,"lang",language)+"#"+hash:(null!=queryString&&(path=path+"?"+queryString),this.addParameterToURL(path,"lang",language))},Header}(PageElement)});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,
child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC.$,root.JNC._,root.JNC.Views.PageElement,root.JNC.utils.CookieStorage)}(this,function(JNC,$,_,PageElement,CookieStorage){var _ref;return JNC.Views.Footer=function(_super){function Footer(){return _ref=Footer.__super__.constructor.apply(this,arguments)}var defaultOptions;return __extends(Footer,_super),defaultOptions={url:"https://www.navionics.com/sites/all/components/footer.php",lang:"en",targetTagId:"site-footer"},Footer.prototype.initialize=function(options){return null==options&&(options={}),this.options=_.defaults(options,defaultOptions),Footer.__super__.initialize.call(this,this.options)},Footer}(PageElement)}),function(root,factory){factory(root.JNC,root.JNC.$,root.JNC._,root.JNC.utils.GoogleAnalytics)}(this,function(JNC,$,_,GoogleAnalytics){return JNC.utils.NavionicsOverlayBuilder=function(){function NavionicsOverlayBuilder(options){null==options&&(options={}),_.defaults(options,{navKey:null,chartType:JNC.NAVIONICS_CHARTS.NAUTICAL,isTransparent:!0,depthUnit:JNC.DEPTH_UNIT.METERS,depthLevel:JNC.SAFETY_DEPTH_LEVEL.LEVEL1}),this.navKey=options.navKey,this.navToken=null,this.tileDomain=window.location.hostname,this._layer=this._getLayerTemplate(options.chartType,options.depthUnit,options.depthLevel),this._transparent=this._convertTransparencyToUpperString(options.isTransparent),GoogleAnalytics.sendPageView("navTracker.send","pageview")}var CONFIG,expandUrl;return CONFIG={TILE_SUFFIX:"/tile",KEY_REQ_SUFFIX:"/tile/get_key"},expandUrl=function(url){var charCode,i,match,startCharCode,stop,stopCharCode,urls;if(urls=[],match=/\{([a-z])-([a-z])\}/.exec(url)){for(startCharCode=match[1].charCodeAt(0),stopCharCode=match[2].charCodeAt(0),charCode=void 0,charCode=startCharCode;charCode<=stopCharCode;)urls.push(url.replace(match[0],String.fromCharCode(charCode))),++charCode;return urls}if(match=match=/\{(\d+)-(\d+)\}/.exec(url)){for(stop=parseInt(match[2],10),i=parseInt(match[1],10);i<=stop;)urls.push(url.replace(match[0],i.toString())),i++;return urls}return urls.push(url),urls},NavionicsOverlayBuilder.prototype.requestNavToken=function(callBack){var oneUrl,_this=this;return oneUrl=expandUrl("https://tile{1-5}.navionics.io"),$.ajax({url:oneUrl[0]+(CONFIG.KEY_REQ_SUFFIX+"/")+this.navKey+"/"+this.tileDomain,async:!0,crossDomain:!0,dataType:"text",cache:!1,error:function(){},success:function(data){var tileUrl;return _this.navToken=data,GoogleAnalytics.sendEvent("navTracker.send","event","LeafletMap","MapLoaded",_this.navKey),tileUrl="https://tile{1-5}.navionics.io"+CONFIG.TILE_SUFFIX+"/{z}/{x}/{y}?LAYERS="+_this._layer+"&TRANSPARENT="+_this._transparent+"&navtoken="+_this.navToken,callBack(tileUrl)}})},NavionicsOverlayBuilder.prototype._getLayerTemplate=function(type,depthUnit,depthLevel){switch(type){case JNC.NAVIONICS_CHARTS.SKI:return"config_1_0_0_1";default:return"config_"+this._convertDepthUnitToInt(depthUnit)+"_"+this._convertDepthLevelToInt(depthLevel)+"_"+this._convertTypeToInt(type)}},NavionicsOverlayBuilder.prototype._convertDepthUnitToInt=function(depthUnit){switch(depthUnit){case JNC.DEPTH_UNIT.FEET:return 2;case JNC.DEPTH_UNIT.FATHOMS:return 0;default:return 1}},NavionicsOverlayBuilder.prototype._convertDepthLevelToInt=function(depthLevel){return depthLevel.replace(/\D/g,"")},NavionicsOverlayBuilder.prototype._convertTypeToInt=function(type){switch(type){case JNC.NAVIONICS_CHARTS.SONARCHART:return 1;default:return 0}},NavionicsOverlayBuilder.prototype._convertTransparencyToUpperString=function(isTransparent){return(!!isTransparent).toString().toUpperCase()},NavionicsOverlayBuilder}()});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC._,root.JNC.Backbone)}(this,function(JNC,_,Backbone){var _ref;return JNC.Views.Analytics=function(_super){function Analytics(){return _ref=Analytics.__super__.constructor.apply(this,arguments)}return __extends(Analytics,_super),Analytics.prototype.initialize=function(options){return null==options&&(options={}),Analytics.__super__.initialize.apply(this,arguments),_.bindAll(this,"gaSendEvent","gaSendCustomPageView"),this},Analytics.prototype.gaSendEvent=function(category,event,label){if(null==category)throw"JNC.Views.Analytics#gaSendEvent: `category` is undefined.";if(null==event)throw"JNC.Views.Analytics#gaSendEvent: `event` is undefined.";if(null==label)throw"JNC.Views.Analytics#gaSendEvent: `label` is undefined.";return JNC.utils.GoogleAnalytics.sendEvent(category,event,label)},Analytics.prototype.gaSendCustomPageView=function(url){return JNC.utils.GoogleAnalytics.sendPageView(url)},Analytics}(Backbone.View)});var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},__indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++)if(i in this&&this[i]===item)return i;return-1};!function(root,factory){factory(root.JNC,root.JNC.$,root.JNC._,root.JNC.Backbone,root.JNC.Views.Analytics,root.JNC.utils.Formatter)}(this,function(JNC,$,_,Backbone,AnalyticsView,Formatter){var _ref;return JNC.Views.TranslatableView=function(_super){function TranslatableView(){return this.tr=__bind(this.tr,this),_ref=TranslatableView.__super__.constructor.apply(this,arguments)}return __extends(TranslatableView,_super),TranslatableView.prototype.templateSystemTime=JNC.TPL["translatable/system_time"],TranslatableView.prototype.templateSystemTimeInterval=JNC.TPL["translatable/system_time_interval"],TranslatableView.prototype.templateSystemMeasure=JNC.TPL["translatable/system_measure"],TranslatableView.prototype.templateStylizeNumber=JNC.TPL["translatable/stylize_number"],TranslatableView.prototype.initialize=function(options){return _.bindAll(this,"translate","t","formatLatitude","formatLongitude"),TranslatableView.__super__.initialize.apply(this,arguments)},TranslatableView.prototype.translate=function(key){return JNC.i18n.translate(key)},TranslatableView.prototype.t=function(key){return this.translate(key)},TranslatableView.prototype.getLocale=function(){return JNC.i18n.locale},TranslatableView.prototype.stylizeNumber=function(value){var context,decimal,int;return int=Math.floor(value),decimal=Math.round(10*value)%10,context={int:int,decimal:decimal,showDecimal:int<1e3},this.templateStylizeNumber(context)},TranslatableView.prototype.stylizeMeasure=function(measure,size){var context,value;return null==size&&(size=!1),value=isNaN(measure.value)?measure.value:this.stylizeNumber(measure.value),context={size:size,value:value,unit:this.translate("units."+measure.unit)},this.templateSystemMeasure(context)},TranslatableView.prototype.formatPrice=function(price,currency,short){return null==currency&&(currency="dollar"),null==short&&(short=!1),Formatter.formatPrice(price,currency,short)},TranslatableView.prototype.formatDepth=function(depth,formatUnit,dataUnit,isBig,zeroAcceptable){var formatResult;return null==formatUnit&&(formatUnit=null),null==dataUnit&&(dataUnit=null),null==isBig&&(isBig=!1),null==zeroAcceptable&&(zeroAcceptable=!0),formatResult=Formatter.formatDepth(depth,formatUnit,dataUnit,zeroAcceptable),this.stylizeMeasure(formatResult,isBig)},TranslatableView.prototype.formatTemperature=function(temperature,formatUnit,dataUnit,isBig){var formatResult;return null==formatUnit&&(formatUnit=null),null==dataUnit&&(dataUnit=null),null==isBig&&(isBig=!1),formatResult=Formatter.formatTemperature(temperature,formatUnit,dataUnit),this.stylizeMeasure(formatResult,isBig)},TranslatableView.prototype.formatDistance=function(distance,formatUnit,conversionNeeded,dataUnit,size){var formatResult;return null==formatUnit&&(formatUnit=null),null==conversionNeeded&&(conversionNeeded=!0),null==dataUnit&&(dataUnit=null),null==size&&(size=!1),conversionNeeded?formatResult=Formatter.formatDistance(distance,formatUnit,dataUnit):(distance=Math.round(10*distance)/10,formatResult={value:distance,unit:formatUnit}),this.stylizeMeasure(formatResult,size)},TranslatableView.prototype.formatSpeed=function(speed,formatUnit,dataUnit,isBig,zeroAcceptable){var formatResult;return null==formatUnit&&(formatUnit=null),null==dataUnit&&(dataUnit=null),null==isBig&&(isBig=!1),null==zeroAcceptable&&(zeroAcceptable=!1),formatResult=Formatter.formatSpeed(speed,formatUnit,dataUnit,zeroAcceptable),this.stylizeMeasure(formatResult,isBig)},TranslatableView.prototype.formatConsumption=function(consumption,formatUnit,dataUnit,isBig){var formatResult;return null==formatUnit&&(formatUnit=null),null==dataUnit&&(dataUnit=null),null==isBig&&(isBig=!1),formatResult=Formatter.formatConsumption(consumption,formatUnit,dataUnit),this.stylizeMeasure(formatResult,isBig)},TranslatableView.prototype.formatVolume=function(volume,formatUnit,dataUnit,isBig){var formatResult;return null==formatUnit&&(formatUnit=null),null==dataUnit&&(dataUnit=null),null==isBig&&(isBig=!1),formatResult=Formatter.formatVolume(volume,formatUnit,dataUnit),this.stylizeMeasure(formatResult,isBig)},TranslatableView.prototype.formatTime=function(date){var context;return context=Formatter.formatTime(date),context.minutes=Formatter.addLeadingZero(context.minutes),this.templateSystemTime(context)},TranslatableView.prototype.formatTimeInterval=function(time,timeLength){var context,formatResult;return null==timeLength&&(timeLength=2),formatResult=Formatter.formatTimeInterval(time),context={parts:[]},(formatResult.days>0||timeLength>3)&&context.parts.push({value:formatResult.days,unit:this.translate("units.datetime.days")}),(formatResult.hours>0||timeLength>2)&&context.parts.push({value:formatResult.days>0?Formatter.addLeadingZero(formatResult.hours):formatResult.hours,unit:this.translate("units.datetime.hours")}),context.parts.length<timeLength&&context.parts.push({value:formatResult.hours>0?Formatter.addLeadingZero(formatResult.minutes):formatResult.minutes,unit:this.translate("units.datetime.minutes")}),context.parts.length<timeLength&&context.parts.push({value:Formatter.addLeadingZero(formatResult.seconds),unit:this.translate("units.datetime.seconds")}),this.templateSystemTimeInterval(context)},TranslatableView.prototype.formatDate=function(date,isExtended){return null==isExtended&&(isExtended=!1),Formatter.formatDate(date,isExtended)},TranslatableView.prototype.formatCoordinates=function(coordinates){var lat,lng;return lng=coordinates[0],lat=coordinates[1],this.formatLatitude(lat)+" - "+this.formatLongitude(lng)},TranslatableView.prototype.formatLatitude=function(lat){var latHemisphere;return latHemisphere=lat>=0?this.translate("hemispheres.north"):this.translate("hemispheres.south"),this._formatCoordinatesNumber(lat,latHemisphere)},TranslatableView.prototype.formatLongitude=function(lng){var lngHemisphere;return lng=lng+180<0?-(Math.abs(lng+180)%360-180):(lng+180)%360-180,lngHemisphere=lng>=0?this.translate("hemispheres.east"):this.translate("hemispheres.west"),this._formatCoordinatesNumber(lng,lngHemisphere)},TranslatableView.prototype._formatCoordinatesNumber=function(coordinate,hemisphere,minutesRound){var degreeSign,degrees,minutes,minutesFromRemainder,minutesSign;return null==minutesRound&&(minutesRound=3),degrees=Math.abs(Math.floor(coordinate)),minutesFromRemainder=60*Math.abs(coordinate%1),minutes=minutesFromRemainder.toFixed(minutesRound),degreeSign=this.translate("units.degree"),minutesSign=this.translate("units.minutes"),""+degrees+degreeSign+" "+minutes+minutesSign+" "+hemisphere},TranslatableView.prototype.formatPrice=function(value){return null==value?"-.--":value=value.toString().substring(0,5)},TranslatableView.prototype.tr=function(key){return null!=this.dictionary&&null!=this.dictionary[key]?this.dictionary[key]:key},TranslatableView.prototype._initTranslations=function(){var _this=this;return $.ajax({url:this.dataBackendUrl+"/locale/messages."+this.locale+".json",dataType:"json",success:function(response){return _this.dictionary=response,JNC.setTranslationFunction(_this.tr),_this.trigger("translations:complete")}})},TranslatableView.prototype._isValidLang=function(lang){var validLangList;return validLangList=["en","de","fr","it","es"],__indexOf.call(validLangList,lang)>=0},TranslatableView}(AnalyticsView)});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC.$,root.JNC._,root.JNC.Views.TranslatableView)}(this,function(JNC,$,_,TranslatableView){var _ref;return JNC.Views.AsyncDataTranslatableView=function(_super){function AsyncDataTranslatableView(){return _ref=AsyncDataTranslatableView.__super__.constructor.apply(this,arguments)}return __extends(AsyncDataTranslatableView,_super),AsyncDataTranslatableView.prototype.templatePreloader=JNC.TPL["utils/preloader"],AsyncDataTranslatableView.prototype.ui={spinnerMarkerClass:"jnc-has-spinner",preloaderContainerSelector:".jnc-preloader-container"},AsyncDataTranslatableView.prototype.initialize=function(options){var _this=this;return null==options&&(options={}),AsyncDataTranslatableView.__super__.initialize.call(this,options),_.each([this.collection,this.model],function(asyncDataFetcher){if(asyncDataFetcher)return _this.listenTo(asyncDataFetcher,"request",_this.showSpinner),_this.listenTo(asyncDataFetcher,"sync",_this.hideSpinner),_this.listenTo(asyncDataFetcher,"error",_this.hideSpinner),_this.listenTo(asyncDataFetcher,"destroy",_this.hideSpinner)})},AsyncDataTranslatableView.prototype.showSpinner=function(){var $container;return $container=this.$(this.ui.preloaderContainerSelector),0===$container.length&&($container=this.$el),this.$preloader=$(this.templatePreloader()),$container.append(this.$preloader),this.$el.addClass(this.ui.spinnerMarkerClass)},AsyncDataTranslatableView.prototype.hideSpinner=function(){var _ref1;return null!=(_ref1=this.$preloader)&&_ref1.detach(),this.$el.removeClass(this.ui.spinnerMarkerClass)},AsyncDataTranslatableView}(TranslatableView)});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC.$,root.JNC._,root.JNC.Views.AsyncDataTranslatableView)}(this,function(JNC,$,_,AsyncDataTranslatableView){var _ref;return JNC.Views.BaseNavigableListView=function(_super){function BaseNavigableListView(){return _ref=BaseNavigableListView.__super__.constructor.apply(this,arguments)}return __extends(BaseNavigableListView,_super),BaseNavigableListView.prototype._mode=null,BaseNavigableListView.prototype._selectedItemsIds=[],BaseNavigableListView.prototype.MODE={VIEW:"VIEW",SELECT:"SELECT"},BaseNavigableListView.prototype.ui=_.extend({},BaseNavigableListView.__super__.ui,{delete_button:".jnc-navigable-items-delete-btn",select_input:".jnc-params-checkbox-input"}),BaseNavigableListView.prototype.events={"click .jnc-sorting-bar a":"onChangeOrder","click .jnc-archive-item-checkbox input":"_onCheckItemChanged","click .jnc-navigable-items-delete-btn":"_onDeleteItems","click .jnc-navigable-items-edit":function(){return this._changeMode(this.MODE.SELECT)},"click .jnc-navigable-items-cancel":function(){return this._changeMode(this.MODE.VIEW)}},BaseNavigableListView.prototype.initialize=function(options){return null==options&&(options={}),BaseNavigableListView.__super__.initialize.call(this,options),this._selectedItemsIds=[],_.bindAll(this,"_bindScroll","_unbindScroll"),this._listenToCollection(),this._mode=this.MODE.VIEW},BaseNavigableListView.prototype._listenToCollection=function(){var _this=this;return this.listenTo(this.collection,"bunch:loaded",function(succeed){if(succeed)return _this.render()}),this.listenTo(this.collection,"destroy",function(){return _this.render()})},BaseNavigableListView.prototype.render=function(){var $list,position;return position=this._unbindScroll(this.$(this.ui.list)),this.$el.html(this.template(this)),$list=this.$(this.ui.list),!this.collection.isFull()&&this.collection.length&&$list.height()>=$list.prop("scrollHeight")&&this.collection.nextBunch(),this._bindScroll($list,position),this._updateDeleteButtonState(),this},BaseNavigableListView.prototype.remove=function(){return this.$(this.ui.list).off("scroll"),BaseNavigableListView.__super__.remove.apply(this,arguments)},BaseNavigableListView.prototype.onChangeOrder=function(e){var $target,newOrder;if(e.preventDefault(),$target=$(e.currentTarget),(newOrder=$target.data("type"))!==this.collection.getSortKey())return this._selectedItemsIds=[],this.collection.sortByField(newOrder)},BaseNavigableListView.prototype._bindScroll=function($list,position){var _this=this;if(this.collection.getBunchesNumber()>1&&$list.scrollTop(position),!this.collection.isFull())return $list.on("scroll",function(){if($list.scrollTop()+$list.innerHeight()>=$list.prop("scrollHeight"))return _this.collection.nextBunch()})},BaseNavigableListView.prototype._unbindScroll=function($list){return $list.off("scroll"),$list.scrollTop()},BaseNavigableListView.prototype._changeMode=function(mode){if(this._mode!==mode)return this._mode=mode,this._mode===this.MODE.VIEW&&(this._selectedItemsIds=[]),this.render()},BaseNavigableListView.prototype._getMode=function(){return this.collection.isEditable()?this._mode:this._mode=this.MODE.VIEW},BaseNavigableListView.prototype._isDeleteAvailable=function(){return this.collection.isRemovable()},BaseNavigableListView.prototype._isItemChecked=function(item){return _.any(this._selectedItemsIds,function(id){return item.id==id})},BaseNavigableListView.prototype._onDeleteItems=function(e){var changeMode,count,itemsToDelete,processed,_this=this;if(this._selectedItemsIds.length)return itemsToDelete=this.collection.filter(function(item){return _this._isItemChecked(item)}),count=itemsToDelete.length,processed=0,changeMode=function(){if(processed++,count===processed)return _this._changeMode(_this.MODE.VIEW)},itemsToDelete.forEach(function(item){var id;return id=item.id,item.destroy({wait:!0,success:function(){return _this.gaSendEvent(JNC.GA_EVENT.CATEGORIES.ROUTING,JNC.GA_EVENT.ACTIONS.ROUTE_DELETE,JNC.GA_EVENT.LABELS.EMPTY_LABEL),_this._updateItemCheckedStatus(id,!1),changeMode()},error:function(){return alert("Well, This Is Embarrassing:  can't delete selected item, the server reject it"),changeMode()}})})},BaseNavigableListView.prototype._onCheckItemChanged=function(e){var $checkbox,id;return $checkbox=$(e.currentTarget),id=$checkbox.data("id"),this._updateItemCheckedStatus(id,$checkbox.is(":checked")),e.stopPropagation()},BaseNavigableListView.prototype._updateItemCheckedStatus=function(id,status){return status?this._selectedItemsIds.push(id):this._removeItemIdFromSelectionList(id),this._updateDeleteButtonState()},BaseNavigableListView.prototype._removeItemIdFromSelectionList=function(idToRemove){var index;if(index=-1,_.each(this._selectedItemsIds,function(id,i){if(idToRemove==id)return index=i}),-1!==index)return this._selectedItemsIds.splice(index,1)},BaseNavigableListView.prototype._updateDeleteButtonState=function(){var $button,hasItems,text;return $button=this.$(this.ui.delete_button),text=this.t("tracks.delete_tracks_template").replace("{count}",this._selectedItemsIds.length),$button.find("span").html(text),hasItems=this._selectedItemsIds.length>0,hasItems?$button.removeAttr("disabled"):$button.attr("disabled","disabled")},BaseNavigableListView}(AsyncDataTranslatableView)});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC.$,root.JNC._,root.JNC.Views.TranslatableView)}(this,function(JNC,$,_,TranslatableView){var _ref;return JNC.Views.ButtonsMenu=function(_super){function ButtonsMenu(){return _ref=ButtonsMenu.__super__.constructor.apply(this,arguments)}return __extends(ButtonsMenu,_super),ButtonsMenu.prototype.template=JNC.TPL["utils/buttons_menu"],ButtonsMenu.prototype.events={"click .jnc-view-btn":"onMainButtonClick","click .jnc-sub-btn":"onSecondaryButtonClick"},ButtonsMenu.prototype.defaults={autorender:!0,group:!1,groupsmall:!1,justify:!1,buttons:null},ButtonsMenu.prototype.buttonDefaults={id:null,text:null,link:"#",subitems:null,isDefault:!0,isDanger:!1,isSmall:!1,isLarge:!1,isActive:!1,isPrimary:!1,isDisabled:!1,isVisible:!0,isOpened:!1,isText:!1,callback:null,event:null,eventOptions:null,changeActiveState:!0},ButtonsMenu.prototype.initialize=function(options){if(null==options&&(options={}),ButtonsMenu.__super__.initialize.apply(this,arguments),this.options=this._updateConfig(options),this.options.autorender)return this.render()},ButtonsMenu.prototype.render=function(){return this.$el.html(this.template(this.options)),this},ButtonsMenu.prototype.update=function(config){return this.options=this._updateConfig(config),this.render()},ButtonsMenu.prototype.addButton=function(button){return this.options.buttons.push(this._extendButton(button)),this.render()},ButtonsMenu.prototype.removeButton=function(buttonId){var button,index;if(null!=(button=this.getButton(buttonId)))return index=_.indexOf(this.options.buttons,button),this.options.buttons.splice(index,1),this.render()},ButtonsMenu.prototype.getButton=function(id,parentId){var button,itemId;return null==parentId&&(parentId=null),itemId=null!=parentId?parentId:id,button=_.findWhere(this.options.buttons,{id:itemId}),null!=parentId&&(button=_.findWhere(button.subitems,{id:id})),button},ButtonsMenu.prototype.onMainButtonClick=function(e){var $target,button,id;return $target=$(e.currentTarget),id=$target.data("id"),button=this.getButton(id),button.link===this.buttonDefaults.link&&e.preventDefault(),this._handleButtonClick(id)},ButtonsMenu.prototype.onSecondaryButtonClick=function(e){var $target,button,id,parentId;return $target=$(e.currentTarget),id=$target.data("id"),parentId=$target.data("parentId"),button=this.getButton(id,parentId),button.link===this.buttonDefaults.link&&e.preventDefault(),this._handleButtonClick(id,parentId)},ButtonsMenu.prototype._handleButtonClick=function(id,parentId){var button,parentButton;if(null==parentId&&(parentId=null),null!=(button=this.getButton(id,parentId))&&!button.isDisabled)return button.changeActiveState&&(button.isActive=!button.isActive),null!=button.subitems&&(button.isOpened=!button.isOpened),null!=parentId&&(parentButton=this.getButton(parentId),parentButton.isOpened=!1,parentButton.isActive=!1),_.isFunction(button.callback)&&button.callback(button),null!=button.event&&JNC.Events.trigger(button.event,button.eventOptions),this.render()},ButtonsMenu.prototype._updateConfig=function(config){var result;return result=_.defaults(_.omit(config,"el","autorender"),this.defaults),result.buttons=_.map(config.buttons,this._extendButton,this),result},ButtonsMenu.prototype._extendButton=function(button){var _this=this;return _.defaults(button,{id:_.uniqueId("jnc_button_")},this.buttonDefaults),null!=button.subitems&&(button.subitems=_.map(button.subitems,function(subbutton){return _.defaults(subbutton,{id:_.uniqueId("jnc_button_")},_this.buttonDefaults)})),button},ButtonsMenu.prototype.setProperty=function(id,property,value){var button;return button=this.getButton(id),null!=button&&(button[property]=value),this.render()},ButtonsMenu}(TranslatableView),JNC.Views.ButtonsMenu});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC.$,root.JNC._,root.JNC.Backbone,root.JNC.Views.AsyncDataTranslatableView)}(this,function(JNC,$,_,Backbone,AsyncDataTranslatableView){var _ref;return JNC.Widgets.Dialog=function(_super){function Dialog(){return _ref=Dialog.__super__.constructor.apply(this,arguments)}return __extends(Dialog,_super),Dialog.prototype.el="body",Dialog.prototype.defaults={onHide:_.noop,onDiscard:_.noop},Dialog.prototype.initialize=function(options){return null==options&&(options={}),options=_.defaults(options,this.defaults),Dialog.__super__.initialize.apply(this,arguments),this.onHide=options.onHide,this.onDiscard=options.onDiscard},Dialog.prototype.hide=function(){if(_.isFunction(this.onHide))return this.onHide()},Dialog.prototype.discard=function(){if(this.hide(),_.isFunction(this.onDiscard))return this.onDiscard()},Dialog}(AsyncDataTranslatableView)});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC.$,root.JNC._,root.JNC.Backbone,root.JNC.Widgets.Dialog,root.JNC.Views.ButtonsMenu,root.JNC.utils.GeneralUtils)}(this,function(JNC,$,_,Backbone,Dialog,ButtonsMenu,GeneralUtils){var _ref;return JNC.Widgets.Alert=function(_super){function Alert(){return _ref=Alert.__super__.constructor.apply(this,arguments)}return __extends(Alert,_super),Alert.prototype.template=JNC.TPL["widgets/alert"],Alert.prototype.defaults={title:null,description:null,buttons:null,hideOnOverlayClick:!1,delay:0},Alert.prototype.debouncedShow=null,Alert.prototype.overlayClassName="jnc-alert-overlay",Alert.prototype.ui={btnsBlock:".jnc-alert-btns"},Alert.prototype.events=function(){var result;return result={},result["click ."+this.overlayClassName+"."+this.jncOverlayWithIdClass]="_onOverlayClick",result},Alert.prototype.initialize=function(options){return null==options&&(options={}),_.bindAll(this,"_onOverlayClick","_validateKeyboard","_validateBackButton"),this.options=_.defaults(options,this.defaults),Alert.__super__.initialize.call(this,this.options),this._debouncedShow=GeneralUtils.debounce(this.show,this.options.delay),this.jncOverlayWithIdClass="jnc-alert-"+this.cid},Alert.prototype.addOptions=function(options){return null==options&&(options={}),_.extend(this.options,options)},Alert.prototype.render=function(){var buttonsOptions;return buttonsOptions=[],_.each(this.options.buttons,function(value){return buttonsOptions.push(_.clone(value))}),this.$popup=$(this.template(this.getContext())),this.$el.append(this.$popup),this.buttonsView=new ButtonsMenu({autorender:!1,changeActiveState:!1,group:!0,justify:!0,buttons:buttonsOptions}),this.$popup.find(this.ui.btnsBlock).append(this.buttonsView.render().el),this},Alert.prototype.getContext=function(){return{translate:this.translate,title:this.options.title,description:this.options.description,jncOverlayWithIdClass:this.jncOverlayWithIdClass}},Alert.prototype.show=function(){if(!this.isVisible())return this.render(),this.delegateEvents(),this.trigger("show"),this.unbindKeys(!0),this._oldURL=window.location.hash.split("@")[0].replace(/\/?$/,"/"),this},Alert.prototype.hide=function(){if(this._debouncedShow.cancel(),this.isVisible())return this.unbindKeys(!1),this.$popup.remove(),this.undelegateEvents(),this.buttonsView.undelegateEvents(),this.buttonsView.remove(),this.trigger("hide"),Alert.__super__.hide.apply(this,arguments),this},Alert.prototype.showDelayed=function(){return this._debouncedShow()},Alert.prototype.unbindKeys=function(enable){return enable?(window.addEventListener("keydown",this._validateKeyboard,!0),window.addEventListener("keyup",this._preventKeyEvent,!0),window.addEventListener("hashchange",this._validateBackButton,!1)):(window.removeEventListener("keydown",this._validateKeyboard,!0),window.removeEventListener("keyup",this._preventKeyEvent,!0),window.removeEventListener("hashchange",this._validateBackButton,!1))},Alert.prototype._validateBackButton=function(e){if(this._oldURL!==window.location.hash.split("@")[0].replace(/\/?$/,"/"))return e.preventDefault(),e.stopPropagation(),window.history.forward(),this.hide()},Alert.prototype._preventKeyEvent=function(e){return e.preventDefault(),e.stopPropagation()},Alert.prototype._validateKeyboard=function(e){if(e.preventDefault(),e.stopPropagation(),("Enter"===e.code||13===e.keyCode)&&this.options.buttons)return _.debounce(this.buttonsView.options.buttons[0].callback,200)()},Alert.prototype.isVisible=function(){var _ref1;return null!=(_ref1=this.$popup)?_ref1.is(":visible"):void 0},Alert.prototype._onOverlayClick=function(e){if(!0===this.options.hideOnOverlayClick)return this.discard()},Alert}(Dialog)});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC.$,root.JNC._,root.JNC.Backbone,root.JNC.Widgets.Dialog,root.JNC.utils.GeneralUtils)}(this,function(JNC,$,_,Backbone,Dialog,GeneralUtils){var _ref;return JNC.Widgets.Popup=function(_super){function Popup(){return _ref=Popup.__super__.constructor.apply(this,arguments)}return __extends(Popup,_super),Popup.prototype.defaults={showOverlay:!0,closeOnOverlayClick:!0,html:null,position:"center-center",overlayClassName:"jnc-alert-overlay"},Popup.prototype.options={},Popup.prototype.events=function(){var result;return result={},this.options.showOverlay&&this.options.closeOnOverlayClick&&(result["click ."+this.options.overlayClassName+"."+this.jncOverlayWithIdClass]="onOverlayClick",GeneralUtils.isTouchSupported()&&(result["touchend ."+this.options.overlayClassName+"."+this.jncOverlayWithIdClass]="onOverlayClick")),result},Popup.prototype.initialize=function(options){if(null==options&&(options={}),_.bindAll(this,"onOverlayClick","_validateKeyboard","_validateBackButton"),this.options=_.defaults(options,this.defaults),Popup.__super__.initialize.call(this,this.options),this.jncOverlayWithIdClass="jnc-popup-"+this.cid,null==this.options.html)throw new Error("'html' is necessary parameter");if(this.$popup=$(this.options.html),this.options.showOverlay)return this.$overlay=$("<div class='"+this.options.overlayClassName+" "+this.jncOverlayWithIdClass+"'></div>")},Popup.prototype.render=function(){var _this=this;return this.options.showOverlay&&this.$popup.append(this.$overlay),this.$el.append(this.$popup),this.setPosition(),_.delay(function(){return _this.delegateEvents(),_this.unbindKeys(!0)},100),this},Popup.prototype.unbindKeys=function(enable){var _this=this;return enable?(window.addEventListener("keydown",this._validateKeyboard,!1),_.delay(function(){return window.addEventListener("hashchange",_this._validateBackButton,!1)},300)):(window.removeEventListener("keydown",this._validateKeyboard,!1),window.removeEventListener("hashchange",this._validateBackButton,!1))},Popup.prototype.repaint=function(element,html){return $(element).html(html),this.setPosition()},Popup.prototype.show=function(){return this.render(),this.delegateEvents(),this.trigger("show")},Popup.prototype.hide=function(){var _ref1;return null!=(_ref1=this.$overlay)&&_ref1.remove(),this.$popup.remove(),this.undelegateEvents(),this.trigger("hide"),
JNC.Events.trigger("available_on_mobile:hide"),this.unbindKeys(!1),Popup.__super__.hide.apply(this,arguments),this},Popup.prototype.setPosition=function(){var position;switch(position=this.options.position.split("-"),position[0]){case"center":this.$popup.addClass("jnc-popup-x-center");break;default:throw"Wrong horizontal position value <"+position[0]+">"}switch(position[1]){case"center":return this.$popup.addClass("jnc-popup-y-center");default:throw"Wrong vertical position value <"+position[1]+">"}},Popup.prototype.onOverlayClick=function(e){return e.preventDefault(),this.discard()},Popup.prototype.formatPrice=function(value){return null==value?"-.--":value=value.toString().substring(0,5)},Popup.prototype._validateKeyboard=function(e){return"Backspace"!==e.code&&8!==e.keyCode||this.hide(),e.preventDefault(),e.stopPropagation()},Popup.prototype._validateBackButton=function(e){var _ref1,_ref2,_ref3,_ref4;if(null==e.oldURL||(null!=(_ref1=e.newURL)?_ref1.split("@")[0]:void 0)!==(null!=(_ref2=e.oldURL)?_ref2.split("@")[0]:void 0))return e.preventDefault(),e.stopPropagation(),window.history.forward(),null!=(_ref3=this.options.navigation)&&_ref3.trigger("search:close"),null!=(_ref4=this.options.navigation)&&_ref4.trigger("slidingBarEvent:close"),this.hide()},Popup}(Dialog),_.extend(JNC.Widgets.Popup.prototype,Backbone.Events),JNC.Widgets.Popup});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC.$,root.JNC._,root.JNC.Backbone,root.JNC.Views.TranslatableView)}(this,function(JNC,$,_,Backbone,TranslatableView){var _ref;return JNC.Widgets.ClusterList=function(_super){function ClusterList(){return _ref=ClusterList.__super__.constructor.apply(this,arguments)}return __extends(ClusterList,_super),ClusterList.prototype.defaults={el:null,rows:[],displayLimit:100,cutItems:50,itemsToReload:20,itemHeight:30},ClusterList.prototype.ui={content:".jnc-cluster-list-content",extra:"jnc-cluster-list-extra"},ClusterList.prototype.template=JNC.TPL["widgets/ClusterList"],ClusterList.prototype.events={scroll:"onScroll"},ClusterList.prototype.initialize=function(options){return null==options&&(options={}),_.bindAll(this,"onScroll"),this.options=_.extend(this.defaults,options),this.setElement($(this.options.el)),this.contentEl=this.$(this.ui.content),this.rows=this.options.rows,this._scrollInProgress=!1,this.render(),this},ClusterList.prototype.render=function(){var html;if(0!==this.options.rows.length)return this.index=0,html=this.rows.slice(this.index,this.options.displayLimit).join(""),this.contentEl.html(html),this.rows.length>this.options.displayLimit&&this.initScroller(),this},ClusterList.prototype.initScroller=function(){return this.$el.scrollTop(0),this.scrollTop=0,this.scrollDirection=1,this.itemHeigth=this.contentEl.find(":first-child").eq(0).height(),this.contentHeight=this.itemHeigth*this.rows.length,this.displayedHeight=this.itemHeigth*this.options.displayLimit,this.maxIndex=this.rows.length-this.options.displayLimit,this.extraTop=0,this.extraBottom=this.contentHeight-this.displayedHeight,this.contentEl.prepend($('<div class="'+this.ui.extra+' top" style="height:0"></div>')),this.contentEl.append($('<div class="'+this.ui.extra+' bottom" style="height:'+this.extraBottom+'px;"></div>')),this.extraTopEl=this.$("."+this.ui.extra+".top"),this.extraBottomEl=this.$("."+this.ui.extra+".bottom"),this},ClusterList.prototype.onScroll=function(e){return this._scrollInProgress||this._processScroll(),this},ClusterList.prototype._processScroll=function(){var newScrollTop,runUpdate;return this._scrollInProgress=!0,newScrollTop=this.$el.scrollTop(),this.scrollDirection=newScrollTop-this.scrollTop>=0?1:-1,this.scrollTop=newScrollTop,runUpdate=!1,runUpdate=1===this.scrollDirection?this.scrollTop>this.extraTop+(this.options.itemsToReload+this.options.cutItems)*this.itemHeigth&&this.index<this.maxIndex:this.scrollTop<this.extraTop+this.options.itemsToReload*this.itemHeigth&&this.index>0,runUpdate&&this.update(),this._scrollInProgress=!1,this},ClusterList.prototype.update=function(){var html;return 1===this.scrollDirection?(this.extraTop=this.scrollTop-this.options.itemsToReload*this.itemHeigth,this.extraTop-=this.extraTop%this.itemHeigth,this.index=this.extraTop/this.itemHeigth,this.index>this.maxIndex&&(this.index=this.maxIndex,this.extraTop=this.contentHeight-this.displayedHeight)):(this.extraTop=this.scrollTop-(this.options.itemsToReload+this.options.cutItems)*this.itemHeigth,this.extraTop-=this.extraTop%this.itemHeigth,this.index=this.extraTop/this.itemHeigth,this.index<0&&(this.index=0,this.extraTop=0)),this.extraBottom=this.contentHeight-this.displayedHeight-this.extraTop,html='<div class="'+this.ui.extra+' top" style="height:'+this.extraTop+'px"></div>',html+=this.rows.slice(this.index,this.index+this.options.displayLimit).join(""),html+='<div class="'+this.ui.extra+' bottom" style="height:'+this.extraBottom+'px;"></div>',this.contentEl.html(html),this},ClusterList.prototype.updateRows=function(rows){return this.rows=rows,this.render()},ClusterList}(TranslatableView)});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC._,root.JNC.Backbone)}(this,function(JNC,_,Backbone){var _ref;return JNC.Widgets.Lake=function(_super){function Lake(){return _ref=Lake.__super__.constructor.apply(this,arguments)}return __extends(Lake,_super),Lake.prototype.defaults=function(){return{country_code:null,country_name:null,city:null,name:null,country:null,hd:null,new_flag:null}},Lake}(Backbone.Model)});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC.Backbone)}(this,function(JNC,Backbone){var _ref;return JNC.Widgets.LakesCollection=function(_super){function LakesCollection(){return _ref=LakesCollection.__super__.constructor.apply(this,arguments)}return __extends(LakesCollection,_super),LakesCollection.prototype.initialize=function(models,options){return null==options&&(options={}),this.urlTemplate=options.urlTemplate||"",LakesCollection.__super__.initialize.call(this,models,options)},LakesCollection.prototype.url=function(){return this.urlTemplate},LakesCollection.prototype.parse=function(response,options){if(response.lakes)return LakesCollection.__super__.parse.call(this,response.lakes,options)},LakesCollection}(Backbone.Collection)});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC._,root.JNC.Widgets.Popup,root.JNC.Widgets.LakesCollection,root.JNC.Widgets.Lake,root.JNC.Widgets.ClusterList)}(this,function(JNC,_,BasePopup,LakesCollection,Lake,ClusterList){var _ref;return JNC.Widgets.LakeListModal=function(_super){function LakeListModal(){return _ref=LakeListModal.__super__.constructor.apply(this,arguments)}return __extends(LakeListModal,_super),LakeListModal.prototype.template=JNC.TPL["widgets/modal_lake_list"],LakeListModal.prototype.contentTemplate=JNC.TPL["widgets/modal_lake_list_content"],LakeListModal.prototype.contentCaptionTemplate=JNC.TPL["widgets/modal_lake_list_content_caption"],LakeListModal.prototype.searchValue="",LakeListModal.prototype.csv="",LakeListModal.prototype.events=function(){return _.extend(LakeListModal.__super__.events.apply(this,arguments),{"click .jnc-close-button":"onClickCross","click .jnc-popup-close-button":"onClickCloseButton","change .jnc-lake-search":"onSearch","keyup .jnc-lake-search":"onSearch","focusin .jnc-lake-search":"onSearch","click .jnc-lake-search":"onSearch","click .jnc-popup-lakelist-export":"onExport","click .jnc-popup-lakelist-print":"onPrint"})},LakeListModal.prototype.initialize=function(options){return null==options&&(options={}),LakeListModal.__super__.initialize.call(this,{html:this._renderTemplate(options.data),showOverlay:!1}),this.listenTo(JNC.Events,"event:lakelistmodal:show",this.displayModal),this.listenTo(JNC.Events,"event:lakelistmodal:update",this.fillModal)},LakeListModal.prototype.displayModal=function(endpoint){return this.show(),this.showSpinner(),this.$el.addClass("lake-print"),this.collection=new LakesCollection(void 0,{urlTemplate:endpoint,model:Lake}),this.collection.fetch({success:function(model,response,options){return JNC.Events.trigger("event:lakelistmodal:update")},error:function(){}})},LakeListModal.prototype._renderTemplate=function(data){var context;return context=_.extend({},data||{},{translate:this.translate,showExportButtons:!1}),this.template(context)},LakeListModal.prototype._renderContent=function(data){var context;return context=_.extend({},data||{},{translate:this.translate}),this.contentTemplate(context)},LakeListModal.prototype.fillModal=function(results){var collection,collectionToShow,_this=this;return collection=results||this.collection.toJSON(),collectionToShow=_.groupBy(collection,function(ent){return ent.country_name}),this.rowList=[],_.each(collectionToShow,function(lakes,country){return _this.rowList.push({value:country,country:!1,markup:_this.contentCaptionTemplate({country:country}),active:!0}),_.each(lakes,function(lake){return _this.rowList.push({value:lake.name.toLowerCase(),country:country,markup:_this._renderContent(lake),active:!0})})}),this.rowList.length>0?this.clusterList=new ClusterList({rows:this.filterRowList(),el:".jnc-cluster-list-scroll"}):(this.$(".jnc-table-proloader").hide(),this.$(".no-results").show())},LakeListModal.prototype.filterRowList=function(){return _.pluck(_.filter(this.rowList,{active:!0}),"markup")},LakeListModal.prototype.onSearch=function(){var term,_this=this;if(term=this.$(".jnc-lake-search").val(),this.searchValue!==term&&(term.length>=2||""===term))return this.searchValue=term.toLowerCase(),_.each(this.rowList,function(item,index){return _this.rowList[index].active=!item.country||-1!==item.value.indexOf(_this.searchValue),_this}),_.each(this.rowList,function(item,index){if(!1===item.country)return _this.rowList[index].active=!_.isUndefined(_.findWhere(_this.rowList,{country:item.value,active:!0})),_this}),this.clusterList.updateRows(this.filterRowList())},LakeListModal.prototype.onExport=function(){},LakeListModal.prototype.createCsv=function(results){},LakeListModal.prototype.onPrint=function(){return window.print()},LakeListModal.prototype.emptyModal=function(){return this.$(".jnc-popup-table-content").html('<div class="jnc-table-proloader"><div class="jnc-preloader-container"></div></div>'),this.$(".jnc-lake-search").val(""),this.$(".no-results").hide(),this.$el.removeClass("lake-print"),this.hide()},LakeListModal.prototype.onClickCloseButton=function(e){return e.preventDefault(),this.emptyModal()},LakeListModal.prototype.onClickCross=function(e){return e.preventDefault(),this.emptyModal()},LakeListModal.prototype.unbindKeys=function(){return this},LakeListModal}(BasePopup)});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC.$,root.JNC._,root.JNC.Backbone,root.JNC.Views.TranslatableView,root.JNC.utils.GeneralUtils)}(this,function(JNC,$,_,Backbone,TranslatableView,GeneralUtils){var _ref;return JNC.Views.SlidingBar=function(_super){function SlidingBar(){return _ref=SlidingBar.__super__.constructor.apply(this,arguments)}var EVENTS;return __extends(SlidingBar,_super),SlidingBar.LEFT_CONTENT_CLASS="jnc-left-bar-content",SlidingBar.RIGHT_CONTENT_CLASS="jnc-right-content",EVENTS={FIRED_EVENT:"slidingBarEvent:resize",GA_SWITCH_STATE_CHANGE:"SwitchState"},SlidingBar.prototype.events=function(){var result;return result={},result["click ."+this.ui.divider_class]="_onSlidingBarClick",GeneralUtils.isTouchSupported()&&(result["click ."+this.ui.divider_class_touch]="_onSlidingBarClick"),result},SlidingBar.prototype.ui={container_class:"sliding-content-container",left_bar_class:"jnc-left-bar",left_view_class:SlidingBar.LEFT_CONTENT_CLASS,right_view_class:SlidingBar.RIGHT_CONTENT_CLASS,button_class:"jnc-sliding-bar-button",divider_class:"jnc-sliding-bar",divider_class_touch:"jnc-sliding-bar-touch",default_tag:"<div/>"},SlidingBar.prototype.defaults={showArrow:!0,autoResize:!0,leftContentMinWidth:0,navKey:null},SlidingBar.prototype.initialize=function(options){if(null==options&&(options={}),_.bindAll(this,"responsive"),this.options=_.pick(_.defaults(options,this.defaults),"showArrow","autoResize","leftContentMinWidth","navKey"),SlidingBar.__super__.initialize.apply(this,arguments),this.theContainer=this.$el.addClass(this.ui.container_class),this.theLeftBar=$(this.ui.default_tag).addClass(this.ui.left_bar_class),this.theLeftContent=$(this.ui.default_tag).addClass(this.ui.left_view_class),this.theRightContent=$(this.ui.default_tag).addClass(this.ui.right_view_class),this.theSlideBar=$(this.ui.default_tag).addClass(this.ui.divider_class),GeneralUtils.isTouchSupported()&&(this.theSlideBarTouch=$(this.ui.default_tag).addClass(this.ui.divider_class_touch)),this.theLeftView=this._processView(options.left_view),this.theRightView=this._processView(options.right_view),this.options.autoResize)return $(window).on("resize.slidingbar",this.responsive)},SlidingBar.prototype._processView=function(possibleView){var resultView;return resultView=possibleView,!possibleView||possibleView instanceof Backbone.View||(resultView=new(Backbone.View.extend({initialize:function(){return this.render()},render:function(){return possibleView instanceof $?this.$el.append(possibleView):this.$el.html(possibleView),this}}))),resultView},SlidingBar.prototype.render=function(force){return null==force&&(force=!1),this.theLeftBar.append(this.theLeftContent,this.theSlideBar),this.theContainer.append(this.theLeftBar,this.theRightContent),GeneralUtils.isTouchSupported()&&this.theSlideBar.append(this.theSlideBarTouch),this._embedContent(this.theLeftContent,this.theLeftView,force),this._embedContent(this.theRightContent,this.theRightView,force),this._ensureVisibility(),this.doResize(),this},SlidingBar.prototype.setViews=function(leftView,rightView,force){return null==force&&(force=!1),this.theLeftView=this._setView(this.theLeftContent,this.theLeftView,leftView,force),this.theRightView=this._setView(this.theRightContent,this.theRightView,rightView,force),this._ensureVisibility(),this.doResize(),this},SlidingBar.prototype.setLeftView=function(view,force){return null==force&&(force=!1),this.theLeftView=this._setView(this.theLeftContent,this.theLeftView,view,force),this._ensureVisibility(),this.doResize(),this},SlidingBar.prototype.setRightView=function(view,force){return null==force&&(force=!1),this.theRightView=this._setView(this.theRightContent,this.theRightView,view,force),this._ensureVisibility(),this.doResize(),this},SlidingBar.prototype.getLeftView=function(){return this.theLeftView},SlidingBar.prototype.getRightView=function(){return this.theRightView},SlidingBar.prototype.showButton=function(){return this.theSlideBar.addClass(this.ui.button_class)},SlidingBar.prototype.hideButton=function(){return this.theSlideBar.removeClass(this.ui.button_class)},SlidingBar.prototype._setView=function(currentContent,theCurrentView,view,force){return currentContent.children().detach(),view=this._processView(view),this._embedContent(currentContent,view,force),view},SlidingBar.prototype._embedContent=function(theContent,theView,force){if(null==force&&(force=!1),theView)return force&&theView.render(),theContent.append(theView.$el)},SlidingBar.prototype._onSlidingBarClick=function(e){var action;if(this.theSlideBar.hasClass(this.ui.button_class))return e.preventDefault(),action=this.isOpened()?"close":"open","close"===action?this.closeSlidingBar():this.openSlidingBar(),this.gaSendEvent("SlidingBar",EVENTS.GA_SWITCH_STATE_CHANGE+":"+action,this.options.navKey)},SlidingBar.prototype.responsiveOpen=function(){return this._isSpaceEnough()&&this.openSlidingBar(),this},SlidingBar.prototype._isSpaceEnough=function(){return this.theContainer.width()-this.theLeftContent.outerWidth()-this.theSlideBar.outerWidth()>=this.options.leftContentMinWidth},SlidingBar.prototype._ensureVisibility=function(){if(this.theLeftContent.show(),this.theSlideBar.show(),this.theRightContent.show(),this.theRightView||this.theRightContent.hide(),this.theLeftView||this.theLeftContent.hide(),this.theRightView&&this.theLeftView&&this.options.showArrow||this.theSlideBar.hide(),!this.theRightView||!this.theLeftView)return this.closeSlidingBar()},SlidingBar.prototype.responsive=function(){var notEnoughSpace;return notEnoughSpace=!this._isSpaceEnough(),this.isOpened()&&notEnoughSpace&&this.closeSlidingBar(),this.doResize()},SlidingBar.prototype.openSlidingBar=function(){if(this.theSlideBar.is(":visible"))return this.$el.addClass("open"),this.doResize(),this.trigger("open")},SlidingBar.prototype.closeSlidingBar=function(){return this.$el.removeClass("open"),this.doResize(),this.trigger("close")},SlidingBar.prototype.isOpened=function(){return this.$el.hasClass("open")},SlidingBar.prototype.toggle=function(){return this.isOpened()?this.closeSlidingBar():this.openSlidingBar()},SlidingBar.prototype.doResize=function(){var rightAdjustedWith;return rightAdjustedWith=this.isOpened()?this.theContainer.width()-this.theLeftContent.outerWidth()-this.theSlideBar.outerWidth():this.theContainer.width()-this.theSlideBar.outerWidth(),this.theRightContent.width(rightAdjustedWith),JNC.Events.trigger("slidingBarEvent:resize",this),this},SlidingBar}(TranslatableView)});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC.$,root.JNC._,root.JNC.Backbone,root.JNC.utils.GeneralUtils,root.JNC.Widgets.Alert,root.JNC.Views.AsyncDataTranslatableView)}(this,function(JNC,$,_,Backbone,GeneralUtils,Alert,AsyncDataTranslatableView){var _ref;return JNC.Views.BoatSettingsAlert=function(_super){function BoatSettingsAlert(){return _ref=BoatSettingsAlert.__super__.constructor.apply(this,arguments)}return __extends(BoatSettingsAlert,_super),BoatSettingsAlert.prototype.alert=null,BoatSettingsAlert.prototype.initialize=function(options){return null==options&&(options={}),this.model=options.model,this.changeCallback=null!=options?options.changeCallback:void 0,this.render()},BoatSettingsAlert.prototype.render=function(){var _this=this;return this.alert=new Alert,this.alert.addOptions({title:this.translate("boat_settings.title"),description:this.translate("boat_settings.warning_message").replace("{value}",GeneralUtils.round(this.model.get("value"),1)),buttons:[{text:this.translate("buttons.keep"),isPrimary:!0,callback:function(){return _this.alert.hide()}},{text:this.translate("buttons.change"),callback:function(){return _this.alert.hide(),"function"==typeof _this.changeCallback?_this.changeCallback():void 0}}]})},BoatSettingsAlert.prototype.show=function(){var _ref1;return null!=(_ref1=this.alert)?_ref1.show():void 0},BoatSettingsAlert.prototype.destroy=function(){var _ref1;return null!=(_ref1=this.alert)&&_ref1.hide(),this.alert=null},BoatSettingsAlert}(AsyncDataTranslatableView)});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC.$,root.JNC._,root.JNC.Backbone,root.JNC.ol,root.JNC.Views.TranslatableView,root.JNC.utils.GeoTools,root.JNC.utils.GeneralUtils,root.JNC.utils.Converter)}(this,function(JNC,$,_,Backbone,ol,TranslatableView,GeoTools,GeneralUtils,Converter){var _ref;return JNC.Views.ScaleLine=function(_super){function ScaleLine(){return _ref=ScaleLine.__super__.constructor.apply(this,arguments)}return __extends(ScaleLine,_super),ScaleLine.prototype.className="ol-scale-line",ScaleLine.prototype.initialize=function(options){return null==options&&(options={}),ScaleLine.__super__.initialize.apply(this,arguments),_.bindAll(this,"render"),this.model=new Backbone.Model({width:options.width||100,units:options.units||JNC.DISTANCE_UNIT.NAUTICAL}),this.setElement($("<div />").addClass(this.className+" ol-unselectable")),this.$innerElement=$("<div />").addClass(this.className+"-inner").appendTo(this.$el),this.$digits=$("<div />").addClass(this.className+"-digits").appendTo(this.$innerElement),this.$units=$("<div />").addClass(this.className+"-units").appendTo(this.$innerElement),this.setMap(options.map),this.listenTo(this.model,"change",this.render)},ScaleLine.prototype.setVisible=function(isVisible){return null==isVisible&&(isVisible=!0),this.$el.toggle(isVisible)},ScaleLine.prototype.setMap=function(map){var _ref1,_ref2;return null!=this._postrenderEventKey&&null!=(_ref1=this._map)&&_ref1.getRowMap().unByKey(this._postrenderEventKey),this._map=map,this._postrenderEventKey=null!=(_ref2=this._map)?_ref2.getRowMap().on("postrender",this.render):void 0},ScaleLine.prototype.getMap=function(){return this._map},ScaleLine.prototype.getUnits=function(){return this.model.get("units")},ScaleLine.prototype.setUnits=function(units){return this.model.set("units",units)},ScaleLine.prototype.getWidth=function(){return this.model.get("width")},ScaleLine.prototype.setWidth=function(width){return this.model.set("width",width)},ScaleLine.prototype.render=function(){var $container,distance,distanceData,endCoords,endPoint,position,startCoords,startPoint,_ref1;if(!(($container=null!=(_ref1=this._map)?_ref1.$el.find(".ol-overlaycontainer-stopevent"):void 0)&&0===$container.length||null==this._map)&&($container.append(this.$el),this.$innerElement.css("width",this.getWidth()),position=this.$el.position(),startCoords=this._map.getCoordinateFromPixel([position.left,position.top]),endCoords=this._map.getCoordinateFromPixel([position.left+this.getWidth(),position.top]),null!=startCoords||null!=endCoords))return startPoint=Converter.webMercatorToStandard(startCoords),endPoint=Converter.webMercatorToStandard(endCoords),distance=GeoTools.calculateVincentyDistance(startPoint,endPoint),distanceData=this.formatDistance(distance),this.$digits.html(distanceData.count),this.$units.html(distanceData.units)},ScaleLine.prototype.formatDistance=function(distance){var units,value;switch(this.getUnits()){case JNC.DISTANCE_UNIT.KILOMETERS:distance<100?(units=this.translate("units.meters"),value=distance):(units=this.translate("units.kilometers"),value=Converter.distance(distance,JNC.DISTANCE_UNIT.METERS,JNC.DISTANCE_UNIT.KILOMETERS));break;case JNC.DISTANCE_UNIT.NAUTICAL:distance<185.2?(units=this.translate("units.feet"),value=Converter.distance(distance,JNC.DISTANCE_UNIT.METERS,JNC.DISTANCE_UNIT.FEET)):(units=this.translate("units.nautical"),value=Converter.distance(distance,JNC.DISTANCE_UNIT.METERS,JNC.DISTANCE_UNIT.NAUTICAL));break;case JNC.DISTANCE_UNIT.MILES:distance<161?(units=this.translate("units.feet"),value=Converter.distance(distance,JNC.DISTANCE_UNIT.METERS,JNC.DISTANCE_UNIT.FEET)):(units=this.translate("units.miles"),value=Converter.distance(distance,JNC.DISTANCE_UNIT.METERS,JNC.DISTANCE_UNIT.MILES))}return value=value>=100?GeneralUtils.round(value,0):value>=1?GeneralUtils.round(value,2):GeneralUtils.round(value,3),{count:value,units:units}},ScaleLine}(TranslatableView)});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC.$,root.JNC._,root.JNC.ol,root.JNC.Views.TranslatableView,root.JNC.utils.GeoTools,root.JNC.utils.Converter)}(this,function(JNC,$,_,ol,TranslatableView,GeoTools,Converter){var _ref;return JNC.Views.DistanceRuler=function(_super){function DistanceRuler(){return _ref=DistanceRuler.__super__.constructor.apply(this,arguments)}var EVENTS,gaEvent;return __extends(DistanceRuler,_super),EVENTS={GA_MAP_DISTANCE_RULER_SWITCHED:"DistanceRulerSwitched"},DistanceRuler.prototype.className="distance-control-container",DistanceRuler.prototype.template=JNC.TPL["map/distance_ruler"],DistanceRuler.prototype.popupTemplate=JNC.TPL["map/distance_ruler_popup"],gaEvent=!1,DistanceRuler.prototype.events={"click .distance-ruler":"clickOnButton"},DistanceRuler.prototype.initialize=function(options){if(DistanceRuler.__super__.initialize.apply(this,arguments),_.bindAll(this,"handler","_pinHoverCheck","_reorderLayers"),this._map=options.map,this.navKey=options.navKey,this._distanceUnit=options.units||JNC.DISTANCE_UNIT.KILOMETERS,this._initDistanceRulerView(),this._overlay=this.ruler.popup,this._source=new ol.source.Vector({projection:this._map.getProjection()}),this._layer=new ol.layer.Vector({source:this._source}),options.autorender)return this.render()},DistanceRuler.prototype.getDefaultCoordinates=function(){var height,width;return width=this._map.getViewportWidth(),height=this._map.getViewportHeight(),{start:this._map.getCoordinateFromPixel([.8*width,.5*height]),end:this._map.getCoordinateFromPixel([.5*width,.5*height])}},DistanceRuler.prototype.render=function(){return this.$el.html(this.template()),this.redraw(),this},DistanceRuler.prototype.toggle=function(show){return null==show&&(show=!0),show?this.show():this.hide()},DistanceRuler.prototype.show=function(){var map;return this.$el.show(),map=this._map.getRowMap(),map.addOverlay(this._overlay),map.addLayer(this._layer),this._listenLayersOrder()},DistanceRuler.prototype.hide=function(){var map;return this.$el.hide(),this._stopListenLayersOrder(),map=this._map.getRowMap(),map.removeOverlay(this._overlay),map.removeLayer(this._layer)},DistanceRuler.prototype._listenLayersOrder=function(){if(null==this._layersChangeKey)return this._layersChangeKey=this._map.getRowMap().getLayers().on("change:length",this._reorderLayers)},DistanceRuler.prototype._stopListenLayersOrder=function(){if(null!=this._layersChangeKey)return this._map.getRowMap().getLayers().unByKey(this._layersChangeKey),this._layersChangeKey=null},DistanceRuler.prototype._reorderLayers=function(){var map;return this._stopListenLayersOrder(),map=this._map.getRowMap(),map.removeLayer(this._layer),map.addLayer(this._layer),this._listenLayersOrder()},DistanceRuler.prototype.clickOnButton=function(e){var isVisible;return isVisible=this.isActiveTheButton(),this.setVisibleTheMeasureLine(!isVisible),this.gaSendEvent("Map",EVENTS.GA_MAP_DISTANCE_RULER_SWITCHED+":"+(isVisible?"off":"on"),this.navKey),isVisible?this._map.$el.off("mousemove",this._pinHoverCheck):this._map.$el.on("mousemove",this._pinHoverCheck)},DistanceRuler.prototype.handler=function(f,e){if(null!=e&&"CANVAS"===e.originalEvent.target.tagName)switch(e.type){case"pointerdown":return this.onPointerDown(f,e);case"pointermove":return this.onPointerMove(f,e);case"pointerup":return this.onPointerUp(f,e)}},DistanceRuler.prototype.redraw=function(){var distanceUnit,distanceValue,end,endPoint,htmlBearingValue,htmlDistanceValue,start,startPoint;return this.validate(),start=this.ruler.start.geometry.getCoordinates(),end=this.ruler.end.geometry.getCoordinates(),startPoint=Converter.webMercatorToStandard(start),endPoint=Converter.webMercatorToStandard(end),distanceValue=GeoTools.calculateVincentyDistance(startPoint,endPoint),distanceUnit=this.getDistanceUnit(),htmlDistanceValue=this.formatDistance(distanceValue,distanceUnit),htmlBearingValue=GeoTools.returnBearing(end,start),this.ruler.line.geometry.setCoordinates([start,end]),this.ruler.popup.setPosition(start),this.ruler.distanceDiv.html(htmlDistanceValue),this.ruler.bearingDiv.html(htmlBearingValue)},DistanceRuler.prototype.validate=function(){var distanceInDegrees,end,shift,start;if(distanceInDegrees=this._distanceInDegrees(),distanceInDegrees[0]>180)return start=this.ruler.start.geometry.getCoordinates(),end=this.ruler.end.geometry.getCoordinates(),shift=start[0]>end[0]?1:-1,this.shiftPoint(this.ruler.end.geometry,shift)},DistanceRuler.prototype.shiftPoint=function(point,numberOfSpheres){var coords,isNegative,latitude,latlong,miltiply,newCoords,newLatitude,newLatlong,sign;return null==numberOfSpheres&&(numberOfSpheres=1),coords=point.getCoordinates(),latlong=Converter.webMercatorToStandard(coords),isNegative=coords[0]<0,sign=isNegative?-1:1,miltiply=Math.floor(Math.abs(latlong[0]/360)),latitude=latlong[0]%360,newLatitude=latitude+360*miltiply*sign+360*numberOfSpheres,newLatlong=[newLatitude,latlong[1]],newCoords=Converter.standardMercatorToWeb(newLatlong),point.setCoordinates(newCoords)},DistanceRuler.prototype.onPointerDown=function(f,e){var currPos,newPos,startPosition;return currPos=f.getGeometry().getCoordinates(),this.offset=[e.coordinate[0]-currPos[0],e.coordinate[1]-currPos[1]],newPos=[e.coordinate[0]-this.offset[0],e.coordinate[1]-this.offset[1]],f===this.ruler.end.feature&&(startPosition=this.ruler.start.geometry.getCoordinates(),this.ruler.end.geometry.setCoordinates(startPosition),this.ruler.start.geometry.setCoordinates(newPos)),this.redraw()},DistanceRuler.prototype.onPointerMove=function(f,e){var newPos;return newPos=[e.coordinate[0]-this.offset[0],e.coordinate[1]-this.offset[1]],this.ruler.start.geometry.setCoordinates(newPos),this.redraw()},DistanceRuler.prototype.onPointerUp=function(f,e){return this.redraw()},DistanceRuler.prototype.setVisibleTheMeasureLine=function(isVisible){var coordinates;return null==isVisible&&(isVisible=!1),isVisible?(this._map.hideBalloons(),coordinates=this.getDefaultCoordinates(),this.ruler.start.geometry.setCoordinates(coordinates.end),this.ruler.end.geometry.setCoordinates(coordinates.start),this.redraw(),this.$popup.show(),this.$(".distance-ruler").attr("visible",!0),this._source.addFeature(this.ruler.start.feature),this._source.addFeature(this.ruler.end.feature),this._source.addFeature(this.ruler.line.feature)):(this.$popup.hide(),this.$(".distance-ruler").removeAttr("visible"),this.stopListening(),this._source.removeFeature(this.ruler.start.feature),this._source.removeFeature(this.ruler.end.feature),this._source.removeFeature(this.ruler.line.feature))},DistanceRuler.prototype.isActiveTheButton=function(){return this.$(".distance-ruler").length&&this.$(".distance-ruler").is("[visible]")},DistanceRuler.prototype.setDistanceUnit=function(units,redraw){if(null==redraw&&(redraw=!1),!this._isValidDistanceUnits(units))throw new Error("<"+units+"> is not valid");if(this._distanceUnit=units,redraw)return this.redraw()},DistanceRuler.prototype._isValidDistanceUnits=function(units){return _.contains(_.values(JNC.DISTANCE_UNIT),units)},DistanceRuler.prototype.getDistanceUnit=function(){return this._distanceUnit},DistanceRuler.prototype._initDistanceRulerView=function(){var context,coordinates,endGeometry,lineGeometry,startGeometry
;if(null==this.ruler)return context={translate:this.translate},this.$popup=$(this.popupTemplate(context)),coordinates={start:[0,0],end:[0,0]},startGeometry=new ol.geom.Point(coordinates.start),endGeometry=new ol.geom.Point(coordinates.end),lineGeometry=new ol.geom.LineString([coordinates.start,coordinates.end]),this.ruler={start:{geometry:startGeometry,feature:new ol.Feature({geometry:startGeometry,handler:this.handler})},end:{geometry:endGeometry,feature:new ol.Feature({geometry:endGeometry,handler:this.handler})},line:{geometry:lineGeometry,feature:new ol.Feature({geometry:lineGeometry})},popup:new ol.Overlay({element:this.$popup.get(0)}),distanceDiv:this.$popup.find(".distance"),bearingDiv:this.$popup.find(".bearing")},this.ruler.start.feature.setStyle(this._getStartIconStyle()),this.ruler.end.feature.setStyle(this._getEndIconStyle()),this.ruler.line.feature.setStyle(this._getLineStyle())},DistanceRuler.prototype._getStartIconStyle=function(){return new ol.style.Style({image:new ol.style.Icon({anchor:[.5,35],anchorXUnits:"fraction",anchorYUnits:"pixels",src:JNC.getContext("/map/pin.png")}),zIndex:1})},DistanceRuler.prototype._getEndIconStyle=function(){return new ol.style.Style({image:new ol.style.Icon({anchor:[.5,35],anchorXUnits:"fraction",anchorYUnits:"pixels",src:JNC.getContext("/map/pinattach.png")}),zIndex:1})},DistanceRuler.prototype._getLineStyle=function(){return new ol.style.Style({stroke:new ol.style.Stroke({color:"#000",width:3})})},DistanceRuler.prototype._pinHoverCheck=function(evt){var hover,map,ownFeatures;return hover=!1,map=this._map.getRowMap(),ownFeatures=[this.ruler.start.feature,this.ruler.end.feature],map.forEachFeatureAtPixel(map.getEventPixel(evt.originalEvent),function(feature){return hover=_.any(ownFeatures,function(f){return f===feature})}),this._map.$el.toggleClass("canvas-hover",hover)},DistanceRuler.prototype._distanceInDegrees=function(){var end,endPoint,lat,long,start,startPoint;return start=this.ruler.start.geometry.getCoordinates(),end=this.ruler.end.geometry.getCoordinates(),startPoint=Converter.webMercatorToStandard(start),endPoint=Converter.webMercatorToStandard(end),lat=this._calculateDistanceInDegrees(startPoint[0],endPoint[0]),long=this._calculateDistanceInDegrees(startPoint[1],endPoint[1]),[lat,long]},DistanceRuler.prototype._calculateDistanceInDegrees=function(point1,point2){return point1>0&&point2>0?Math.abs(point1-point2):point1<0&&point2<0?Math.abs(point1-point2):Math.abs(point1)+Math.abs(point2)},DistanceRuler.prototype.formatDistance=function(distance,units){var distanceValue,feet,km,mi,nm,unitsValue;switch(!isNaN(parseFloat(distance))&&isFinite(distance)||(distance=0),units){case JNC.DISTANCE_UNIT.KILOMETERS:km=Converter.distance(distance,JNC.DISTANCE_UNIT.METERS,JNC.DISTANCE_UNIT.KILOMETERS),unitsValue=this.translate("units.kilometers"),km>185.2?distanceValue=km.toFixed(0):distance>370.4?distanceValue=km.toFixed(2):(distanceValue=distance,unitsValue=this.translate("units.meters"));break;case JNC.DISTANCE_UNIT.NAUTICAL:nm=Converter.distance(distance,JNC.DISTANCE_UNIT.METERS,JNC.DISTANCE_UNIT.NAUTICAL),unitsValue=this.translate("units.nautical"),distanceValue=nm>100?nm.toFixed(0):nm>.2?nm.toFixed(2):nm.toFixed(3);break;case JNC.DISTANCE_UNIT.MILES:mi=Converter.distance(distance,JNC.DISTANCE_UNIT.METERS,JNC.DISTANCE_UNIT.MILES),unitsValue=this.translate("units.miles"),mi>100?distanceValue=mi.toFixed(0):mi>.2?distanceValue=mi.toFixed(2):(feet=Converter.distance(distance,JNC.DISTANCE_UNIT.METERS,JNC.DISTANCE_UNIT.FEET),distanceValue=feet.toFixed(0),unitsValue=this.translate("units.feet"))}return distanceValue+" "+unitsValue},DistanceRuler.prototype.addDistanceRuler=function(){return null!=this.$(".distance-ruler").attr("visible")&&(gaEvent=!0,this.$(".distance-ruler").attr("visible",!1),this.setVisibleTheMeasureLine(!1),this._map.$el.off("mousemove",this._pinHoverCheck)),this.clickOnDistanceIcon()},DistanceRuler.prototype.clickOnDistanceIcon=function(){return this.$(".distance-ruler").attr("visible",!0),this.setVisibleTheMeasureLine(!0),!0==!gaEvent&&this.gaSendEvent("Map",EVENTS.GA_MAP_DISTANCE_RULER_SWITCHED+":on",this.navKey),this._map.$el.on("mousemove",this._pinHoverCheck)},DistanceRuler}(TranslatableView)});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC.$,root.JNC._,root.JNC.Backbone,root.JNC.ol,root.JNC.Views.TranslatableView)}(this,function(JNC,$,_,Backbone,ol,TranslatableView){var _ref;return JNC.Views.UnitSwitcher=function(_super){function UnitSwitcher(){return _ref=UnitSwitcher.__super__.constructor.apply(this,arguments)}return __extends(UnitSwitcher,_super),UnitSwitcher.prototype.template=JNC.TPL["map/unit_switcher"],UnitSwitcher.prototype.ui={sectionClassName:"unit-section",activeClassName:"selected"},UnitSwitcher.prototype.events={"click .unit-button":"onItemClick"},UnitSwitcher.prototype._title=null,UnitSwitcher.prototype._items=null,UnitSwitcher.prototype.initialize=function(options){if(null==options&&(options={}),UnitSwitcher.__super__.initialize.apply(this,arguments),this._title=options.title,this._items=options.items,options.autorender&&this.render(),null!=options.selected)return this.updateSelected(options.selected)},UnitSwitcher.prototype.render=function(){var context;return context={title:this._title,items:this._items},this.$el.addClass(this.ui.sectionClassName),this.$el.html(this.template(context)),this},UnitSwitcher.prototype.updateSelected=function(value){var $target;return $target=this.$("[data-value='"+value+"']"),$target.addClass(this.ui.activeClassName).siblings().removeClass(this.ui.activeClassName),this},UnitSwitcher.prototype.onItemClick=function(e){var $target,value;if(e.preventDefault(),$target=$(e.target),!$target.hasClass(this.ui.activeClassName))return value=$target.data("value"),this.updateSelected(value),this.trigger("unit:update",value)},UnitSwitcher}(TranslatableView)});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC.$,root.JNC._,root.JNC.Views.TranslatableView)}(this,function(JNC,$,_,TranslatableView){var _ref;return function(_super){function CartographySelector(){return _ref=CartographySelector.__super__.constructor.apply(this,arguments)}var EVENTS,SONAR_CHART_MIN_ZOOM,cartographyMenu_hide_time;return __extends(CartographySelector,_super),CartographySelector.prototype.className="sonarchart-control-container",CartographySelector.prototype.template=JNC.TPL["map/cartography_selector"],cartographyMenu_hide_time=1e4,SONAR_CHART_MIN_ZOOM=8,EVENTS={GA_MAP_SONAR_CHART_REQUESTED:"SonarChart-Requested"},CartographySelector.TYPES={NAVIONICS:"navionics",SONAR_CHARTS:"sonarCharts"},CartographySelector.prototype.events={"click .jnc-cartography":"onCartographySelectorClick","click .jnc-view-btn":"onItemClick"},CartographySelector.prototype._isOpened=!1,CartographySelector.prototype._enabled=!0,CartographySelector.prototype.items=[{title:"cartography_selector.navionics",icon:"na-icon-carto-selector",type:CartographySelector.TYPES.NAVIONICS,active:!0,enabled:!0,buttonClass:"na-icon-carto-selector"},{title:"cartography_selector.sonar_charts",icon:"na-icon-sonar",type:CartographySelector.TYPES.SONAR_CHARTS,active:!1,enabled:!0,buttonClass:"na-icon-sonar"}],CartographySelector.prototype.initialize=function(options){return null==options&&(options={}),_.bindAll(this,"_checkSonarChartMustBeShown"),this.listenTo(JNC.Events,"map:click",this._closeChartSelectorMenu),this.listenTo(JNC.Events,"map:zoomchange",this._closeChartSelectorMenu),CartographySelector.__super__.initialize.apply(this,arguments),this.map=options.map,this.navKey=options.navKey,this.type=options.type||CartographySelector.TYPES.NAVIONICS,this.type!==CartographySelector.TYPES.NAVIONICS&&(this.getItemByType(CartographySelector.TYPES.NAVIONICS).active=!1,this.getItemByType(CartographySelector.TYPES.SONAR_CHARTS).active=!0),options.autorender&&this.render(),this.map.getRowView().on("change:resolution",this._checkSonarChartMustBeShown)},CartographySelector.prototype.render=function(){var item;return item=this.getItemByType(this.getType()),this._isDisabled=!(item.enabled&&item.active),this.$el.html(this.template(this.getContext())),this},CartographySelector.prototype.getContext=function(){return{translate:this.translate,items:this.items,isOpened:this._isOpened,isDisabled:this._isDisabled,currentTypeClass:this.getItemByType(this.getType()).buttonClass}},CartographySelector.prototype.onCartographySelectorClick=function(e){var _this=this;return e.preventDefault(),setTimeout(function(){return _this._closeChartSelectorMenu()},cartographyMenu_hide_time),this._isOpened=!this._isOpened,this.render()},CartographySelector.prototype.onItemClick=function(e){var $target,type;if(e.preventDefault(),$target=$(e.currentTarget),(type=$target.data("type"))!==this.type)return this._enabled?this.setType(type):this.setType(CartographySelector.TYPES.NAVIONICS),this.type=type},CartographySelector.prototype._isSonarChartsAndDisabled=function(type){return type===CartographySelector.TYPES.SONAR_CHARTS&&!this.getItemByType(type).enabled},CartographySelector.prototype._showNotifySonarChart=function(){return this.gaSendEvent("BoatingMap",EVENTS.GA_MAP_SONAR_CHART_REQUESTED+":"+this.map.getBoundsArea(2),this.navKey),JNC.Events.trigger("event:showNotifyForSonarChart")},CartographySelector.prototype.setType=function(type){return this._isSonarChartsAndDisabled(type)&&this._showNotifySonarChart(),_.each(this.items,function(item){item.active=item.type===type}),this._onTypeChanged(type),this.trigger("type:switched",type),this.render()},CartographySelector.prototype._onTypeChanged=function(type){var item;if(item=this.getItemByType(type),item.enabled&&item.active)return this.trigger("type:changed",type)},CartographySelector.prototype.getType=function(){return _.findWhere(this.items,{active:!0}).type},CartographySelector.prototype.getItemByType=function(type){return _.findWhere(this.items,{type:type})},CartographySelector.prototype.toggle=function(show){return null==show&&(show=!0),show?this.show():this.hide()},CartographySelector.prototype.show=function(){return this.$el.show()},CartographySelector.prototype.hide=function(){return this.$el.hide()},CartographySelector.prototype.enable=function(){if(!this._enabled)return this._enabled=!0,this._checkSonarChartMustBeShown(),this.trigger("enabled")},CartographySelector.prototype.disable=function(){if(this._enabled)return this.getType()===CartographySelector.TYPES.SONAR_CHARTS&&this.setType(CartographySelector.TYPES.NAVIONICS),this._enabled=!1,this._checkSonarChartMustBeShown(),this.trigger("disabled")},CartographySelector.prototype._checkSonarChartMustBeShown=function(){var currentType,oldEnabled,sonarChartItem;if(sonarChartItem=this.getItemByType(CartographySelector.TYPES.SONAR_CHARTS),currentType=this.getType(),this.getItemByType(currentType),oldEnabled=sonarChartItem.enabled,this.map.getZoom()>SONAR_CHART_MIN_ZOOM?sonarChartItem.enabled=this._enabled:sonarChartItem.enabled=!1,currentType===CartographySelector.TYPES.SONAR_CHARTS&&oldEnabled===!sonarChartItem.enabled)return sonarChartItem.enabled?this._onTypeChanged(CartographySelector.TYPES.SONAR_CHARTS):this._onTypeChanged(CartographySelector.TYPES.NAVIONICS),this.render()},CartographySelector.prototype._closeChartSelectorMenu=function(){return this._isOpened=!1,this.render()},JNC.Views.CartographySelector=CartographySelector,CartographySelector}(TranslatableView)});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC.$,root.JNC._,root.JNC.Backbone,root.JNC.ol,root.JNC.Views.TranslatableView,root.JNC.Views.DistanceRuler,root.JNC.Views.UnitSwitcher,root.JNC.Views.ScaleLine,root.JNC.Widgets.Balloon,root.JNC.utils.MalChecker,root.JNC.utils.GeneralUtils,root.JNC.utils.Converter)}(this,function(JNC,$,_,Backbone,ol,TranslatableView,DistanceRulerView,UnitSwitcher,ScaleLine,Balloon,MalChecker,GeneralUtils,Converter){var _ref;return JNC.Views.Map=function(_super){function Map(){return _ref=Map.__super__.constructor.apply(this,arguments)}var INTERNAL_MAP_DEFAULTS,expandUrl;return __extends(Map,_super),Map.MAP_CONTAINER_CLASS="navionics-map-container",Map.prototype.EVENTS={MAP_RESIZE:"map:resize",MAP_ZOOMCHANGE:"map:zoomchange",MAP_CLICK:"map:click",MAP_CENTERCHANGE:"map:centerchange",INIT_TRACK_KML:"event:initTrackKML",RESET_TRACK_KML:"event:resetTrackLML",MAP_MOVEEND:"map:moveend",MAP_POINTERMOVE:"map:pointermove",MAP_MOUSE_POSITION:"map:mousePosition",SHOW_TEXT:"event:showText",GA_MAP_LOADED:"MapLoaded",GA_MAP_KML_LOADED:"KmlLoaded",GA_MAP_KML_BALLOON_OPEN:"KmlBalloonOpen",GA_MAP_ZOOM_CONTROL:"ZoomControl",GA_MAP_LOGO_CLICKED:"NavionicsLogoClicked",GA_MAP_ACKNOWLEDGEMENTS_CLICKED:"NavionicsAcknowledgementsClicked",GA_MAP_DISTANCE_UNIT_CLICKED:"DistanceUnitClicked",FEATURE_CLICKED:"feature:clicked",DISTANCE_UNIT_UPDATE:"distance:unit:update",DEPTH_UNIT_UPDATE:"depth:unit:update"},Map.prototype.events=function(){return{"click .navionics-logo":"onClickLogo","click .navionics-logo-payoff":"onClickLogo","click .navionics-acknowledgements":"onClickAcknowledgements"}},INTERNAL_MAP_DEFAULTS={zoom:3,BOUNDS:[-200383e5,-8129836,200383e5,15461676],MAX_RESOLUTION:20480,MIN_RESOLUTION:.625,center:[10.293772,43.879257],tagId:".nmap",ZoomControl:!0,DistanceUnitControl:!1,ScaleLine:!1,__showLogo__:!0},Map.prototype.ui={distanceControlMarker:"has-distance",scaleLineMarker:"has-scale-line",rulerControlMarker:"has-ruler",touchMarker:"touch-screen",noTouchMarker:"no-touch-screen"},Map.prototype.template=JNC.TPL["map/map_view"],Map.prototype._balloons=null,Map.prototype._balloonsDisabled=!1,Map.prototype._prevFeatureId=null,Map.prototype.featureClicked=!1,Map.prototype._debouncedRemoveClass=null,Map.prototype.initialize=function(options){var _this=this;return _.bindAll(this,"_hideBalloon","onPointerDown","onMapReady","onMapPostrender","_lookupAddressCallBack"),Map.__super__.initialize.apply(this,arguments),this.options=options,this._balloons=[],this._functionCallQueue=[],this._mapReady=!1,this._currentXYCoordinateOfMouse=void 0,this._theMapInternalOptions=_.extend({},INTERNAL_MAP_DEFAULTS,options),this.setElement($(this._theMapInternalOptions.tagId)),this.$el.append(this.template({layer:this.options.layer})),this.$(".overlay-dropdown-select").jncSelect({hideSelected:!0,width:"auto"}),this._view=new ol.View({center:Converter.standardMercatorToWeb(this._theMapInternalOptions.center),zoom:this._theMapInternalOptions.zoom,extent:this._theMapInternalOptions.BOUNDS,maxResolution:this._theMapInternalOptions.MAX_RESOLUTION,minResolution:this._theMapInternalOptions.MIN_RESOLUTION}),this._olMapDiv=this.$(".navionics-map").addClass(GeneralUtils.isTouchSupported()?this.ui.touchMarker:this.ui.noTouchMarker),this._addEventHandlers(),this._disclaimer=new ol.control.Attribution({collapsible:!1}),this._logo=new ol.control.Attribution({collapsible:!1,className:"navionics-logo-attribution"}),this.dragAndDropInteraction=new ol.interaction.DragAndDrop({formatConstructors:[ol.format.GPX,ol.format.GeoJSON,ol.format.IGC,ol.format.KML,ol.format.TopoJSON]}),this.interanctions=ol.interaction.defaults({altShiftDragRotate:!1,pinchRotate:!1}).extend([this.dragAndDropInteraction]),this._map=new ol.Map({loadTilesWhileAnimating:!0,loadTilesWhileInteracting:!0,target:this._olMapDiv[0],view:this._view,logo:!1,controls:[this._disclaimer,this._logo],interactions:this.interanctions}),this.attachLayersOnMap(),this.MalChecker=new MalChecker(this._theMapInternalOptions.navKey),this.listenTo(JNC.Events,Map.prototype.EVENTS.MAP_CLICK,this._clickEvent),this.listenTo(JNC.Events,Map.prototype.EVENTS.INIT_TRACK_KML,this._loadTrackKML),this.listenTo(JNC.Events,Map.prototype.EVENTS.RESET_TRACK_KML,this._resetTrack),this._map.on("pointerdown",this.onPointerDown),this._map.on("pointermove",function(mapBrowserEvent){return _this._currentXYCoordinateOfMouse=mapBrowserEvent.coordinate}),this.listenTo(JNC.Events,Map.prototype.EVENTS.MAP_RESIZE,function(){return this._map.updateSize()}),$(window).on("resize.jnc-map",function(){return JNC.Events.trigger(Map.prototype.EVENTS.MAP_RESIZE)}),this._map.on("moveend",function(mapEvent){return _this.trigger(Map.prototype.EVENTS.MAP_MOVEEND,mapEvent)}),this._map.on("singleclick",function(mapBrowserEvent){return _this._ongoingClickEvent=mapBrowserEvent,JNC.Events.trigger(Map.prototype.EVENTS.MAP_CLICK,mapBrowserEvent),_this._ongoingClickEvent=null}),this._map.on("pointerdown",function(mapBrowserEvent){var ua,_ref1;if(ua="undefined"!=typeof navigator&&null!==navigator&&null!=(_ref1=navigator.userAgent)?_ref1.toLowerCase():void 0,(null!=ua?ua.indexOf("android"):void 0)>-1)return _this._emulate_touch_android(mapBrowserEvent)}),this._map.on("pointerup",function(mapBrowserEvent){var ua,_ref1;if(ua="undefined"!=typeof navigator&&null!==navigator&&null!=(_ref1=navigator.userAgent)?_ref1.toLowerCase():void 0,(null!=ua?ua.indexOf("android"):void 0)>-1)return _this._emulate_touch_android(mapBrowserEvent)}),this._map.on("pointermove",function(){return JNC.Events.trigger(Map.prototype.EVENTS.MAP_POINTERMOVE)}),this._map.on("pointermove",function(mapBrowserEvent){return JNC.Events.trigger(Map.prototype.EVENTS.MAP_MOUSE_POSITION,mapBrowserEvent)}),this._view.on("change:resolution",function(){return JNC.Events.trigger(Map.prototype.EVENTS.MAP_ZOOMCHANGE),_this._checkZoomButtons()}),this._view.on("change:center",function(e){var previousCenter;return JNC.Events.trigger(Map.prototype.EVENTS.MAP_CENTERCHANGE),previousCenter=[e.oldValue[0],e.oldValue[1]],_this.MalChecker.trackActivity(previousCenter,_this._view.getCenter(),_this._view.getZoom())}),this.lastScrollZoomInWithWheelMousefilter=0,this.lastScrollZoomOutWithWheelMousefilter=0,this._map.once("postrender",this.onMapReady),this._map.on("postrender",this.onMapPostrender),this._initDistanceUnitSwitcher(),this._initDistanceRuler(),this._initScaleLine(),this.setDistanceUnit(JNC.DISTANCE_UNIT.KILOMETERS),this.showZoomControl(this._theMapInternalOptions.ZoomControl),this.showDistanceUnitControl(this._theMapInternalOptions.DistanceUnitControl),this.showScaleLineControl(this._theMapInternalOptions.ScaleLine),this.dragAndDropInteraction.on("addfeatures",function(e){var vectorLayer,vectorSource;return vectorSource=new ol.source.Vector({features:e.features,projection:e.projection}),_this._map.getLayers().push(vectorLayer=new ol.layer.Image({source:new ol.source.ImageVector({source:vectorSource})})),_this.pushVectorLayer(vectorLayer),_this._view.fitExtent(vectorSource.getExtent(),_this._map.getSize())})},Map.prototype._emulate_touch_android=function(mapBrowserEvent){var now;return"pointerdown"===mapBrowserEvent.type?void(this.lastTimePointerDown=Date.now()):(now=Date.now(),now-this.lastTimePointerDown<500?(this._ongoingClickEvent=mapBrowserEvent,JNC.Events.trigger(Map.prototype.EVENTS.MAP_CLICK,mapBrowserEvent),this._ongoingClickEvent=null):void 0)},Map.prototype.stopPropagatingClickEvent=function(){var _ref1;return null!=(_ref1=this._ongoingClickEvent)?_ref1._JNC_stopPropagation=!0:void 0},Map.prototype.clickEventPropagationStopped=function(e){return e._JNC_stopPropagation},Map.prototype.onMapReady=function(e){return this._mapReady=!0,this._processFunctionCallQueue(),this.gaSendEvent("Map",Map.prototype.EVENTS.GA_MAP_LOADED,this._theMapInternalOptions.navKey)},Map.prototype.onMapPostrender=function(e){if(null!=(null!=e?e.frameState:void 0))return _.each(e.frameState.logos,function(value,key){return delete e.frameState.logos[key]})},Map.prototype.attachLayersOnMap=function(){return this._map.addLayer(new ol.layer.Tile({source:new ol.source.OSM}))},Map.prototype.getRowMap=function(){return this._map},Map.prototype.getRowView=function(){return this._map.getView()},Map.prototype.getLayers=function(){return this._map.getLayers()},Map.prototype.lookupAddress=function(address){return this._lookupAddresses(address,this._lookupAddressCallBack)},Map.prototype._lookupAddresses=function(query,callback){if(""!==query)return $.ajax({timeout:5e3,dataType:"json",url:this._theMapInternalOptions.url+"/api/v2/lookupAddress/"+query,success:callback})},Map.prototype._lookupAddressCallBack=function(data,status){var latitude,longitude;return"OK"===data.status?(longitude=data.results[0].geometry.location.lng,latitude=data.results[0].geometry.location.lat,this.setSafeCenter(longitude,latitude),this.setZoom(8)):JNC.Events.trigger(Map.prototype.EVENTS.SHOW_TEXT,"not-found-growl")},Map.prototype.goToCoord=function(longitude,latitude,zoom){return null==zoom&&(zoom=6),this.setSafeCenter(longitude,latitude),this.setZoom(zoom)},Map.prototype.setSafeCenter=function(longitude,latitude,defaultLongitude,defaultLatitude){var lat,lng;if(null==defaultLongitude&&(defaultLongitude=10.294393),null==defaultLatitude&&(defaultLatitude=43.879246),null!=defaultLongitude&&null!=defaultLatitude)return lat=!isNaN(parseFloat(latitude))&&isFinite(latitude)?parseFloat(latitude):defaultLatitude,lng=!isNaN(parseFloat(longitude))&&isFinite(longitude)?parseFloat(longitude):defaultLongitude,this.setCenter([lng,lat])},Map.prototype.setCenter=function(coord){return this._view.setCenter(Converter.standardMercatorToWeb(coord))},Map.prototype.setZoom=function(zoom){return this._view.setZoom(zoom)},Map.prototype.getProjection=function(){return this._view.getProjection()},Map.prototype.getBoundsArea=function(precision){var extent,out;return extent=this._view.calculateExtent(this._map.getSize()),out=Converter.webMercatorExtentToStandard(extent),null!=precision&&(out[0]=Number(out[0].toFixed(precision)),out[1]=Number(out[1].toFixed(precision)),out[2]=Number(out[2].toFixed(precision)),out[3]=Number(out[3].toFixed(precision))),out},Map.prototype.getViewportWidth=function(){return $(this._map.getViewport()).width()},Map.prototype.getViewportHeight=function(){return $(this._map.getViewport()).height()},Map.prototype.getCoordinateFromPixel=function(data){return this._map.getCoordinateFromPixel(data)},Map.prototype.getExtentFromCoordinate=function(coordinate,delta){var left,top;return left=coordinate,left[0]+=delta,left[1]+=delta,top=coordinate,top[1]-=delta,top[0]-=delta,ol.extent.boundingExtent(coordinate,left,top)},Map.prototype.show=function(){return this.render(),this},Map.prototype.render=function(){return this._map.render()},Map.prototype.revalideMap=function(){return this._map.updateSize()},Map.prototype.getZoom=function(){return this._view.getZoom()},Map.prototype.zoomIn=function(){return this.zoomByDelta(1)},Map.prototype.zoomOut=function(){return this.zoomByDelta(-1)},Map.prototype.zoomByDelta=function(step,coordinates){var currentResolution,newResolution;return null==step&&(step=1),null==coordinates&&(coordinates=null),currentResolution=this._view.getResolution(),newResolution=this._view.constrainResolution(currentResolution,step),this._map.beforeRender(ol.animation.zoom({resolution:currentResolution,easing:ol.easing.easeOut,duration:500})),this._view.setResolution(newResolution),this.gaSendEvent("Map",Map.prototype.EVENTS.GA_MAP_ZOOM_CONTROL+":"+(1===step?"zoom-in":"zoom-out"),this._theMapInternalOptions.navKey)},Map.prototype._checkZoomButtons=function(){var currentResolution,resolutionAfterThat,resolutionBeforeThat;return currentResolution=this._view.getResolution(),resolutionAfterThat=this._view.constrainResolution(currentResolution,1),resolutionBeforeThat=this._view.constrainResolution(currentResolution,-1),currentResolution===resolutionAfterThat?($(".na-icon-plus").addClass("is-disabled"),$(".na-icon-minus").removeClass("is-disabled")):currentResolution===resolutionBeforeThat?($(".na-icon-plus").removeClass("is-disabled"),$(".na-icon-minus").addClass("is-disabled")):($(".na-icon-minus").removeClass("is-disabled"),$(".na-icon-plus").removeClass("is-disabled"))},Map.prototype.centerLayer=function(layer){var extent;return extent=_.isFunction(layer.getOriginalExtent)?layer.getOriginalExtent():layer.getSource().getExtent(),this._view.fitExtent(extent,this._map.getSize())},Map.prototype.onPointerDown=function(e){var _this=this;return this._map.forEachFeatureAtPixel(e.pixel,function(feature){var handler,key;if(null!=(handler=feature.getProperties().handler))return e.preventDefault(),handler(feature,e),key=_this._map.on("pointermove",function(e){return e.preventDefault(),handler(feature,e)}),_this._map.once("pointerup",function(e){return e.preventDefault(),_this._map.unByKey(key),handler(feature,e)})})},Map.prototype.getPixelFromEvent=function(e){return this._map.getEventPixel(e.originalEvent)},Map.prototype.getLastPositionOfMouse=function(){return Converter.webMercatorToStandard(this._currentXYCoordinateOfMouse)},Map.prototype.addLayer=function(layer,force){var found;return null==force&&(force=!1),force?this._map.addLayer(layer):(found=!1,this._map.getLayers().forEach(function(element,index,array){if(layer===element)return found=!0}),found||this._map.addLayer(layer)),this},Map.prototype.removeLayer=function(layer){return this._map.removeLayer(layer),this},Map.prototype.addVectorLayer=function(layer){return this.addLayer(layer)},Map.prototype.removeVectorLayer=function(layer){return this._map.removeLayer(layer)},Map.prototype.showDistanceControl=function(showIt){var _this=this;return null==showIt&&(showIt=!0),this._executeFunction(function(){return _this._distanceRuler.toggle(showIt),_this._addMapControlMarker(showIt,_this.ui.rulerControlMarker)}),this},Map.prototype.showDistanceTool=function(show){return this._distanceRuler.addDistanceRuler()},Map.prototype.showScaleLineControl=function(isVisible){var _ref1;return null==isVisible&&(isVisible=!0),null!=(_ref1=this._scaleLine)&&_ref1.setVisible(isVisible),this._addMapControlMarker(isVisible,this.ui.scaleLineMarker)},Map.prototype.showZoomControl=function(isVisible){var _this=this;return null==isVisible&&(isVisible=!0),this._executeFunction(function(){return _this._setVisibility(_this.$(".zoom-control-container"),isVisible)})},Map.prototype._setVisibility=function($el,isVisible){return null==isVisible&&(isVisible=!0),$el.toggle(isVisible)},Map.prototype.loadKml=function(kmlUrl,fitKmlOnView){var layer,source;return null==fitKmlOnView&&(fitKmlOnView=!0),source=new ol.source.KML({projection:this._view.getProjection(),url:kmlUrl}),layer=new ol.layer.Vector({source:source}),source.on("change",_.bind(this._changedKmlState,this,layer,fitKmlOnView)),this.gaSendEvent("Map",Map.prototype.EVENTS.GA_MAP_KML_LOADED+":"+kmlUrl,this._theMapInternalOptions.navKey),layer},Map.prototype._changedKmlState=function(layer,fitKmlOnView){if("ready"===layer.getSource().getState()&&this.pushVectorLayer(layer)&&fitKmlOnView)return this.centerLayer(layer)},Map.prototype._loadTrackKML=function(kmlUrl){if(kmlUrl)return this._resetTrack(),this._trackLayer=this.loadKml(kmlUrl)},Map.prototype._resetTrack=function(){if(null!=this._trackLayer)return this.removeLayer(this._trackLayer),this._trackLayer=null},Map.prototype.pushVectorLayer=function(layer){var found;if(null!=layer)return found=!1,this.getLayers().forEach(function(e,i,a){if(e===layer)return found=!0}),found||this.addLayer(layer),!found},Map.prototype.setDistanceUnit=function(unit){var validUnits,_ref1,_ref2,_ref3;if(this.getDistanceUnit()!==unit)return validUnits=[JNC.DISTANCE_UNIT.KILOMETERS,JNC.DISTANCE_UNIT.MILES,JNC.DISTANCE_UNIT.NAUTICAL],_.contains(validUnits,unit)?this._distanceUnit=unit:this._distanceUnit=JNC.DISTANCE_UNIT.NAUTICAL,null!=(_ref1=this._scaleLine)&&_ref1.setUnits(this._distanceUnit),null!=(_ref2=this._distanceRuler)&&_ref2.setDistanceUnit(this._distanceUnit,!0),null!=(_ref3=this._distanceUnitSwitcher)&&_ref3.updateSelected(this._distanceUnit),this.trigger(Map.prototype.EVENTS.DISTANCE_UNIT_UPDATE,this._distanceUnit),this.gaSendEvent("Map",Map.prototype.EVENTS.GA_MAP_DISTANCE_UNIT_CLICKED+":"+this._distanceUnit,this._theMapInternalOptions.navKey),this.render()},Map.prototype._initDistanceUnitSwitcher=function(){var _this=this;return this._distanceUnitSwitcher=new UnitSwitcher({autorender:!0,className:"distance",title:this.translate("distance"),items:[{name:this.translate("units.nautical"),value:JNC.DISTANCE_UNIT.NAUTICAL},{name:this.translate("units.kilometers"),value:JNC.DISTANCE_UNIT.KILOMETERS},{name:this.translate("units.miles"),value:JNC.DISTANCE_UNIT.MILES}],selected:this.getDistanceUnit()}),this._distanceUnitSwitcher.$el.appendTo(this._olMapDiv),this.listenTo(this._distanceUnitSwitcher,"unit:update",function(value){return _this.setDistanceUnit(value)})},Map.prototype._initDistanceRuler=function(){return this._distanceRuler=new DistanceRulerView({map:this,units:this.getDistanceUnit(),navKey:this._theMapInternalOptions.navKey,autorender:!0}),this._distanceRuler.$el.appendTo(this._olMapDiv)},Map.prototype._initScaleLine=function(units,width){return null==units&&(units=JNC.DISTANCE_UNIT.NAUTICAL),null==width&&(width=59),this._scaleLine=new ScaleLine({map:this,units:units,width:width})},Map.prototype.showDistanceUnitControl=function(isVisible){var _ref1;return null==isVisible&&(isVisible=!0),this._setVisibility(null!=(_ref1=this._distanceUnitSwitcher)?_ref1.$el:void 0,isVisible),this._addMapControlMarker(isVisible,this.ui.distanceControlMarker)},Map.prototype.getDistanceUnit=function(){return this._distanceUnit},Map.prototype._getHTMLLogo=function(){return this._theMapInternalOptions.__showLogo__?'<a href="http://www.navionics.com" target="_blank" class="navionics-logo"></a>':""},Map.prototype._getHTMLLogoPayoff=function(){return this._theMapInternalOptions.__showLogo__?'<a href="http://www.navionics.com" target="_blank" class="navionics-logo-payoff"></a>':""},Map.prototype.onClickLogo=function(){return this.gaSendEvent("Map",Map.prototype.EVENTS.GA_MAP_LOGO_CLICKED,this._theMapInternalOptions.navKey)},Map.prototype.onClickAcknowledgements=function(){return this.gaSendEvent("Map",Map.prototype.EVENTS.GA_MAP_ACKNOWLEDGEMENTS_CLICKED,this._theMapInternalOptions.navKey)},expandUrl=function(url){var charCode,i,match,startCharCode,stop,stopCharCode,urls;if(urls=[],match=/\{([a-z])-([a-z])\}/.exec(url)){for(startCharCode=match[1].charCodeAt(0),stopCharCode=match[2].charCodeAt(0),charCode=void 0,charCode=startCharCode;charCode<=stopCharCode;)urls.push(url.replace(match[0],String.fromCharCode(charCode))),++charCode;return urls}if(match=match=/\{(\d+)-(\d+)\}/.exec(url)){for(stop=parseInt(match[2],10),i=parseInt(match[1],10);i<=stop;)urls.push(url.replace(match[0],i.toString())),i++;return urls}return urls.push(url),urls},Map.prototype._requestNavToken=function(targetUrl,key,domain,callback){var oneUrl,result;return result=null,oneUrl=expandUrl(targetUrl),$.ajax({url:oneUrl[0]+"/"+key+"/"+domain,async:!!callback,crossDomain:!0,dataType:"text",cache:!1,error:function(){},success:function(data,textStatus,jqXHR){return callback(data),result=data}}),result},Map.prototype._clickEvent=function(mapBrowserEvent){var balloon,coordinate,description,events,feature,features,geometry,hasDetails,id,offset,title,type;if(this.featureClicked&&(this.featureClicked=!1),this._map===mapBrowserEvent.map)return features=this._getClosestFeatures(mapBrowserEvent.coordinate),features.length>0?(this.featureClicked=!0,feature=features[0],id=feature.getId(),title=feature.get("name"),description=feature.get("description"),offset=feature.get("offset")||[0,-32],
geometry=feature.getGeometry(),coordinate=geometry.getClosestPoint(mapBrowserEvent.coordinate),events=feature.get("events"),type=feature.get("type")||"default",hasDetails=feature.get("hasDetails"),null!=id&&(JNC.Events.trigger(Map.prototype.EVENTS.FEATURE_CLICKED,id,this._map),this.trigger(Map.prototype.EVENTS.FEATURE_CLICKED,id,coordinate,type),this._map.renderSync()),!title&&!description||this.clickEventPropagationStopped(mapBrowserEvent)||(balloon=this.showBalloon({id:id,title:title,content:description,coordinates:coordinate,offset:offset,class:"jnc-balloon-"+type,hasDetails:hasDetails}),null!=events&&null!=balloon&&balloon.delegateEvents(events)),null!=this._prevFeatureId&&id===this._prevFeatureId&&null!=balloon&&balloon._unsubscribeEvents(),this._prevFeatureId=id):this.hideBalloons()},Map.prototype._getClosestFeatures=function(coordinate){var features,pixel;return pixel=this._map.getPixelFromCoordinate(coordinate),features=[],this._map.forEachFeatureAtPixel(pixel,function(feature,layer){return features.push(feature)}),features},Map.prototype.showBalloon=function(options,closeBalloons,centralize,fastCentralize){var balloon,openBalloons,pixel,remainingBalloons;if(null==closeBalloons&&(closeBalloons=!0),null==centralize&&(centralize=!0),null==fastCentralize&&(fastCentralize=!1),!this._balloonsDisabled){if(closeBalloons)if(options.id){if(remainingBalloons=this.hideBalloonsFiltered(function(balloon){return balloon.featureId!==options.id}),openBalloons=_.intersection(remainingBalloons,this._balloons),openBalloons.length&&openBalloons[0].featureId===options.id)return openBalloons[0]}else this.hideBalloons();return balloon=new Balloon(_.extend(options,{map:this})),this._balloons.push(balloon),this.listenTo(balloon,"closed",this._hideBalloon),centralize&&(fastCentralize?this.moveToPosition(options.coordinates):this.flyToPosition(options.coordinates)),pixel=this._map.getPixelFromCoordinate(options.coordinates),this.gaSendEvent("Map",Map.prototype.EVENTS.GA_MAP_KML_BALLOON_OPEN+":"+options.title+"/"+pixel,this._theMapInternalOptions.navKey),balloon}},Map.prototype.hideBalloons=function(){return this.hideBalloonsFiltered()},Map.prototype.hideBalloonsFiltered=function(filterFn){var balloons,filtered,ids;return null==filterFn&&(filterFn=function(){return!0}),filtered=[],balloons=_.filter(this._balloons,function(balloon){return filterFn(balloon)||!filtered.push(balloon)}),ids=_.pluck(balloons,"id"),_.each(ids,this._hideBalloon),filtered},Map.prototype._hideBalloon=function(id){var balloon,index;if(null!=id)return balloon=_.findWhere(this._balloons,{id:id}),this.stopListening(balloon),balloon.close(),index=_.indexOf(this._balloons,balloon),this._balloons.splice(index,1)},Map.prototype.flyToPosition=function(position,zoomLevel){var pan,zoom;return null==zoomLevel&&(zoomLevel=null),pan=ol.animation.pan({duration:1e3,source:this._view.getCenter()}),zoom=ol.animation.zoom({duration:1e3,resolution:this._view.getResolution()}),this._map.beforeRender(pan,zoom),this.moveToPosition(position,zoomLevel)},Map.prototype.moveToPosition=function(position,zoomLevel){if(null==zoomLevel&&(zoomLevel=null),this._view.setCenter(position),null!=zoomLevel)return this._view.setZoom(zoomLevel)},Map.prototype.flyToExtent=function(extent,size){return null==size&&(size=null),ol.animation.pan({duration:1e3,source:this._view.getCenter()}),ol.animation.zoom({duration:1e3,resolution:this._view.getResolution()}),this.moveToExtent(extent,size)},Map.prototype.moveToExtent=function(extent,size){return null==size&&(size=null),size||(size=this._map.getSize()),this._view.fitExtent(extent,size)},Map.prototype.findFeaturesById=function(id,layers){var features;return features=[],_.each(layers,function(layer){var feature,source;if(source=layer.getSource(),feature=source.getFeatureById(id))return features.push(feature)}),features},Map.prototype.clearLayers=function(layers){var _this=this;return _.each(layers,function(layer){var source;return _this._map.removeLayer(layer),source=layer.getSource(),source.clear()})},Map.prototype.addPostponedFunctions=function(func){return{_executeFunction:func}},Map.prototype._executeFunction=function(func){return this._functionCallQueue.push(func),this._processFunctionCallQueue()},Map.prototype._processFunctionCallQueue=function(){var _results;if(this._mapReady){for(_results=[];this._functionCallQueue.length;)_results.push(this._functionCallQueue.shift()());return _results}},Map.prototype._addMapControlMarker=function(add,marker){if(add&&!this._olMapDiv.hasClass(marker)&&this._olMapDiv.addClass(marker),!add)return this._olMapDiv.removeClass(marker)},Map.prototype._addEventHandlers=function(){var event,_this=this;return event="click",this._olMapDiv.on(event,".map-btn",function(e){var $button;if($button=$(e.currentTarget),$button.hasClass("map-btn-zoom")&&(e.preventDefault(),e.stopPropagation()),_this._debouncedRemoveClass=GeneralUtils.debounce(function(){return $button.removeClass("touch-in-progress"),$button.siblings().removeClass("touch-in-progress")},500),$button.hasClass("zoom-in")&&_this.zoomIn(),$button.hasClass("zoom-out"))return _this.zoomOut()})},Map.prototype._ensureNavToken=function(url,callback){var _this=this;return this.navToken?_.defer(callback):this._requestNavToken(url,this.options.navKey,this.options.TilesDomain,function(navToken){return _this.navToken=navToken,callback()})},Map.prototype.isFeatureClicked=function(){return this.featureClicked||this._balloons.length},Map}(TranslatableView)});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC.$,root.JNC._,root.JNC.Backbone,root.JNC.ol,root.JNC.Views.Map,root.JNC.Views.UnitSwitcher,root.JNC.Views.CartographySelector,root.JNC.utils.CookieStorage)}(this,function(JNC,$,_,Backbone,ol,Map,UnitSwitcher,CartographySelector,CookieStorage){var _ref;return JNC.Views.BoatingNavionicsMap=function(_super){function BoatingNavionicsMap(){return _ref=BoatingNavionicsMap.__super__.constructor.apply(this,arguments)}var EVENTS,INTERNAL_BOATING_NAVIONICS_MAP_DEFAULTS;return __extends(BoatingNavionicsMap,_super),BoatingNavionicsMap.isUGCEnabled=!0,BoatingNavionicsMap.prototype.COSTLITE_MAX_RESOLUTION=4e3,INTERNAL_BOATING_NAVIONICS_MAP_DEFAULTS={distanceUnit:JNC.DISTANCE_UNIT.NAUTICAL,depthUnit:JNC.DEPTH_UNIT.METERS,safetyDepth:JNC.SAFETY_DEPTH_RANGE.METERS[0],bingKey:"AgCOqzOG3mwqjI6p8nnlSuZiNaf1bfxPi6ezB4b5R0pL3N2jOpVMDZkSg5M9DD5C",BASE_TILE_SERVER:"https://tile{1-5}.navionics.io",TILE_SUFFIX:"/tile/{z}/{x}/{y}",KEY_REQ_SUFFIX:"/tile/get_key",OSM_URL:"//tile.navionics.com/outdoors/{z}/{x}/{y}.png",OSM_ATTR:"&copy; Navionics",zoom:3,MAX_RESOLUTION:20480,MIN_RESOLUTION:.625,center:[10.293772,43.879257],tagId:".nmap",layer:JNC.MAP_LAYERS.NO_OVERLAY,ZoomControl:!0,SonarControl:!0,LayerControl:!0,DistanceControl:!0,DepthUnitControl:!0,DistanceUnitControl:!0,ScaleLine:!0,navKey:!1,cartographyType:CartographySelector.TYPES.NAVIONICS,logoPayoff:!1},EVENTS={MAP_RESIZE:"map:resize",GA_MAP_LOADED:"MapLoaded",GA_MAP_OVERLAY_CHANGE:"OverlayChange",GA_MAP_DEPTH_UNIT_CLICKED:"DepthUnitClicked",GA_MAP_SONAR_CHART_DISABLED:"SonarChart-Disabled",GA_MAP_SONAR_CHART_ENABLED:"SonarChart-Enabled"},BoatingNavionicsMap.prototype.events=function(){return _.extend(BoatingNavionicsMap.__super__.events.apply(this,arguments),{"change .overlay-dropdown":"onOverlayChange"})},BoatingNavionicsMap.prototype.ui=_.extend(Map.prototype.ui,{depthControlMarker:"has-depth",sonarCharts:".jnc-view-btn[data-type=SonarCharts]"}),BoatingNavionicsMap.prototype.storage=CookieStorage,BoatingNavionicsMap.prototype.cartographyStorageKey="cartographyType",BoatingNavionicsMap.prototype.initialize=function(options){var hostOptions;if(hostOptions={TilesDomain:window.location.hostname},this.options=_.extend(hostOptions,INTERNAL_BOATING_NAVIONICS_MAP_DEFAULTS,options),this._isValidOverlay(this.options.layer)||(this.options.layer=INTERNAL_BOATING_NAVIONICS_MAP_DEFAULTS.layer),this.options.cartographyType=this.storage.get(this.cartographyStorageKey)||CartographySelector.TYPES.NAVIONICS,null==this.options.navKey)throw"Map key is not set";return BoatingNavionicsMap.__super__.initialize.call(this,this.options),this._isCostlineVisible=!0,this._sonarchartsVisible=!1,this._initDepthUnitControl(this.options.DepthUnitControl),this._initCartographySelector(this.options.SonarControl),this.setDepthUnit(this.options.depthUnit),this.setSafetyDepthLevel(this.options.safetyDepth),this.setDistanceUnit(this.options.distanceUnit),this.showZoomControl(this.options.ZoomControl),this.showLayerControl(this.options.LayerControl),this.showDistanceControl(this.options.DistanceControl),this.showDistanceUnitControl(this.options.DistanceUnitControl),this.setLogoPayoff(this.options.logoPayoff),this.enabledUGC(!0)},BoatingNavionicsMap.prototype.render=function(){var url,_this=this;return url=this.options.BASE_TILE_SERVER+INTERNAL_BOATING_NAVIONICS_MAP_DEFAULTS.KEY_REQ_SUFFIX,this._ensureNavToken(url,function(){return _this._updateNavionicsServerUrl(),BoatingNavionicsMap.__super__.render.apply(_this,arguments)})},BoatingNavionicsMap.prototype.attachLayersOnMap=function(){var url,_this=this;return this.listenTo(JNC.Events,"event:haveSonarChartFeature",this.haveSonarChartFeature),this.listenTo(JNC.Events,"map:zoomchange",this._checkCostLineIsVisible),url=this.options.BASE_TILE_SERVER+INTERNAL_BOATING_NAVIONICS_MAP_DEFAULTS.KEY_REQ_SUFFIX,this._ensureNavToken(url,function(){return _this._layerNauticalSource=_this._createSourceOfNauticalLayer(!1),_this._layerNautical=new ol.layer.Tile({source:_this._layerNauticalSource}),_this._layerNauticalTransparentSource=_this._createSourceOfNauticalLayer(!0),_this._layerNauticalTransparent=new ol.layer.Tile({source:_this._layerNauticalTransparentSource}),_this._layerNauticalSonarSource=_this._createSourceOfSonarChartLayer(!1),_this._layerNauticalSonar=new ol.layer.Tile({source:_this._layerNauticalSonarSource}),_this._layerNauticalSonarTransparentSource=_this._createSourceOfSonarChartLayer(!0),_this._layerNauticalSonarTransparent=new ol.layer.Tile({source:_this._layerNauticalSonarTransparentSource}),_this._reorderLayers()})},BoatingNavionicsMap.prototype.onMapReady=function(e){return this._mapReady=!0,this._processFunctionCallQueue(),this.gaSendEvent("BoatingMap",EVENTS.GA_MAP_LOADED,this.options.navKey)},BoatingNavionicsMap.prototype.onOverlayChange=function(e){var value;return null!=e&&e.stopPropagation(),value=this.$(".overlay-dropdown").val(),this.setMapOverlay(value),this.gaSendEvent("BoatingMap",EVENTS.GA_MAP_OVERLAY_CHANGE+":"+value,this.options.navKey),this},BoatingNavionicsMap.prototype.resize=function(){return JNC.Events.trigger(EVENTS.MAP_RESIZE),this},BoatingNavionicsMap.prototype.activateSonarCharts=function(show){return show?this.showSonarcharts():this.hideSonarcharts()},BoatingNavionicsMap.prototype.haveSonarChartFeature=function(has){return has?this._cartographySelector.enable():this._cartographySelector.disable()},BoatingNavionicsMap.prototype.showSonarcharts=function(){var layers,_this=this;if(!this._sonarchartsVisible)return layers=this.getLayers(),layers.forEach(function(e,i,a){if(e===_this._layerNautical&&(a[i]=_this._layerNauticalSonar),e===_this._layerNauticalTransparent)return a[i]=_this._layerNauticalSonarTransparent}),this.render(),this._sonarchartsVisible=!0,this.gaSendEvent("BoatingMap",EVENTS.GA_MAP_SONAR_CHART_ENABLED+":"+this.getBoundsArea(2),this.options.navKey),this},BoatingNavionicsMap.prototype.hideSonarcharts=function(){var layers,_this=this;if(this._sonarchartsVisible)return layers=this.getLayers(),layers.forEach(function(e,i,a){if(e===_this._layerNauticalSonar&&(a[i]=_this._layerNautical),e===_this._layerNauticalSonarTransparent)return a[i]=_this._layerNauticalTransparent}),this.render(),this._sonarchartsVisible=!1,this.gaSendEvent("BoatingMap",EVENTS.GA_MAP_SONAR_CHART_DISABLED+":"+this.getBoundsArea(2),this.options.navKey),this},BoatingNavionicsMap.prototype.getSonarCharts=function(){return this._sonarchartsVisible},BoatingNavionicsMap.prototype.setCountryCode=function(country_code){var codes,units;return codes=["AI","AQ","AG","AR","AW","BS","BB","BZ","BM","BO","BR","VG","CA","KY","CL","CO","CR","CU","DM","DO","EC","SV","GF","GL","GD","VC","GP","GT","GY","HT","HN","JM","MQ","MX","MS","AN","NC","NI","PA","PY","PE","PR","SH","KN","LC","PM","VC","SR","TT","TC","US","UY","VE"],units=_.contains(codes,country_code)?JNC.DEPTH_UNIT.FEET:JNC.DEPTH_UNIT.METERS,this.setDepthUnit(units)},BoatingNavionicsMap.prototype.pushVectorLayer=function(layer){var found;if(null!=layer)return found=!1,this.getLayers().forEach(function(e,i,a){if(e===layer)return found=!0}),found||this.addLayer(layer),!found},BoatingNavionicsMap.prototype.showLayerControl=function(isVisible){var _this=this;return null==isVisible&&(isVisible=!0),this.options.LayerControl=isVisible,this._executeFunction(function(){return _this._setVisibility(_this.$(".layer-control-container"),isVisible)})},BoatingNavionicsMap.prototype.setLogoPayoff=function(payoff){return null==payoff&&(payoff=!1),this.options.logoPayoff=payoff},BoatingNavionicsMap.prototype.setMapOverlay=function(type,force){if(null==force&&(force=!1),null!=type&&this._isValidOverlay(type)&&(this.options.layer!==type||force))return this.options.layer=type,this._reorderLayers()},BoatingNavionicsMap.prototype._reorderLayers=function(){var layers;if(null!=this._layerNautical){if(layers=this.getLayers(),null!=layers&&(layers.remove(this._layerNauticalSonar),layers.remove(this._layerNautical),layers.remove(this._layerNauticalSonarTransparent),layers.remove(this._layerNauticalTransparent),null!=this._layerOSM&&layers.remove(this._layerOSM),null!=this._layerBing&&layers.remove(this._layerBing)),this.options.layer===JNC.MAP_LAYERS.NO_OVERLAY)this._sonarchartsVisible?layers.insertAt(0,this._layerNauticalSonar):layers.insertAt(0,this._layerNautical);else switch(this._view.getResolution()>this.COSTLITE_MAX_RESOLUTION&&this._isCostlineVisible?this._isCostlineVisible=!1:this._view.getResolution()<this.COSTLITE_MAX_RESOLUTION&&!this._isCostlineVisible&&(this._isCostlineVisible=!0),this._sonarchartsVisible?layers.insertAt(0,this._layerNauticalSonarTransparent):this._isCostlineVisible&&layers.insertAt(0,this._layerNauticalTransparent),this.options.layer){case JNC.MAP_LAYERS.TERRAIN:null==this._layerOSM&&(this._layerOSM=this._createOSMLayer()),layers.insertAt(0,this._layerOSM);break;case JNC.MAP_LAYERS.SATELLITE:null==this._layerBing&&(this._layerBing=this._createBingLayer()),layers.insertAt(0,this._layerBing)}return this.revalideMap()}},BoatingNavionicsMap.prototype._isValidOverlay=function(overlay){return _.contains(_.values(JNC.MAP_LAYERS),overlay)},BoatingNavionicsMap.prototype.setDepthUnit=function(unit){var _ref1;return this._setDepthUnit(unit),null!=(_ref1=this.depthUnitView)?_ref1.updateSelected(unit):void 0},BoatingNavionicsMap.prototype._setDepthUnit=function(unit){if(this._depthUnit!==unit&&this.isAllowedUnit(unit))return this._depthUnit=unit,this.gaSendEvent("Map",EVENTS.GA_MAP_DEPTH_UNIT_CLICKED+":"+this._depthUnit,this.options.navKey),this._updateNavionicsServerUrl(),this.render(),this.trigger("depth:unit:update",unit)},BoatingNavionicsMap.prototype.isAllowedUnit=function(units){return _.contains(_.values(JNC.DEPTH_UNIT),units)},BoatingNavionicsMap.prototype.getDepthUnit=function(){return this._depthUnit},BoatingNavionicsMap.prototype.setSafetyDepthLevel=function(safetyDepthLevel){return(_.isNumber(safetyDepthLevel)||this.isSafetyDepthLevelValid(safetyDepthLevel))&&(this._safetyDepthLevel=safetyDepthLevel),this._updateNavionicsServerUrl(),this.render()},BoatingNavionicsMap.prototype.isSafetyDepthLevelValid=function(safetyDepthLevel){return _.contains(_.values(JNC.SAFETY_DEPTH_LEVEL),safetyDepthLevel)},BoatingNavionicsMap.prototype.getSafetyDepthLevel=function(){return this._safetyDepthLevel},BoatingNavionicsMap.prototype.invalidateSize=function(w,h){return this.revalideMap(),this},BoatingNavionicsMap.prototype.createTrackKMLLayer=function(url,highlight){return new ol.layer.Vector({source:new ol.source.KML({crossOrigin:"anonymous",projection:"EPSG:3857",url:url}),style:function(feature,resolution){var style;return style=new ol.style.Style({stroke:new ol.style.Stroke({color:"#e04",width:.5})}),[style]}})},BoatingNavionicsMap.prototype._checkCostLineIsVisible=function(){if(this._view.getResolution()>this.COSTLITE_MAX_RESOLUTION&&this.options.layer!==JNC.MAP_LAYERS.NO_OVERLAY&&!0===this._isCostlineVisible&&this.setMapOverlay(this.options.layer,!0),this._view.getResolution()<this.COSTLITE_MAX_RESOLUTION&&this.options.layer!==JNC.MAP_LAYERS.NO_OVERLAY&&!1===this._isCostlineVisible)return this.setMapOverlay(this.options.layer,!0)},BoatingNavionicsMap.prototype._initDepthUnitControl=function(isVisible){return this.depthUnitView=new UnitSwitcher({autorender:!0,className:"depth",title:this.translate("depth"),items:[{name:this.translate("units.feet"),value:JNC.DEPTH_UNIT.FEET},{name:this.translate("units.meters"),value:JNC.DEPTH_UNIT.METERS}],selected:this.getDepthUnit()}),this.depthUnitView.$el.appendTo(this._olMapDiv),this.listenTo(this.depthUnitView,"unit:update",this._setDepthUnit),this.showDepthUnitControl(isVisible)},BoatingNavionicsMap.prototype.showDepthUnitControl=function(isVisible){var _this=this;return this._executeFunction(function(){var _ref1;return _this._setVisibility(null!=(_ref1=_this.depthUnitView)?_ref1.$el:void 0,isVisible),_this._addMapControlMarker(isVisible,_this.ui.depthControlMarker)})},BoatingNavionicsMap.prototype._initCartographySelector=function(isVisible){var _this=this;if(this._cartographySelector=new CartographySelector({autorender:!0,map:this,navKey:this.options.navKey,type:this.options.cartographyType}),this._cartographySelector.$el.appendTo(this._olMapDiv),this.listenTo(this._cartographySelector,"type:changed",function(type){return _this.activateSonarCharts(type===CartographySelector.TYPES.SONAR_CHARTS)}),this.listenTo(this._cartographySelector,"type:switched",function(type){return _this.storage.set(_this.cartographyStorageKey,type)}),this.listenTo(this._cartographySelector,"disabled",function(){return _this.hideSonarcharts()}),this.showSonarControl(isVisible),this.options.cartographyType===CartographySelector.TYPES.SONAR_CHARTS)return this.activateSonarCharts(!0)},BoatingNavionicsMap.prototype.showSonarControl=function(show){var _this=this;return null==show&&(show=!0),this._executeFunction(function(){return _this._cartographySelector.toggle(show)})},BoatingNavionicsMap.prototype.enabledUGC=function(showit){return null==showit&&(showit=!0),this.isUGCEnabled=showit,this._updateNavionicsServerUrl(),this.render()},BoatingNavionicsMap.prototype._formatTileUrl=function(type,depthUnit,depthLevel,showTerrain,showUGC){var levelName,params,sAlpha,sDepthLevel,sDepthUnit,sType,sUgc,unitWithValue,value,_ref1;if(sType="sonar"===type?1:0,sAlpha=showTerrain?"FALSE":"TRUE",sUgc=showUGC?"TRUE":"FALSE",sDepthUnit=function(){switch(depthUnit){case JNC.DEPTH_UNIT.METERS:return 1;case JNC.DEPTH_UNIT.FEET:return 2;case JNC.DEPTH_UNIT.FATHOMS:return 3;default:return 1}}(),_.isNumber(depthLevel))sDepthLevel=depthLevel.toFixed(2);else{_ref1=JNC.SAFETY_DEPTH_LEVEL;for(unitWithValue in _ref1)levelName=_ref1[unitWithValue],depthLevel===levelName&&unitWithValue.toLowerCase().indexOf(depthUnit)>=0&&(value=unitWithValue);sDepthLevel=value?value.replace(/[^0-9\.]+/g,""):0}return params=$.param({LAYERS:"config_"+sDepthUnit+"_"+sDepthLevel+"_"+sType,TRANSPARENT:sAlpha,UGC:sUgc,navtoken:this.navToken}),this.options.BASE_TILE_SERVER+INTERNAL_BOATING_NAVIONICS_MAP_DEFAULTS.TILE_SUFFIX+"?"+params},BoatingNavionicsMap.prototype._updateNavionicsServerUrl=function(){if(!(_.isUndefined(this._depthUnit)||_.isUndefined(this._safetyDepthLevel)||_.isUndefined(this._layerNauticalSonarSource)||_.isUndefined(this._layerNauticalSource)||_.isUndefined(this._layerNauticalTransparentSource)||_.isUndefined(this.isUGCEnabled)))return this._layerNauticalSonarSource.setUrl(this._formatTileUrl("sonar",this._depthUnit,this._safetyDepthLevel,!0,this.isUGCEnabled)),this._layerNauticalSource.setUrl(this._formatTileUrl("nautical",this._depthUnit,this._safetyDepthLevel,!0,this.isUGCEnabled)),this._layerNauticalSonarTransparentSource.setUrl(this._formatTileUrl("sonar",this._depthUnit,this._safetyDepthLevel,!1,this.isUGCEnabled)),this._layerNauticalTransparentSource.setUrl(this._formatTileUrl("nautical",this._depthUnit,this._safetyDepthLevel,!1,this.isUGCEnabled))},BoatingNavionicsMap.prototype._createOSMLayer=function(){return new ol.layer.Tile({source:new ol.source.XYZ({url:this.options.OSM_URL,maxResolution:this.options.MAX_RESOLUTION,minResolution:this.options.MIN_RESOLUTION,crossOrigin:"anonymous",attributions:[new ol.Attribution({html:this.options.OSM_ATTR},ol.source.OSM.DATA_ATTRIBUTION)]})})},BoatingNavionicsMap.prototype._createBingLayer=function(){return new ol.layer.Tile({source:new ol.source.BingMaps({key:this.options.bingKey,imagerySet:"AerialWithLabels",maxResolution:this.options.MAX_RESOLUTION,minResolution:this.options.MIN_RESOLUTION})})},BoatingNavionicsMap.prototype._createDistanceRulerLayer=function(){return new ol.layer.Vector({source:new ol.source.Vector({projection:this._view.getProjection()})})},BoatingNavionicsMap.prototype._createSourceOfNauticalLayer=function(transparent){return null==transparent&&(transparent=!1),new ol.source.XYZ({crossOrigin:"anonymous",attributions:[new ol.Attribution({html:this.translate("disclaimer_msg")}),new ol.Attribution({html:this.options.logoPayoff?this._getHTMLLogoPayoff():this._getHTMLLogo()})],url:this._formatTileUrl("nautical",this._depthUnit,this._safetyDepthLevel,!transparent,this.isUGCEnabled),maxResolution:this.options.MAX_RESOLUTION,minResolution:this.options.MIN_RESOLUTION})},BoatingNavionicsMap.prototype._createSourceOfSonarChartLayer=function(transparent){return null==transparent&&(transparent=!1),new ol.source.XYZ({crossOrigin:"anonymous",attributions:[new ol.Attribution({html:this.translate("disclaimer_msg")}),new ol.Attribution({html:this.options.logoPayoff?this._getHTMLLogoPayoff():this._getHTMLLogo()})],url:this._formatTileUrl("sonar",this._depthUnit,this._safetyDepthLevel,!transparent,this.isUGCEnabled),maxResolution:this.options.MAX_RESOLUTION,minResolution:this.options.MIN_RESOLUTION})},BoatingNavionicsMap}(Map)});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC.$,root.JNC._,root.JNC.Backbone,root.JNC.ol,root.JNC.Views.Map)}(this,function(JNC,$,_,Backbone,ol,Map){var _ref;return JNC.Views.SkiNavionicsMap=function(_super){function SkiNavionicsMap(){return _ref=SkiNavionicsMap.__super__.constructor.apply(this,arguments)}var EVENTS,INTERNAL_SKI_NAVIONICS_MAP_DEFAULTS;return __extends(SkiNavionicsMap,_super),EVENTS={GA_MAP_LOADED:"MapLoaded",GA_MAP_OVERLAY_CHANGE:"OverlayChange"},INTERNAL_SKI_NAVIONICS_MAP_DEFAULTS={distanceUnit:JNC.DISTANCE_UNIT.KILOMETERS,depthUnit:JNC.DEPTH_UNIT.METERS,safetyDepth:JNC.SAFETY_DEPTH_LEVEL.LEVEL1,bingKey:"AgCOqzOG3mwqjI6p8nnlSuZiNaf1bfxPi6ezB4b5R0pL3N2jOpVMDZkSg5M9DD5C",BASE_TILE_SERVER:"https://tile{1-5}.navionics.io",TILE_SUFFIX:"/tile/{z}/{x}/{y}",KEY_REQ_SUFFIX:"/tile/get_key",OSM_URL:"//tile.navionics.com/outdoors/{z}/{x}/{y}.png",OSM_ATTR:"&copy; Navionics",ZoomControl:!1,LayerControl:!1,navKey:!1},SkiNavionicsMap.prototype.events=function(){return _.extend(SkiNavionicsMap.__super__.events.apply(this,arguments),{"change .overlay-dropdown":"onOverlayChange"})},SkiNavionicsMap.prototype.initialize=function(options){if(this._theInternalOptions=_.extend({},INTERNAL_SKI_NAVIONICS_MAP_DEFAULTS,options),this._theInternalOptions.TilesDomain=window.location.hostname,!this._theInternalOptions.navKey)throw"Map key is not set";return this.currentOverlay=JNC.MAP_LAYERS.NO_OVERLAY,SkiNavionicsMap.__super__.initialize.call(this,this._theInternalOptions),this.setDistanceUnit(this._theInternalOptions.distanceUnit),this.showZoomControl(this._theInternalOptions.ZoomControl),this.showLayerControl(this._theInternalOptions.LayerControl)},SkiNavionicsMap.prototype.onMapReady=function(e){return this._mapReady=!0,this._processFunctionCallQueue(),this.gaSendEvent("SkiMap",EVENTS.GA_MAP_LOADED,this._theInternalOptions.navKey)},SkiNavionicsMap.prototype.attachLayersOnMap=function(){var url,_this=this;return url=INTERNAL_SKI_NAVIONICS_MAP_DEFAULTS.BASE_TILE_SERVER+INTERNAL_SKI_NAVIONICS_MAP_DEFAULTS.KEY_REQ_SUFFIX,this._ensureNavToken(url,function(){return _this._layerSkiSource=_this._createSourceOfSkiLayer(!1),_this._layerSki=new ol.layer.Tile({source:_this._layerSkiSource}),_this._map.addLayer(_this._layerSki),_this._reorderLayers()})},SkiNavionicsMap.prototype._formatTileUrl=function(showTerrain){var params,sAlpha;return sAlpha=showTerrain?"FALSE":"TRUE",params=$.param({LAYERS:"config_1_0_0_1",TRANSPARENT:sAlpha,navtoken:this.navToken}),INTERNAL_SKI_NAVIONICS_MAP_DEFAULTS.BASE_TILE_SERVER+INTERNAL_SKI_NAVIONICS_MAP_DEFAULTS.TILE_SUFFIX+"?"+params},SkiNavionicsMap.prototype.showLayerControl=function(isVisible){var _this=this;return null==isVisible&&(isVisible=!0),this._executeFunction(function(){return _this.$(".layer-control-container").toggle(isVisible)})},SkiNavionicsMap.prototype.onOverlayChange=function(e){var value;return null!=e&&e.stopPropagation(),value=this.$(".overlay-dropdown").val(),this.setMapOverlay(value),this.gaSendEvent("SkiMap",EVENTS.GA_MAP_OVERLAY_CHANGE+":"+value,this._theInternalOptions.navKey),this},SkiNavionicsMap.prototype.setMapOverlay=function(type,force){if(null==force&&(force=!1),null!=type&&this._isValidOverlay(type)&&(this.currentOverlay!==type||force))return this.currentOverlay=type,this._reorderLayers()},SkiNavionicsMap.prototype._reorderLayers=function(){var layers;if(null!=this._layerSki){if(layers=this.getLayers(),null!=layers&&(null!=this._layerSki&&layers.remove(this._layerSki),null!=this._layerSkiTransparent&&layers.remove(this._layerSkiTransparent),null!=this._layerOSM&&layers.remove(this._layerOSM),null!=this._layerBing&&layers.remove(this._layerBing)),this.currentOverlay===JNC.MAP_LAYERS.NO_OVERLAY)layers.insertAt(0,this._layerSki);else switch(null==this._layerSkiTransparent&&(this._layerSkiTransparent=this._createLayerSkiTransparent()),layers.insertAt(0,this._layerSkiTransparent),this.currentOverlay){case JNC.MAP_LAYERS.TERRAIN:null==this._layerOSM&&(this._layerOSM=this._createOSMLayer()),layers.insertAt(0,this._layerOSM);break;case JNC.MAP_LAYERS.SATELLITE:null==this._layerBing&&(this._layerBing=this._createBingLayer()),layers.insertAt(0,this._layerBing)}return this.revalideMap()}},SkiNavionicsMap.prototype._isValidOverlay=function(overlay){return _.contains(_.values(JNC.MAP_LAYERS),overlay)},SkiNavionicsMap.prototype._createOSMLayer=function(){return new ol.layer.Tile({source:new ol.source.XYZ({url:this._theInternalOptions.OSM_URL,maxResolution:this._theInternalOptions.MAX_RESOLUTION,minResolution:this._theInternalOptions.MIN_RESOLUTION,crossOrigin:"anonymous",attributions:[new ol.Attribution({html:this._theInternalOptions.OSM_ATTR},ol.source.OSM.DATA_ATTRIBUTION)]})})},SkiNavionicsMap.prototype._createLayerSkiTransparent=function(){return this._layerSkiTransparentSource=this._createSourceOfSkiLayer(!0),new ol.layer.Tile({source:this._layerSkiTransparentSource})},SkiNavionicsMap.prototype._createLayerSki=function(){return this._layerSkiSource=this._createSourceOfSkiLayer(!1),new ol.layer.Tile({source:this._layerSkiSource})},SkiNavionicsMap.prototype._createBingLayer=function(){return new ol.layer.Tile({source:new ol.source.BingMaps({key:this._theInternalOptions.bingKey,imagerySet:"AerialWithLabels",maxResolution:this._theInternalOptions.MAX_RESOLUTION,minResolution:this._theInternalOptions.MIN_RESOLUTION})})},SkiNavionicsMap.prototype._createSourceOfSkiLayer=function(transparent){return null==transparent&&(transparent=!1),new ol.source.XYZ({crossOrigin:"anonymous",attributions:[new ol.Attribution({html:this.translate("disclaimer_msg")}),new ol.Attribution({html:this._getHTMLLogo()})],url:this._formatTileUrl(!transparent),extent:this._theInternalOptions.BOUNDS,maxResolution:this._theInternalOptions.MAX_RESOLUTION,minResolution:this._theInternalOptions.MIN_RESOLUTION})},SkiNavionicsMap}(Map)});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC._,root.JNC.ol,root.JNC.Views.BoatingNavionicsMap,root.JNC.utils.KmlDuplicator,root.JNC.utils.Converter)}(this,function(JNC,_,ol,BoatingNavionicsMap,KmlDuplicator,Converter){var _ref;return JNC.Views.ProductViewer=function(_super){function ProductViewer(){return _ref=ProductViewer.__super__.constructor.apply(this,arguments)}var EVENT;return __extends(ProductViewer,_super),EVENT={SELECT_PRODUCT:"event:selectProduct",HIGHLIGHT_PRODUCT:"event:highlightProduct"},ProductViewer.prototype._balloonsDisabled=!0,ProductViewer.prototype.layersOfSelectedProductList=null,ProductViewer.prototype.layersOfProductList=null,ProductViewer.prototype.productItemSelectLayers=null,ProductViewer.prototype.productItemNormalLayers=null,ProductViewer.prototype.selectedProductItemCode=null,ProductViewer.prototype.initialize=function(options){var _this=this;return _.bindAll(this,"onPointerHover","onPointerClick","_changeSelectedLayersOpacity"),ProductViewer.__super__.initialize.call(this,_.defaults(options,{ZoomControl:!0,SonarControl:!0,LayerControl:!1,DistanceControl:!1})),this.layersOfSelectedProductList={},this.layersOfProductList={},this.productItemSelectLayers={},this.productItemNormalLayers={},this.listenTo(JNC.Events,"event:catalog:productListCreated",this.productListCreated),this.listenTo(JNC.Events,"event:catalog:productItemCreated",this.productItemCreated),this.listenTo(JNC.Events,"event:catalog:selectProductItem",this.selectProductItem),this.listenTo(JNC.Events,"event:catalog:highlightProductItem",this.highlightProductItem),this.listenTo(JNC.Events,"event:catalog:lowlightProductItem",this.lowlightProductItem),this.listenTo(JNC.Events,"event:catalog:showProductList",this.showProductList),this.listenTo(JNC.Events,"event:catalog:hideProductList",this.hideProductList),this.listenTo(JNC.Events,"map:click",this.onPointerClick),this.listenTo(JNC.Events,"map:mousePosition",this.onPointerHover),this.listenTo(JNC.Events,"event:catalog:clear",function(){var key,_ref1,_ref2,_results;_ref1=_this.layersOfSelectedProductList;for(key in _ref1)_ref1[key],_this.hideProductList(key);_ref2=_this.layersOfProductList,_results=[];for(key in _ref2)_ref2[key],_results.push(_this.hideProductList(key));return _results}),this.listenTo(JNC.Events,"UnSelect:Product",this.unSelectProduct),this._view.on("change:resolution",this._changeSelectedLayersOpacity),this._duplicator=new KmlDuplicator(this)},ProductViewer.prototype.start=function(){return this.resize()},ProductViewer.prototype.productListCreated=function(productListId){if(null!=this.layersOfProductList[productListId])throw new Error("Already exist list: "+productListId);if(null==this.layersOfSelectedProductList[productListId]&&(this.layersOfSelectedProductList[productListId]=new ol.layer.Group,this.productItemSelectLayers[productListId]={}),null==this.layersOfProductList[productListId])return this.layersOfProductList[productListId]=new ol.layer.Group,this.productItemNormalLayers[productListId]={}},
ProductViewer.prototype.productItemCreated=function(productItemCode,productListId,kmlurl,color){var source;if(null==this.layersOfProductList[productListId])throw new Error("Not Exist List: "+productListId);if(null!=this.productItemNormalLayers[productListId][productItemCode])throw new Error("Already exist item: "+productItemCode+" on list: "+productListId);if(source=new ol.source.KML({extractStyles:!1,crossOrigin:"anonymous",projection:"EPSG:3857",url:kmlurl}),null==this.productItemSelectLayers[productListId][productItemCode]&&(this.productItemSelectLayers[productListId][productItemCode]=new ol.layer.Vector({source:source}),this.productItemSelectLayers[productListId][productItemCode].setStyle(this._createStyleFroFiller(color,.2))),null==this.productItemNormalLayers[productListId][productItemCode])return this.productItemNormalLayers[productListId][productItemCode]=new ol.layer.Vector({source:source,style:function(feature,resolution){var style;return style=new ol.style.Style({stroke:new ol.style.Stroke({color:color,width:2})}),[style]}}),this.layersOfProductList[productListId].getLayers().push(this.productItemNormalLayers[productListId][productItemCode]),this._duplicator.pushLayer(this.productItemNormalLayers[productListId][productItemCode])},ProductViewer.prototype._createStyleFroFiller=function(color,alpha){var fill,stroke;return fill=new ol.style.Fill({color:Converter.hexToRGBA(color,alpha)}),stroke=new ol.style.Stroke({color:color,width:4}),[new ol.style.Style({fill:fill,stroke:stroke})]},ProductViewer.prototype.selectProductItem=function(productItemCode,productListId,tryAutoZoom){if(null==tryAutoZoom&&(tryAutoZoom=!0),null==this.layersOfProductList[productListId])throw new Error("Not Exist List: "+productListId);if(null==this.productItemNormalLayers[productListId][productItemCode])throw new Error("Not exist item: "+productItemCode+" on list: "+productListId);this.selectedProductItemCode=productItemCode,this.selectedProductListId=productListId,null!=this.layersOfSelectedProductList[productListId]&&null!=this.productItemSelectLayers[productListId][productItemCode]&&(this.layersOfSelectedProductList[productListId].getLayers().clear(),this.layersOfSelectedProductList[productListId].getLayers().push(this.productItemSelectLayers[productListId][productItemCode])),null!=this.productItemNormalLayers[productListId][productItemCode]&&tryAutoZoom&&this.centerLayer(this.productItemNormalLayers[productListId][productItemCode])},ProductViewer.prototype.highlightProductItem=function(productItemCode,productListId){if(null!=this.layersOfSelectedProductList[productListId]&&null!=this.productItemSelectLayers[productListId][productItemCode])return this.layersOfSelectedProductList[productListId].getLayers().push(this.productItemSelectLayers[productListId][productItemCode])},ProductViewer.prototype.lowlightProductItem=function(productItemCode,productListId){if(null!=this.layersOfSelectedProductList[productListId]&&null!=this.productItemSelectLayers[productListId][productItemCode])return this.layersOfSelectedProductList[productListId].getLayers().remove(this.productItemSelectLayers[productListId][productItemCode])},ProductViewer.prototype.unSelectProduct=function(){return this.selectedProductItemCode=null},ProductViewer.prototype.showProductList=function(productListId){if(null==this.layersOfProductList[productListId])throw new Error("Not Exist List: "+productListId);if(null!=this.layersOfSelectedProductList[productListId]&&(this.addLayer(this.layersOfSelectedProductList[productListId]),this.selectedProductItemCode&&this.highlightProductItem(this.selectedProductItemCode,productListId)),null!=this.layersOfProductList[productListId])return this.addLayer(this.layersOfProductList[productListId])},ProductViewer.prototype.showProducts=function(productItemCode,productListId,tryAutoZoom){var mainLayer;if(null==tryAutoZoom&&(tryAutoZoom=!0),null==this.layersOfProductList[productListId])throw new Error("Not Exist List: "+productListId);if(null==this.productItemNormalLayers[productListId][productItemCode])throw new Error("Not exist item: "+productItemCode+" on list: "+productListId);return null!==productItemCode&&this.selectProductItem(productItemCode,productListId,tryAutoZoom),mainLayer=this.productItemNormalLayers[productListId][productItemCode],"ready"===mainLayer.getSource().getState()?(null!=tryAutoZoom&&this.centerLayer(mainLayer),this.showProductList(productListId,tryAutoZoom)):mainLayer.getSource().once("change",_.bind(this._derredCenterlayer,this,mainLayer,productListId,tryAutoZoom))},ProductViewer.prototype._derredCenterlayer=function(layer,productListId,tryAutoZoom){if("ready"===layer.getSource().getState())return null!=tryAutoZoom&&this.centerLayer(layer),this.showProductList(productListId)},ProductViewer.prototype.hideProductList=function(productListId){if(null!=this.layersOfSelectedProductList[productListId]&&(this.removeLayer(this.layersOfSelectedProductList[productListId]),this.layersOfSelectedProductList[productListId].getLayers().clear()),null!=this.layersOfProductList[productListId])return this.removeLayer(this.layersOfProductList[productListId])},ProductViewer.prototype.removeProductList=function(productListId){var layerId,_ref1,_ref2,_ref3,_ref4,_results;this.hideProductList(productListId),null!=(_ref1=this.layersOfProductList[productListId])&&_ref1.getLayers().clear(),null!=(_ref2=this.layersOfSelectedProductList[productListId])&&_ref2.getLayers().clear(),delete this.layersOfProductList[productListId],delete this.layersOfSelectedProductList[productListId],_ref3=this.productItemSelectLayers[productListId];for(layerId in _ref3)_ref3[layerId],delete this.productItemSelectLayers[productListId][layerId];_ref4=this.productItemNormalLayers[productListId],_results=[];for(layerId in _ref4)_ref4[layerId],_results.push(delete this.productItemNormalLayers[productListId][layerId]);return _results},ProductViewer.prototype.onPointerHover=function(e){var featureName;if(!e.dragging)return featureName=this._getFeatureNameAtPixel(e.pixel),JNC.Events.trigger(EVENT.HIGHLIGHT_PRODUCT,featureName)},ProductViewer.prototype.onPointerClick=function(e){var featureName;if(null!=(featureName=this._getFeatureNameAtPixel(e.pixel)))return JNC.Events.trigger(EVENT.SELECT_PRODUCT,featureName)},ProductViewer.prototype._getFeatureNameAtPixel=function(pixel){var feature,featureName,result,sonarChartSuf;return result=null,feature=this._map.forEachFeatureAtPixel(pixel,function(feature){if(null!=feature.get("name"))return feature}),null!=feature&&null!=(featureName=feature.get("name"))&&(sonarChartSuf="SC",-1!==featureName.indexOf(sonarChartSuf,featureName.length-sonarChartSuf.length)&&(featureName="GAR-"+featureName),result=featureName),result},ProductViewer.prototype._changeSelectedLayersOpacity=function(){var zoom;return zoom=this._view.getZoom(),_.each(_.values(this.layersOfSelectedProductList),function(group){return group.setOpacity(1-.1*zoom)})},ProductViewer}(BoatingNavionicsMap)});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC.$,root.JNC._,root.JNC.Backbone,root.JNC.ol,root.JNC.Views.BoatingNavionicsMap,root.JNC.utils.Converter)}(this,function(JNC,$,_,Backbone,ol,BoatingNavionicsMap,Converter){var _ref;return JNC.Views.DealerViewer=function(_super){function DealerViewer(){return _ref=DealerViewer.__super__.constructor.apply(this,arguments)}var EVENTS,PADDING;return __extends(DealerViewer,_super),DealerViewer.prototype.dealerFinderTemplate=JNC.TPL["map/dealer_finder"],PADDING=40,EVENTS={SHOW_TEXT:"event:showText"},DealerViewer.prototype.default={zoom:4,url:"http://webapp.navionics.com"},DealerViewer.prototype.events=function(){return _.extend(_.result(BoatingNavionicsMap.prototype,"events"),{"click .jnc-radio-group .jnc-radio-group-button":"_onModeSwitch","keyup .jnc-search-panel-address":"_onKeypressAddress","keyup .jnc-search-panel-name":"_onKeypressName","keyup .jnc-dealer-input":"_toggleClearButton","focusin .jnc-dealer-input":"_toggleClearButton","change .jnc-dealer-input":"_toggleClearButton","click .jnc-close-button":"_clearInput"})},DealerViewer.prototype.initialize=function(options){return null==options&&(options={}),_.bindAll(this,"_addDealersFeatures","_onAutoCompleteItemSelected","_checkLayerChooser","_fetchDealersByPosition"),_.defaults(options,this.default),DealerViewer.__super__.initialize.call(this,options),this.$(".navionics-map-container").prepend(this.dealerFinderTemplate(this)),this._initAutoComplete(),this._bindEvents(),this._toggleClearButton(),this.iconStyle=new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],src:JNC.getContext("/map/pinattach.png")})})},DealerViewer.prototype.attachLayersOnMap=function(){return DealerViewer.__super__.attachLayersOnMap.apply(this,arguments),this.addLayer(this._getLayerOfDealers())},DealerViewer.prototype.onMapReady=function(e){return DealerViewer.__super__.onMapReady.call(this,e),this._checkLayerChooser()},DealerViewer.prototype._checkLayerChooser=function(){var enoughSpace,size;if(this.options.LayerControl&&null!=(size=this.getRowMap().getSize()))return enoughSpace=size[0]>this.$(".jnc-dealer-locator").width()+this.$(".layer-control-container").width()+PADDING,this.showLayerControl(enoughSpace)},DealerViewer.prototype._clearInput=function(){return this.$(".jnc-dealer-input").val("").trigger("change"),this.hideBalloons()},DealerViewer.prototype._toggleClearButton=function(){var isVisible;return isVisible=_.any(this.$(".jnc-dealer-input"),function(input){return $(input).val().length>0}),this.$(".jnc-close-button").toggle(isVisible)},DealerViewer.prototype._initAutoComplete=function(){var _this=this;if($.ui)return this.$(".jnc-search-panel-address").autocomplete({source:function(request,response){return _this._lookupAddresses(request.term,function(data){if("OK"===data.status)return response(_this._convertDealersAddressesToAutocompleteSource(data.results))})},select:this._onAutoCompleteItemSelected}),this.$(".jnc-search-panel-name").autocomplete({source:function(request,response){return _this._lookupDealers(request.term,function(data){return response(_this._convertDealersNamesToAutocompleteSource(data))})},select:this._onAutoCompleteItemSelected})},DealerViewer.prototype._convertDealersAddressesToAutocompleteSource=function(data){return _.map(data,function(item){return{label:item.formatted_address,latitude:item.geometry.location.lat,longitude:item.geometry.location.lng}})},DealerViewer.prototype._convertDealersNamesToAutocompleteSource=function(data){return _.map(data,function(item){return{label:item.name,latitude:item.lat,longitude:item.lng}})},DealerViewer.prototype._onAutoCompleteItemSelected=function(e,ui){if(e.stopPropagation(),this.hideBalloons(),this.getIdByName(ui.item.label).length>0)return this.setZoom(8),this.showByName(ui.item.label)},DealerViewer.prototype._onModeSwitch=function(e){var $target;if(null!=e&&($target=$(e.target),!$target.hasClass("selected")))return $target.addClass("selected").siblings().removeClass("selected"),this.$(".jnc-dealer-input").val("").trigger("change").hide().filter("."+$target.data("type")).show()},DealerViewer.prototype._onKeypressAddress=function(e){if(null!=e&&13===e.which)return e.stopPropagation(),this.hideBalloons(),this.lookupAddress($(e.currentTarget).val())},DealerViewer.prototype._onKeypressName=function(e){if(null!=e&&13===e.which)return e.stopPropagation(),this._lookupDealer($(e.currentTarget).val())},DealerViewer.prototype._lookupDealers=function(dealerName,callback){var _this=this;return $.ajax({timeout:3e3,dataType:"json",url:this._theMapInternalOptions.url+"/api/v2/dealers/name/"+dealerName,success:function(dealers){return _this._addDealersFeatures(dealers),"function"==typeof callback?callback(dealers):void 0}})},DealerViewer.prototype._lookupDealer=function(dealerName){var _this=this;if(""!==dealerName)return this.hideBalloons(),this.showByName(dealerName),this._lookupDealers(dealerName,function(dealers){return dealers.length>0?(_this.setZoom(8),_this.showByName(dealers[0].name)):JNC.Events.trigger(EVENTS.SHOW_TEXT,"not-found-growl")})},DealerViewer.prototype._bindEvents=function(){return this.listenTo(JNC.Events,"map:resize",this._checkLayerChooser),this._map.on("moveend",this._fetchDealersByPosition)},DealerViewer.prototype._fetchDealersByPosition=function(){var bounds;return bounds=this.getBoundsArea(6),$.getJSON(this._theMapInternalOptions.url+"/api/v2/dealers/query/",{ne:bounds[3]+","+bounds[2],sw:bounds[1]+","+bounds[0]},this._addDealersFeatures)},DealerViewer.prototype._addDealersFeatures=function(dealers){var features,_this=this;return features=[],_.each(dealers,function(dealer){if(null!=dealer.id&&!_this._isMyFeature(dealer.id))return features.push(_this._makeDealerFeature(dealer))}),this._getTheCurrentSetOfDealers().addFeatures(features)},DealerViewer.prototype._clickEvent=function(mapBrowserEvent){var feature,features,_this=this;if(this._map===mapBrowserEvent.map)return features=this._getClosestFeatures(mapBrowserEvent.coordinate),feature=_.find(features,function(feature){return _this._isMyFeature(feature.getId())}),null!=feature?this._showDealerBalloon(feature):void 0},DealerViewer.prototype._showDealerBalloon=function(feature){var _this=this;return null!=feature.get("description")?this._showDealer(feature):$.get(this._theMapInternalOptions.url+"/api/v2/dealers/id/"+feature.getId(),function(data){return feature.set("description",data),_this._showDealer(feature)})},DealerViewer.prototype._showDealer=function(feature){var coordinate,size,verticalOffset;return size=this.iconStyle.getImage().getSize(),verticalOffset=null!=size?-size[1]:0,coordinate=feature.getGeometry().getCoordinates(),this.showBalloon({content:feature.get("description"),offset:[1,verticalOffset],coordinates:coordinate,closeButton:!0})},DealerViewer.prototype._isMyFeature=function(id){return null!=id&&null!==this._getTheCurrentSetOfDealers().getFeatureById(id)},DealerViewer.prototype._getLayerOfDealers=function(){return null==this._vectorLayerOfDealers&&(this._vectorLayerOfDealers=new ol.layer.Vector({source:this._getTheCurrentSetOfDealers()})),this._vectorLayerOfDealers},DealerViewer.prototype._getTheCurrentSetOfDealers=function(){return null==this._currentSetOfDealers&&(this._currentSetOfDealers=new ol.source.Vector),this._currentSetOfDealers},DealerViewer.prototype._makeDealerFeature=function(dealer){var coordinate,iconFeature;return _.isString(dealer.lng)&&(dealer.lng=parseFloat(dealer.lng)),_.isString(dealer.lat)&&(dealer.lat=parseFloat(dealer.lat)),_.isString(dealer.id)&&(dealer.id=parseInt(dealer.id,10)),coordinate=Converter.standardMercatorToWeb([dealer.lng,dealer.lat]),iconFeature=new ol.Feature({name:dealer.name,geometry:new ol.geom.Point(coordinate)}),iconFeature.setId(dealer.id),iconFeature.setStyle(this.iconStyle),iconFeature},DealerViewer.prototype.getIdByName=function(name){var result;return result=[],this._getTheCurrentSetOfDealers().forEachFeature(function(feature){feature.get("name")===name&&result.push(feature.getId())}),result},DealerViewer.prototype.showById=function(id){var feature;if(null!=(feature=this._getTheCurrentSetOfDealers().getFeatureById(id)))return this._showDealerBalloon(feature)},DealerViewer.prototype.showByName=function(name){var feature;if(null!=(feature=this._getTheCurrentSetOfDealers().forEachFeature(function(feature){return feature.get("name")===name?feature:void 0})))return this._showDealerBalloon(feature)},DealerViewer}(BoatingNavionicsMap)}),function(root,factory){factory(root.JNC,root.JNC.$,root.JNC._,root.JNC.utils.GoogleAnalytics)}(this,function(JNC,$,_,GoogleAnalytics){return JNC.Views.gNavionicsOverlay=function(){function gNavionicsOverlay(options){switch(_.defaults(options,{navKey:null,chartType:JNC.Views.gNavionicsOverlay.CHARTS.NAUTICAL,isTransparent:!0,depthUnit:JNC.DEPTH_UNIT.METERS,depthLevel:JNC.SAFETY_DEPTH_LEVEL.LEVEL1,logoPayoff:!1,divId:null}),this.navKey=options.navKey,this.servers=expandUrl(""+CONFIG.TILE_SERVER),this.tileSize="undefined"!=typeof google&&null!==google?new google.maps.Size(256,256):void 0,this.maxZoom=16,this.minZoom=0,this.navToken=null,this.tileDomain=window.location.hostname,this._logoPayoff=options.logoPayoff,this.id=Math.floor(1e7*Math.random()),this.logoId="g-navionics-logo_"+this.id,this.ackId="g-navionics-ack_"+this.id,this.divId=options.divId,this._layer=this._getLayerTemplate(options.chartType,options.depthUnit,options.depthLevel),this._transparent=this._convertTransparencyToUpperString(options.isTransparent),options.chartType){case JNC.Views.gNavionicsOverlay.CHARTS.NAUTICAL:this.name="NauticalCharts",this.alt="Navionics NauticalChart";break;case JNC.Views.gNavionicsOverlay.CHARTS.SONAR:this.name="SonarCharts",this.alt="Navionics SonarCharts";break;case JNC.Views.gNavionicsOverlay.CHARTS.SKI:this.name="Ski",this.alt="Navionics Ski Chart"}this._initialized=!1,GoogleAnalytics.sendPageView("navTracker.send","pageview")}var CONFIG,expandUrl;return gNavionicsOverlay.prototype._pendingTiles=[],CONFIG={TILE_SERVER:"https://tile{1-5}.navionics.io",TILE_SUFFIX:"/tile",KEY_REQ_SUFFIX:"/tile/get_key"},gNavionicsOverlay.CHARTS={NAUTICAL:"nautical",SONAR:"sonar",SKI:"ski"},gNavionicsOverlay.prototype.getTile=function(coord,zoom,ownerDocument){var $img;return this._initialized||(this._initialized||this._addComponents(ownerDocument),GoogleAnalytics.sendEvent("navTracker.send","event","GoogleMap","MapLoaded",this.navKey)),$img=$("<img/>").attr({height:this.tileSize.height,width:this.tileSize.width}).hide().one("load",function(){return $img.show()}),this._setTileUrl($img,coord,zoom),$img.get(0)},gNavionicsOverlay.prototype.releaseTile=function(tile){return $(tile).off()},gNavionicsOverlay.prototype._addComponents=function(ownerDocument){var _this=this;return this._initialized=!0,null!==this.divId?$("#"+this.divId).append(this._createAcknowledgements()).append(this._createLogo()):$(".gm-style").each(function(index,element){return 0===$(element).find("#"+_this.logoId).length&&0===$(element).find(".g-navionics-overlay-ackno").length?$(element).append(_this._createAcknowledgements()).append(_this._createLogo()):void 0})},gNavionicsOverlay.prototype._createAcknowledgements=function(){var $container,$link;return $link=$("<a/>").attr({href:"http://www.navionics.com/en/acknowledgements",target:"_new",id:this.ackId}).html("Acknowledgements"),$container=$("<div/>").attr({class:"gm-style-cc g-navionics-overlay-ackno"}).html(" | Not to be used for navigation"),$container.prepend($link)},gNavionicsOverlay.prototype._createLogo=function(){return $("<a/>").attr({href:"http://www.navionics.com",target:"_blank",class:!0===this._logoPayoff?"g-navionics-overlay-logo-payoff":"g-navionics-overlay-logo",id:this.logoId})},gNavionicsOverlay.prototype._setTileUrl=function($img,coord,zoom){var setUrl,_this=this;return setUrl=function(token){return $img.attr({src:_this.servers[Math.floor(5*Math.random())]+(CONFIG.TILE_SUFFIX+"/")+zoom+"/"+coord.x+"/"+coord.y+"?LAYERS="+_this._layer+"&TRANSPARENT="+_this._transparent+"&navtoken="+token})},this.navToken?setUrl(this.navToken):(this._pendingTiles.push(setUrl),1===this._pendingTiles.length?this._requestNavToken(function(data){var _results;for(_results=[];_this._pendingTiles.length;)_results.push(_this._pendingTiles.pop()(data));return _results}):void 0)},expandUrl=function(url){var charCode,i,match,startCharCode,stop,stopCharCode,urls;if(urls=[],match=/\{([a-z])-([a-z])\}/.exec(url)){for(startCharCode=match[1].charCodeAt(0),stopCharCode=match[2].charCodeAt(0),charCode=void 0,charCode=startCharCode;charCode<=stopCharCode;)urls.push(url.replace(match[0],String.fromCharCode(charCode))),++charCode;return urls}if(match=match=/\{(\d+)-(\d+)\}/.exec(url)){for(stop=parseInt(match[2],10),i=parseInt(match[1],10);i<=stop;)urls.push(url.replace(match[0],i.toString())),i++;return urls}return urls.push(url),urls},gNavionicsOverlay.prototype._requestNavToken=function(callBack){var _this=this;return $.ajax({url:this.servers[Math.floor(5*Math.random())]+(CONFIG.KEY_REQ_SUFFIX+"/")+this.navKey+"/"+this.tileDomain,async:!0,crossDomain:!0,dataType:"text",cache:!1,error:function(){},success:function(data){return _this.navToken=data,callBack(data)}})},gNavionicsOverlay.prototype._getLayerTemplate=function(type,depthUnit,depthLevel){switch(type){case JNC.Views.gNavionicsOverlay.CHARTS.SKI:return"config_1_0_0_1";default:return"config_"+this._convertDepthUnitToInt(depthUnit)+"_"+this._convertDepthLevelToInt(depthLevel)+"_"+this._convertTypeToInt(type)}},gNavionicsOverlay.prototype._convertDepthUnitToInt=function(depthUnit){switch(depthUnit){case JNC.DEPTH_UNIT.FEET:return 2;case JNC.DEPTH_UNIT.FATHOMS:return 0;default:return 1}},gNavionicsOverlay.prototype._convertDepthLevelToInt=function(depthLevel){return depthLevel.replace(/\D/g,"")},gNavionicsOverlay.prototype._convertTypeToInt=function(type){switch(type){case JNC.Views.gNavionicsOverlay.CHARTS.SONAR:return 1;default:return 0}},gNavionicsOverlay.prototype._convertTransparencyToUpperString=function(isTransparent){return(!!isTransparent).toString().toUpperCase()},gNavionicsOverlay.prototype.onAdd=function(){},gNavionicsOverlay}.call(this)});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC.$,root.JNC._,root.JNC.Views.gNavionicsOverlay)}(this,function(JNC,$,_,gNavionicsOverlay){return JNC.Google.NavionicsOverlay=function(_super){function NavionicsOverlay(options){NavionicsOverlay.__super__.constructor.call(this,options)}return __extends(NavionicsOverlay,_super),NavionicsOverlay.CHARTS={NAUTICAL:"nautical",SONAR:"sonar",SKI:"ski"},NavionicsOverlay}(gNavionicsOverlay)});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC.Views.BoatingNavionicsMap,root.JNC.utils.BannerHandler)}(this,function(JNC,BoatingNavionicsMap,BannerHandler){var _ref;return JNC.Views.BannerNavionicsMap=function(_super){function BannerNavionicsMap(){return _ref=BannerNavionicsMap.__super__.constructor.apply(this,arguments)}return __extends(BannerNavionicsMap,_super),BannerNavionicsMap.prototype.initialize=function(options){var _this=this;return BannerNavionicsMap.__super__.initialize.call(this,options),this.bannerHandler=new BannerHandler({element:this.options.tagId,navKey:this.options.navKey}),this._executeFunction(function(){return _this.bannerHandler.replaceLogo()})},BannerNavionicsMap.prototype._getHTMLLogo=function(){return""},BannerNavionicsMap}(BoatingNavionicsMap)});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC.$,root.JNC._,root.JNC.utils.NavionicsOverlayBuilder)}(this,function(JNC,$,_,NavionicsOverlayBuilder){var _ref;if("undefined"!=typeof L&&null!==L)return JNC.Leaflet.NavionicsOverlay=function(_super){function NavionicsOverlay(){return _ref=NavionicsOverlay.__super__.constructor.apply(this,arguments)}return __extends(NavionicsOverlay,_super),NavionicsOverlay.prototype.navionicsOverlayBuilder=null,null==JNC.i18n&&JNC.setTranslationFunction(),NavionicsOverlay.prototype.initialize=function(options){return null==options&&(options={}),this.navionicsOverlayBuilder=new NavionicsOverlayBuilder(options),this.logoPayoff=options.logoPayoff,options=_.omit(options,_.keys(["navKey","chartType","isTransparent","depthUnit","depthLevel"])),NavionicsOverlay.__super__.initialize.call(this,"",_.defaults(options,{minZoom:0,maxZoom:16,tileSize:256,subdomains:"12345"}))},NavionicsOverlay.prototype.onAdd=function(map){var _this=this;return this._addComponents($(map.getContainer())),this.navionicsOverlayBuilder.requestNavToken(function(tileUrl){return _this.setUrl(tileUrl.replace("{1-5}","{s}")),NavionicsOverlay.__super__.onAdd.call(_this,map)})},NavionicsOverlay.prototype.onRemove=function(map){var _ref1,_ref2;return null!=(_ref1=this.$logo)&&_ref1.detach(),null!=(_ref2=this.$acknowledgements)&&_ref2.detach(),NavionicsOverlay.__super__.onRemove.call(this,map)},NavionicsOverlay.prototype._addComponents=function($container){return this.$acknowledgements=this._createAcknowledgements(),this.$logo=this._createLogo(),$container.append(this.$acknowledgements).append(this.$logo)},NavionicsOverlay.prototype._createAcknowledgements=function(){var disclaimer,link;return link=$("<a/>").attr({href:"http://www.navionics.com/en/acknowledgements",target:"_new"}).html("Acknowledgements"),disclaimer=$("<span/>").html(" | Not to be used for navigation"),$("<div/>").addClass("jnc-navionics-overlay-ackno").append(link).append(disclaimer)},NavionicsOverlay.prototype._createLogo=function(){return $("<a/>").attr({href:"//www.navionics.com",target:"_blank",class:this.logoPayoff?"g-navionics-overlay-logo-payoff":"g-navionics-overlay-logo"})},JNC.Leaflet.NavionicsOverlay=NavionicsOverlay,NavionicsOverlay}(L.TileLayer)});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC.Views.TranslatableView)}(this,function(JNC,TranslatableView){var _ref;return JNC.Views.Catalog=function(_super){function Catalog(){return _ref=Catalog.__super__.constructor.apply(this,arguments)}return __extends(Catalog,_super),Catalog.prototype.template=JNC.TPL["catalog/catalog"],Catalog.prototype.products=null,Catalog.prototype.initialize=function(options){return Catalog.__super__.initialize.apply(this,arguments),this.products=options.products},Catalog.prototype.render=function(){var context;return context={translate:this.translate,getContext:JNC.getContext,products:this.products},this.$el.html(this.template(context)),this},Catalog}(TranslatableView)});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC.$,root.JNC.Views.TranslatableView)}(this,function(JNC,$,TranslatableView){var _ref;return JNC.Views.ProductItem=function(_super){function ProductItem(){return _ref=ProductItem.__super__.constructor.apply(this,arguments)}var EVENTS;return __extends(ProductItem,_super),ProductItem.prototype.template=JNC.TPL["catalog/product_item"],ProductItem.prototype.className="jnc-params-link",ProductItem.prototype.region_code=null,ProductItem.prototype.region_title=null,EVENTS={PRODUCT_ITEM_CREATED:"event:catalog:productItemCreated",PRODUCT_ITEM_SELECTED:"event:catalog:selectProductItem",GA_PRODUCT_ITEM_SELECT:"ProductSelect",PRODUCT_SELECTED:"event:currentChartId",PRODUCT_ITEM_HIGHLIGHT:"event:catalog:highlightProductItem",PRODUCT_ITEM_LOWLIGHT:"event:catalog:lowlightProductItem"},ProductItem.prototype.listId=null,ProductItem.prototype.events={click:"onSelect","click .jnc-list-label-lake":"onClickLakeLink"},ProductItem.prototype.initialize=function(options){return null==options&&(options={}),ProductItem.__super__.initialize.apply(this,arguments),this.options=options,this.code=$.trim(this.options.code),this.show_code=null==this.options.data.show_code||this.options.data.show_code,this.listId=this.options.listId,this.title=$.trim(this.options.data.title),this.color=this.options.data.color,this.lake_list_endpoint=this.options.data.lake_list_endpoint,this.scrollToProductItemEnabled=null==options.scrollToProductItemEnabled||options.scrollToProductItemEnabled,JNC.Events.trigger(EVENTS.PRODUCT_ITEM_CREATED,this.code,this.listId,this.options.url,this.color),this.listenTo(JNC.Events,"UnSelect:Product",this.unSelectProduct)},ProductItem.prototype.render=function(){return this.$el.html(this.template(this)),this},ProductItem.prototype.onSelect=function(e){return e.preventDefault(),this.select()},ProductItem.prototype.select=function(){var parentNode;if(!this.$el.hasClass("active"))return this.unSelectProduct(),this.$el.addClass("active"),JNC.Events.trigger("get:code",{code:this.code,title:this.title}),JNC.Events.trigger(EVENTS.PRODUCT_ITEM_SELECTED,this.code,this.listId),!0===this.scrollToProductItemEnabled&&(parentNode=this.$el.closest(".jnc-product-content")[0],parentNode.scrollTop=this.el.offsetTop-parentNode.offsetTop),this.gaSendEvent("Catalog",EVENTS.GA_PRODUCT_ITEM_SELECT+":"+this.code,this.options.navKey)},ProductItem.prototype.onClickLakeLink=function(e){return e.preventDefault(),this.showLakeTable()},ProductItem.prototype.showLakeTable=function(){return JNC.Events.trigger("event:lakelistmodal:show",this.lake_list_endpoint),!0},ProductItem.prototype.highlight=function(val){if(val){if(this.$el.hasClass("active"))return;return $(".chart-list .highlight").removeClass("highlight"),this.$el.addClass("highlight"),JNC.Events.trigger(EVENTS.PRODUCT_ITEM_HIGHLIGHT,this.code,this.listId)}if($(".chart-list .highlight").removeClass("highlight"),!this.$el.hasClass("active"))return JNC.Events.trigger(EVENTS.PRODUCT_ITEM_LOWLIGHT,this.code,this.listId)},ProductItem.prototype.onHoverIn=function(e){if(!$(e.target).hasClass("active"))return this.highlight(!0)},ProductItem.prototype.onHoverOut=function(e){if(!$(e.target).hasClass("active"))return this.highlight(!1)},ProductItem.prototype.unSelectProduct=function(){var container;return JNC.Events.trigger("get:code"),container=this.$el.parent(),container.find(".active").removeClass("active")},ProductItem}(TranslatableView)});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC.Views.TranslatableView,root.JNC.Views.ProductItem)}(this,function(JNC,TranslatableView,ProductItemView){var _ref;return JNC.Views.ProductList=function(_super){function ProductList(){return _ref=ProductList.__super__.constructor.apply(this,arguments)}var EVENTS;return __extends(ProductList,_super),ProductList.prototype.className="jnc-params-list",ProductList.prototype.tagName="div",EVENTS={PRODUCT_LIST_CREATED:"event:catalog:productListCreated",PRODUCT_LIST_SHOW:"event:catalog:showProductList",PRODUCT_LIST_HIDE:"event:catalog:hideProductList"},ProductList.prototype.initialize=function(options){return this.options=options,ProductList.__super__.initialize.apply(this,arguments),this.productId=this.options.id,this.charts=this.options.charts,this.url=this.options.url,this.scrollToProductItemEnabled=null==this.options.scrollToProductItemEnabled||this.options.scrollToProductItemEnabled,this.options.container?this.container=this.options.container:this.container=this.$el,this.products={},this.listenTo(JNC.Events,"event:highlightProduct",this.highlightProduct),this.listenTo(JNC.Events,"event:selectProduct",this.selectProduct),JNC.Events.trigger(EVENTS.PRODUCT_LIST_CREATED,this.productId)},
ProductList.prototype.render=function(){var code,product,_ref1;_ref1=this.charts;for(code in _ref1)product=_ref1[code],this.products[code]=new ProductItemView({code:code,data:product,url:this.url+"/"+code+".kml",container:this.container,listId:this.productId,scrollToProductItemEnabled:this.scrollToProductItemEnabled,navKey:this.options.navKey}),this.$el.append(this.products[code].render().$el);return this},ProductList.prototype.highlightProduct=function(productName){var product;if(product=this.products[productName],this.productHighlight!==product)return null!=this.productHighlight&&this.productHighlight.highlight(!1),null!=product&&product.highlight(!0),this.productHighlight=product},ProductList.prototype.selectProduct=function(productName){var product;if(this.productHighlight=void 0,void 0!==(product=this.products[productName]))return product.select()},ProductList.prototype.show=function(){return this.$el.show(),JNC.Events.trigger("event:catalog:showProductList",this.productId),this.$el.find(".active").html()},ProductList.prototype.hide=function(){return this.$el.hide(),JNC.Events.trigger("event:catalog:hideProductList",this.productId)},ProductList}(TranslatableView)});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC.$,root.JNC.Views.TranslatableView,root.JNC.Views.ProductList)}(this,function(JNC,$,TranslatableView,ProductListView){var _ref;return JNC.Views.ProductGroup=function(_super){function ProductGroup(){return _ref=ProductGroup.__super__.constructor.apply(this,arguments)}return __extends(ProductGroup,_super),ProductGroup.prototype.template=JNC.TPL["catalog/product_group"],ProductGroup.prototype.className="jnc-product-group",ProductGroup.prototype._default_group_to_show=null,ProductGroup.prototype.events={"click .accordion dd.active a[data-region]":"onUnselectRegion","click .accordion dd:not(.active) a[data-region]":"onSelectRegion","click .group-list li a":"onSelectGroup"},ProductGroup.prototype.initialize=function(options){return this.options=options,ProductGroup.__super__.initialize.apply(this,arguments),this.productId=this.options.id,this.productData=this.options.product,this.scrollToProductItemEnabled=null==this.options.scrollToProductItemEnabled||this.options.scrollToProductItemEnabled,this.groups={},this.currentGroup=null,this.currentGroupName=null},ProductGroup.prototype.render=function(){var group,groupID,region,regionID,_ref1,_ref2;this.$el.html(this.template({groups:this.productData.groups})),_ref1=this.productData.groups;for(groupID in _ref1){if(group=_ref1[groupID],null!=group.regions){_ref2=group.regions;for(regionID in _ref2)region=_ref2[regionID],this.groups[regionID]=new ProductListView({id:this.productId+"_"+groupID+"_"+regionID,charts:region.charts,url:group.base_kml_url,scrollToProductItemEnabled:this.scrollToProductItemEnabled,navKey:this.options.navKey}),this.$("#"+regionID).append(this.groups[regionID].render().$el)}else this.groups[groupID]=new ProductListView({id:this.productId+"_"+groupID,charts:group.charts,url:group.base_kml_url,scrollToProductItemEnabled:this.scrollToProductItemEnabled,navKey:this.options.navKey}),this.$("#"+groupID).append(this.groups[groupID].render().$el);group.default&&null==this._default_group_to_show&&(this._default_group_to_show=groupID)}return this.hideAllRegions(),this},ProductGroup.prototype.onSelectRegion=function(e){var $item,$target,regionID,regionName,_ref1;return e.preventDefault(),$target=$(e.currentTarget),$item=$target.closest("dd"),regionID=$target.data("region"),regionName=$target.data("regionName"),$item.addClass("active").siblings().removeClass("active"),this.hideAllRegions(),this.currentGroup=regionID,this.currentGroupName=regionName,null!=(_ref1=this.groups[this.currentGroup])?_ref1.show():void 0},ProductGroup.prototype.onUnselectRegion=function(e){var $item,$target,regionID,_ref1;return e.preventDefault(),$target=$(e.currentTarget),$item=$target.closest("dd"),regionID=$target.data("region"),$item.removeClass("active"),null!=(_ref1=this.groups[regionID])&&_ref1.hide(),this.currentGroup=null,this.currentGroupName=null},ProductGroup.prototype.onSelectGroup=function(e){var $region,$tabContent,$tabTitle,$target,groupID;if(e.preventDefault(),$target=$(e.currentTarget),groupID=$target.data("group"),$tabTitle=$target.closest(".jnc-tab-item"),$tabContent=this.$(".jnc-tabs-content .content[data-group='"+groupID+"']"),!$tabTitle.hasClass("active"))return JNC.Events.trigger("UnSelect:Product"),this.hideAllRegions(),$tabTitle.addClass("active").siblings().removeClass("active"),$tabContent.addClass("active").siblings().removeClass("active"),$tabContent.find("dd").removeClass("active"),null!=this.currentGroupName&&($region=$tabContent.find("dd a[data-region-name='"+this.currentGroupName+"']")),null!=$region&&0!==$region.length||($region=$tabContent.find("dd:first a")),0===$region.length?(this.currentGroupName=null,this.currentGroup=groupID):(this.currentGroup=$region.data("region"),$region.closest("dd").addClass("active")),this.groups[this.currentGroup].show()},ProductGroup.prototype.hideAllRegions=function(){var group,groupID,_ref1,_results;_ref1=this.groups,_results=[];for(groupID in _ref1)group=_ref1[groupID],_results.push(group.hide());return _results},ProductGroup.prototype.show=function(){var groupID;if(this.$el.show(),groupID=this.currentGroup||this._default_group_to_show,null!=this.groups[groupID])return this.groups[groupID].show(),$(".jnc-product-group .jnc-tabs-content .content a[data-region='"+groupID+"']").click()},ProductGroup.prototype.hide=function(){var _ref1,_ref2;return this.$el.hide(),null!=(_ref1=this.groups[this.currentGroup])&&_ref1.hide(),null!=(_ref2=this.groups[this._default_group_to_show])?_ref2.hide():void 0},ProductGroup}(TranslatableView)});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC.$,root.JNC.Views.TranslatableView,root.JNC.Views.ProductList)}(this,function(JNC,$,TranslatableView,ProductListView){var _ref;return JNC.Views.ProductRegion=function(_super){function ProductRegion(){return _ref=ProductRegion.__super__.constructor.apply(this,arguments)}return __extends(ProductRegion,_super),ProductRegion.prototype.template=JNC.TPL["catalog/product_region"],ProductRegion.prototype.className="product-region",ProductRegion.prototype.events={"click .accordion dd.active a":"onUnselectRegion","click .accordion dd:not(.active) a":"onSelectRegion"},ProductRegion.prototype.initialize=function(options){return this.options=options,ProductRegion.__super__.initialize.apply(this,arguments),this.productId=this.options.id,this.regions=this.options.regions,this.url=this.options.url,this.scrollToProductItemEnabled=null==this.options.scrollToProductItemEnabled||this.options.scrollToProductItemEnabled,this.regionProduct={},this.currentRegionProduct=null,this.currentRegionName=null},ProductRegion.prototype.render=function(){var region,regionID,_ref1;this.$el.html(this.template({regions:this.regions})),_ref1=this.regions;for(regionID in _ref1)region=_ref1[regionID],(region.default||null==this._default_region_to_show)&&(this._default_region_to_show=regionID,this.currentRegionName=region.title),this.regionProduct[regionID]=new ProductListView({id:this.productId+"_"+regionID,charts:region.charts,url:this.url,scrollToProductItemEnabled:this.scrollToProductItemEnabled,navKey:this.options.navKey}),this.$("#"+regionID).append(this.regionProduct[regionID].render().$el);return this.hideAllRegions(),this},ProductRegion.prototype.onSelectRegion=function(e){var $item,$target,regionID,regionName;return e.preventDefault(),$target=$(e.currentTarget),$item=$target.closest("dd"),regionID=$target.data("region"),regionName=$target.data("regionName"),$item.addClass("active").siblings().removeClass("active"),this.hideAllRegions(),this.currentRegionProduct=regionID,this.currentRegionName=regionName,this.regionProduct[regionID].show()},ProductRegion.prototype.onUnselectRegion=function(e){var $item,$target,regionID;return e.preventDefault(),$target=$(e.currentTarget),$item=$target.closest("dd"),regionID=$target.data("region"),$item.removeClass("active"),this.regionProduct[regionID].hide(),this.currentRegionProduct=null,this.currentRegionName=null},ProductRegion.prototype.show=function(){var regionID;if(this.$el.show(),regionID=this.currentRegionProduct||this._default_region_to_show,null!=this.regionProduct[regionID])return this.regionProduct[regionID].show(),$(".product-region .jnc-tabs-content .content a[data-region='"+regionID+"']").click()},ProductRegion.prototype.hide=function(){var _ref1,_ref2;return this.$el.hide(),null!=(_ref1=this.regionProduct[this.currentRegionProduct])&&_ref1.hide(),null!=(_ref2=this.regionProduct[this._default_region_to_show])?_ref2.hide():void 0},ProductRegion.prototype.hideAllRegions=function(){var region,regionID,_ref1,_results;_ref1=this.regionProduct,_results=[];for(regionID in _ref1)region=_ref1[regionID],_results.push(region.hide());return _results},ProductRegion}(TranslatableView)});var __bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC.Backbone,root.JNC.Views.TranslatableView,root.JNC.Views.ProductGroup,root.JNC.Views.ProductList,root.JNC.Views.ProductRegion,root.JNC.Widgets.LakeListModal)}(this,function(JNC,Backbone,TranslatableView,ProductGroupView,ProductListView,ProductRegionView,LakeListModal){var _ref;return JNC.Views.Product=function(_super){function Product(){return this.onContinueClick=__bind(this.onContinueClick,this),_ref=Product.__super__.constructor.apply(this,arguments)}var EVENTS;return __extends(Product,_super),Product.prototype.template=JNC.TPL["catalog/product"],Product.prototype.className="jnc-product-detail jnc-content",Product.prototype.selectedCode=null,Product.prototype.selectedTitle=null,EVENTS={EVENT_HAVE_SONAR_CHART:"event:haveSonarChartFeature",GA_PRODUCT_PURCHASE_REQUEST:"PurchaseRequest"},Product.prototype.productId=null,Product.prototype.productData=null,Product.prototype.productList=null,Product.prototype.productUrl=null,Product.prototype.productImageUrl=null,Product.prototype.productUrlGetNow=null,Product.prototype.productDescription=null,Product.prototype.events={"click .js-btn-back":"onBackClick","click .js-btn-continue":"onContinueClick"},Product.prototype.initialize=function(options){return Product.__super__.initialize.apply(this,arguments),this.options=options,this.productId=options.id,this.productData=options.product,this.productUrl=this.productData.url,this.productImageUrl=this.productData.image_url,this.productUrlGetNow=this.productData.url_get_now,this.productDescription=this.productData.description,this.showDescription=null==options.showDescription||options.showDescription,this.showBackButton=null==options.showBackButton||options.showBackButton,this.showButtonArea=null==options.showButtonArea||options.showButtonArea,this.inNewWindow=null==options.inNewWindow||options.inNewWindow,this.scrollToProductItemEnabled=null==options.scrollToProductItemEnabled||options.scrollToProductItemEnabled,this.listenTo(JNC.Events,"get:code",this._onGetCode),null!=this.productData.groups?this.productList=new ProductGroupView({id:this.productId,product:this.productData,scrollToProductItemEnabled:this.scrollToProductItemEnabled,navKey:this.options.navKey}):null!=this.productData.regions?this.productList=new ProductRegionView({id:this.productId,regions:this.productData.regions,url:this.productData.base_kml_url,scrollToProductItemEnabled:this.scrollToProductItemEnabled,navKey:this.options.navKey}):this.productList=new ProductListView({id:this.productId,charts:this.productData.charts,url:this.productData.base_kml_url,scrollToProductItemEnabled:this.scrollToProductItemEnabled,navKey:this.options.navKey}),this.modal=new LakeListModal},Product.prototype.render=function(){return this.$el.html(this.template(this)),this.$el.find(".jnc-product-content").append(this.productList.render().$el),this},Product.prototype.onBackClick=function(){return Backbone.history.navigate("products",{trigger:!0}),JNC.Events.trigger(EVENTS.EVENT_HAVE_SONAR_CHART,!0),this.trigger("product:back",this.productId)},Product.prototype.onContinueClick=function(e){return this.gaSendEvent("Catalog",EVENTS.GA_PRODUCT_PURCHASE_REQUEST+":"+this.productId,this.options.navKey)},Product.prototype.show=function(){return this.$el.show(),this.productList.show(),JNC.Events.trigger(EVENTS.EVENT_HAVE_SONAR_CHART,this.productData.sonar)},Product.prototype.hide=function(){return this.$el.hide(),this.productList.hide()},Product.prototype.getProductLink=function(code,title){var separator;return separator=this.productUrlGetNow.indexOf("?")>-1?"&":"?",this.productUrlGetNow+separator+"code="+encodeURIComponent(code)+"&title="+encodeURIComponent(title)},Product.prototype._onGetCode=function(data){var link;return null==data&&(data=null),null!=data?(link=this.getProductLink(data.code,data.title),this.$(".js-btn-continue").attr("href",link).removeClass("is-disabled")):this.$(".js-btn-continue").removeAttr("href").addClass("is-disabled"),null!=this.inNewWindow&&this.inNewWindow?this.$(".js-btn-continue").attr("target","_blank"):this.$(".js-btn-continue").attr("target","_self")},Product}(TranslatableView)});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC.$,root.JNC._,root.JNC.Views.TranslatableView,root.JNC.utils.CookieStorage)}(this,function(JNC,$,_,TranslatableView,CookieStorage){var _ref;return JNC.Views.CookieLawBanner=function(_super){function CookieLawBanner(){return _ref=CookieLawBanner.__super__.constructor.apply(this,arguments)}return __extends(CookieLawBanner,_super),CookieLawBanner.prototype.template=JNC.TPL["utils/cookie_banner"],CookieLawBanner.prototype.el="body",CookieLawBanner.prototype.$banner=null,CookieLawBanner.prototype.events={"click .jnc-cookie-close":"agreeAndClose"},CookieLawBanner.prototype.dictionary={de:{cookie_law:"Diese Website verwendet Cookies, einschließlich solcher von Dritten, um Ihre Browsingerfahrung zu verbessern. Indem Sie unsere Website weiterhin benutzen,  stimmen Sie unserer Verwendung von Cookies zu. Um mehr zu erfahren oder um zu sehen, wie Sie alle Cookies deaktivieren können, klicken Sie <a target='_blank' href='http://www.navionics.com/de/privacy-policy'>hier</a>."},en:{cookie_law:"This site uses cookies, including those of third parties, to improve your browsing experience. By continuing, you consent to their use. To learn more or see how to disable all cookies click <a target='_blank' href='http://www.navionics.com/en/privacy-policy'>here</a>."},es:{cookie_law:"Este sitio web utiliza cookies propias y de terceros para optimizar tu experiencia de navegación. Al continuar navegando aceptas su uso. Para obtener más información o ver cómo desactivar todas las cookies haz clic <a target='_blank' href='http://www.navionics.com/es/privacy-policy'>aquí</a>."},fr:{cookie_law:"Ce site utilise des cookies également de tierces parties, pour augmenter votre expérience de navigation en ligne.  En continuant, vous acceptez leur utilisation. Pour plus d’info ou savoir comment les bloquer, cliquez <a target='_blank' href='http://www.navionics.com/fr/privacy-policy'>ici</a>."},it:{cookie_law:"Questo sito usa cookie, anche di terze parti, per migliorare la tua esperienza di navigazione. Continuando ne acconsenti l’uso. Per saperne di più o opporti all’utilizzo di qualunque cookie clicca <a target='_blank' href='http://www.navionics.com/it/privacy-policy'>qui</a>."}},CookieLawBanner.prototype.initialize=function(options){return null==options&&(options={}),_.bindAll(this,"agreeAndClose"),CookieLawBanner.__super__.initialize.apply(this,arguments),this.options=_.defaults(options,{top:!0,agreeOnClick:!0,agreeOnScroll:!0,cookieName:"cookie-law-accepted",cookiePath:"/",expires:12,locale:"en"})},CookieLawBanner.prototype._bindEvents=function(){var _this=this;if(this.options.agreeOnScroll&&$(window).add("*").on("scroll.agree",this.agreeAndClose),this.options.agreeOnClick)return $(document.body).on("mousedown.agree touchstart.agree",function(e){if(!$(e.target).closest(_this.$banner).length)return _this.agreeAndClose()})},CookieLawBanner.prototype._unbindEvents=function(){return $(window).add("*").off(".agree")},CookieLawBanner.prototype.remove=function(){return this.close(),CookieLawBanner.__super__.remove.apply(this,arguments)},CookieLawBanner.prototype.show=function(){var context;if(!this.agreed())return null==this.$banner&&(context={translate:this.translate},this.$banner=$(this.template(context))),this.options.top?this.$el.prepend(this.$banner):this.$el.append(this.$banner),this._bindEvents()},CookieLawBanner.prototype.close=function(){return this.$banner.detach(),this._unbindEvents(),$(window).trigger("resize")},CookieLawBanner.prototype.agreeAndClose=function(){return this.agree(),this.close()},CookieLawBanner.prototype.agree=function(){var expires;if(!this.agreed())return expires=new Date,expires.setMonth(expires.getMonth()+this.options.expires),CookieStorage.set(this.options.cookieName,1,expires,this.options.cookiePath)},CookieLawBanner.prototype.agreed=function(){return CookieStorage.has(this.options.cookieName)},CookieLawBanner.prototype.disagree=function(){return CookieStorage.remove(this.options.cookieName,this.options.cookiePath)},CookieLawBanner.prototype.translate=function(key){return null!=this.dictionary[this.options.locale]?this.dictionary[this.options.locale][key]:this.dictionary.en[key]},CookieLawBanner}(TranslatableView)});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},__indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++)if(i in this&&this[i]===item)return i;return-1};!function(root,factory){factory(root.JNC,root.JNC.$,root.JNC.Views.ProductViewer)}(this,function(JNC,$,ProductViewer){var _ref;return JNC.Views.CatalogProductViewer=function(_super){function CatalogProductViewer(){return _ref=CatalogProductViewer.__super__.constructor.apply(this,arguments)}return __extends(CatalogProductViewer,_super),CatalogProductViewer.prototype.initialize=function(options){if(CatalogProductViewer.__super__.initialize.apply(this,arguments),null==options.url)throw"Data backend host should be provided";return this.dataUrl=options.url,this.products=null,this.productsLoaded=!1,this.productsInitialized=[],this.locale=null!=options.locale?options.locale:"en",this._preloadProductCatalog()},CatalogProductViewer.prototype.onMapReady=function(e){return this._mapReady=this.productsLoaded,this._processFunctionCallQueue()},CatalogProductViewer.prototype._preloadProductCatalog=function(){var _this=this;if(!0!==this.productsLoaded)return $.when($.getJSON(this.dataUrl+"/getProducts?lang="+this.locale)).then(function(data,textStatus,jqXHR){return null!=data?(_this.products=data,_this.productsLoaded=!0,_this.trigger("event:catalog:productLoaded"),JNC.Events.trigger("event:catalog:productLoaded"),_this._mapReady=!0,_this._processFunctionCallQueue()):alert("Well, This Is Embarrassing: Error loading map data")})},CatalogProductViewer.prototype._initializeProduct=function(id){var data,group,groupID,region,regionID,_ref1,_results;if(!(__indexOf.call(this.productsInitialized,id)>=0)){if(this.productsInitialized[id]=!0,data=this.products[id],null!=data.groups){_ref1=data.groups,_results=[];for(groupID in _ref1)group=_ref1[groupID],null!=group.regions?_results.push(function(){var _ref2,_results1;_ref2=group.regions,_results1=[];for(regionID in _ref2)region=_ref2[regionID],_results1.push(this._processProductList(region.title,region.charts,group.base_kml_url));return _results1}.call(this)):_results.push(this._processProductList(group.title,group.charts,group.base_kml_url));return _results}return this._processProductList(id,data.charts,data.base_kml_url)}},CatalogProductViewer.prototype._processProductList=function(id,charts,url){var code,product,_results;if(!0===this.productsLoaded){JNC.Events.trigger("event:catalog:productListCreated",id),_results=[];for(code in charts)product=charts[code],_results.push(JNC.Events.trigger("event:catalog:productItemCreated",code,id,url+"/"+code+".kml",product.color));return _results}},CatalogProductViewer.prototype.showChartProduct=function(title){var _this=this;return this._executeFunction(function(){return _this._initializeProduct(title),_this.showProductList(title)})},CatalogProductViewer.prototype.hideChartProduct=function(title){return this.hideProductList(title)},CatalogProductViewer}(ProductViewer)});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC.$,root.JNC._,root.JNC.Backbone,root.JNC.Views.TranslatableView,root.JNC.Views.CatalogProductViewer,root.JNC.Views.Product,root.JNC.Views.SlidingBar)}(this,function(JNC,$,_,Backbone,TranslatableView,CatalogProductViewer,ProductView,SlidingBar){return JNC.Views.LightCatalogProductViewer=function(_super){function LightCatalogProductViewer(options){var lang,_this=this;if(LightCatalogProductViewer.__super__.constructor.apply(this,arguments),null==options.url)throw"Data backend host should be provided";if(null==options.containerSelector)throw"Container selector should be provided";if(this.$container=$(options.containerSelector),1!==this.$container.length)throw"Container does not exist or not unique";this.dataBackendUrl=options.url,lang=this.getLocale(),this.locale=options.locale?options.locale:this._isValidLang(lang)?lang:"en",this.dictionary=null,this._initTranslations(),this.productDisplayed=!1,this.containerInitialized=!1,this.options=_.extend({},options,{tagId:"<div />",DistanceControl:!1,LayerControl:!1,DepthUnitControl:!1,DistanceUnitControl:!1}),this.scrollToProductItemEnabled=null==this.options.scrollToProductItemEnabled||this.options.scrollToProductItemEnabled,this.catalogProductViewer=new CatalogProductViewer(this.options),this.catalogProductViewer.on("event:catalog:productLoaded",function(){return _this.showProduct(_this.productToShow,_this.showDescription,_this.urlGetNow,_this.showButtonArea,_this.inNewWindow)}),this.listenTo(this,"translations:complete",function(){return _this.showProduct(_this.productToShow,_this.showDescription,_this.urlGetNow,_this.showButtonArea,_this.inNewWindow)})}return __extends(LightCatalogProductViewer,_super),LightCatalogProductViewer.prototype.showProduct=function(product,showDescription,urlGetNow,showButtonArea,inNewWindow){var oldUrl,productData,url,_this=this;return null==showDescription&&(showDescription=!0),null==urlGetNow&&(urlGetNow=!1),null==showButtonArea&&(showButtonArea=!0),null==inNewWindow&&(inNewWindow=!0),!0!==this.catalogProductViewer.productsLoaded?(this.productToShow=product,this.showDescription=showDescription,this.urlGetNow=urlGetNow,this.showButtonArea=showButtonArea,void(this.inNewWindow=inNewWindow)):!0!==this.productDisplayed?(this.productDisplayed=!0,oldUrl=this.catalogProductViewer.products[product].image_url,-1===oldUrl.search(/^http:\/\/|https:\/\/|\/\//)&&(url=this.catalogProductViewer.dataUrl+oldUrl,this.catalogProductViewer.products[product].image_url=url.replace(/([^:])\/\/+/g,"$1/")),productData=this.catalogProductViewer.products[product],!1!==urlGetNow&&(productData.url_get_now=urlGetNow),this.productView=new ProductView({showDescription:showDescription,showBackButton:!1,product:productData,id:product,scrollToProductItemEnabled:this.scrollToProductItemEnabled,navKey:this.options.navKey,showButtonArea:this.showButtonArea,inNewWindow:this.inNewWindow}),this.slidingBar=new SlidingBar({el:this.$container.get(0),autoResize:!1,left_view:this.productView,right_view:this.catalogProductViewer,navKey:this.options.navKey}),this.slidingBar.render(!0),this.slidingBar.responsiveOpen(),this.productView.show(),JNC.Events.trigger("map:resize"),JNC.Events.on("slidingBarEvent:resize",function(){return JNC.Events.trigger("map:resize"),_this.slidingBar.theContainer.get(0).style.webkitTransform="scale(1)"}),this.catalogProductViewer.showChartProduct(product)):void 0},LightCatalogProductViewer.prototype.setVisibleButtonPanel=function(isVisible){return null==isVisible&&(isVisible=!0),this.showProduct(this.productToShow,this.showDescription,this.urlGetNow,isVisible,this.inNewWindow)},LightCatalogProductViewer}(TranslatableView)});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC.$,root.JNC._,root.JNC.Backbone,root.JNC.Views.TranslatableView)}(this,function(JNC,$,_,Backbone,TranslatableView){var _ref;return JNC.Views.BasePanel=function(_super){function BasePanel(){return _ref=BasePanel.__super__.constructor.apply(this,arguments)}return __extends(BasePanel,_super),BasePanel.prototype.wrapperTemplate=JNC.TPL["utils/panel_base"],BasePanel.prototype.defaults={title:null,backButton:!0,autorender:!0,rightButton:!1,rightButtonText:""},BasePanel.prototype.isRenderEnabled=!0,BasePanel.prototype.events=function(){var result;return result={},this.options.backButton&&(result["click .jnc-btn-back"]="onBackButtonClick"),result},BasePanel.prototype.initialize=function(options){if(BasePanel.__super__.initialize.apply(this,arguments),this.options=_.defaults(options,this.defaults),this.options.autorender)return this.render()},BasePanel.prototype.render=function(){var context;return!this.isRenderEnabled||(context={translate:this.translate,backButton:this.options.backButton,title:this.options.title,rightButton:this.options.rightButton,rightButtonText:this.options.rightButtonText},this.$el.html(this.wrapperTemplate(context)),this.renderContent(this.$(".jnc-scrollable-content")),this)},BasePanel.prototype.renderContent=function($content){throw new Error("Not implemented")},BasePanel.prototype.disableRender=function(){return this.isRenderEnabled=!1,this.undelegateEvents()},BasePanel.prototype.enableRender=function(){return this.isRenderEnabled=!0,this.delegateEvents(),this.render()},BasePanel.prototype.destroy=function(){return this.disableRender(),this.stopListening()},BasePanel.prototype.onBackButtonClick=function(e){return e.preventDefault(),this.trigger("back")},BasePanel.prototype.isValidCharacter=function(e){var $target,key,value,_ref1;return key=null!=(_ref1=e.which)?_ref1:e.keyCode,$target=$(e.target),value=$target.val(),-1===value.indexOf(".")&&("."===e.key||"."===String.fromCharCode(key))||(8===key||13===key||0===key||!(key<48||key>57))&&void 0},BasePanel}(TranslatableView),_.extend(JNC.Views.BasePanel.prototype,Backbone.Events),JNC.Views.BasePanel}),function(root,factory){factory(root.JNC)}(this,function(JNC){return JNC.ProductCatalog={Models:{},Views:{}}});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC.$,root.JNC._,root.JNC.Backbone,root.JNC.Views.BasePanel,root.JNC.Views.Product)}(this,function(JNC,$,_,Backbone,BasePanel,ProductView){var _ref;return JNC.ProductCatalog.Views.ProductItems=function(_super){function ProductItems(){return _ref=ProductItems.__super__.constructor.apply(this,arguments)}return __extends(ProductItems,_super),ProductItems.prototype.initialize=function(options){return this.options=null!=options?options:{},_.extend(options,{autorender:!1,title:"",el:"<div/>"}),!1===this.options.product.showDescription&&(this.options.title=this.options.product.title),ProductItems.__super__.initialize.apply(this,arguments),this.render(this.$el)},ProductItems.prototype.renderContent=function($content){return!1!==this.options.product.url&&(this.options.product.url_get_now=this.options.product.url),this.productView=new ProductView({showDescription:this.options.product.showDescription,showBackButton:!1,product:this.options.product,id:this.options.id,scrollToProductItemEnabled:!0,navKey:this.options.navKey,showButtonArea:this.options.product.showButtonPanel,inNewWindow:this.options.product.inNewWindow}),$content.html(this.productView.render().el),this},ProductItems.prototype.show=function(){return this.productView.show()},ProductItems}(BasePanel)});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC.$,root.JNC._,root.JNC.Backbone,root.JNC.Views.BasePanel,root.JNC.ProductCatalog.Views.ProductItems)}(this,function(JNC,$,_,Backbone,BasePanel,ProductItems){var _ref;return JNC.ProductCatalog.Views.ProductsList=function(_super){function ProductsList(){return _ref=ProductsList.__super__.constructor.apply(this,arguments)}return __extends(ProductsList,_super),ProductsList.prototype.template=JNC.TPL["complex_catalog/list"],ProductsList.prototype.events=function(){return _.extend(ProductsList.__super__.events.apply(this,arguments),{"click .jnc-product-item":"_onClickProductItem"})},ProductsList.prototype.renderContent=function($content){return $content.html(this.template(this.getContext())),this},ProductsList.prototype.getContext=function(){return{translate:this.translate,products:this.options.products}},ProductsList.prototype._onClickProductItem=function(e){var product;return product=$(e.currentTarget).data("product"),this.trigger("catalogItem:click",product)},ProductsList}(BasePanel)});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC.Backbone,root.JNC.$,root.JNC._)}(this,function(JNC,Backbone,$,_){var _ref;return JNC.ProductCatalog.Models.Chart=function(_super){function Chart(){return _ref=Chart.__super__.constructor.apply(this,arguments)}return __extends(Chart,_super),Chart.prototype.default={product_id:null,product_name:null,description:null,group_id:null,group_name:null,region_id:null,region_name:null,code:null,name:null,color:null,have_lake_list:null,have_sonar_chart:null,product_ecomm_url:null,
product_image_url:null,lake_list_url:null,boundary_kml_url:null},Chart}(Backbone.Model)});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC.Backbone,root.JNC.$,root.JNC._,root.JNC.ProductCatalog.Models.Chart)}(this,function(JNC,Backbone,$,_,ChartModel){var _ref;return JNC.ProductCatalog.Models.Products=function(_super){function Products(){return _ref=Products.__super__.constructor.apply(this,arguments)}return __extends(Products,_super),Products.prototype.initialize=function(models,options){if(null==options&&(options={}),Products.__super__.initialize.apply(this,arguments),null==options.url)throw"Data backend host should be provided";return this.successCallback=options.onSuccess,this.errorCallback=options.onError,this.dataUrl=options.url,this.products=null,this.productsLoaded=!1,this.productsInitialized=[],this.locale=null!=options.locale?options.locale:"en",this._preloadProductCatalog()},Products.prototype._preloadProductCatalog=function(){var _this=this;if(!0!==this.productsLoaded)return $.when($.getJSON(this.dataUrl+"/getProducts?locale="+this.locale)).then(function(data,textStatus,jqXHR){return null!=data?(_this.products=_this._updateImagesUrl(data),_this.productsLoaded=!0,_this.trigger("event:catalog:productLoaded"),JNC.Events.trigger("event:catalog:productsListLoaded",_this.products),_this._fillMe(_this.products),"function"==typeof _this.successCallback&&_this.successCallback(_this.products),_this.trigger("sync",_this,null,null),_this._mapReady=!0):("function"==typeof _this.errorCallback&&_this.errorCallback(textStatus),_this.trigger("error",_this,null,null))})},Products.prototype._updateImagesUrl=function(data){var _this=this;return _.reduce(data,function(result,value,key){var oldUrl,url;return oldUrl=value.image_url,-1===oldUrl.search(/^http:\/\/|https:\/\/|\/\//)&&(url=_this.dataUrl+oldUrl,value.image_url=url.replace(/([^:])\/\/+/g,"$1/")),result[key]=value,result},{})},Products.prototype._fillMe=function(catalog){var chart,chartID,group,groupID,product,productID,region,regionID,_results;_results=[];for(productID in catalog)product=catalog[productID],null!=product.groups?_results.push(function(){var _ref1,_results1;_ref1=product.groups,_results1=[];for(groupID in _ref1)group=_ref1[groupID],null!=group.regions?_results1.push(function(){var _ref2,_results2;_ref2=group.regions,_results2=[];for(regionID in _ref2)region=_ref2[regionID],_results2.push(function(){var _ref3,_results3;_ref3=region.charts,_results3=[];for(chartID in _ref3)chart=_ref3[chartID],_results3.push(this._createProduct(productID,product,groupID,group,regionID,region,chartID,chart,group.base_kml_url));return _results3}.call(this));return _results2}.call(this)):_results1.push(function(){var _ref2,_results2;_ref2=group.charts,_results2=[];for(chartID in _ref2)chart=_ref2[chartID],_results2.push(this._createProduct(productID,product,groupID,group,null,null,chartID,chart,group.base_kml_url));return _results2}.call(this));return _results1}.call(this)):_results.push(function(){var _ref1,_results1;_ref1=product.charts,_results1=[];for(chartID in _ref1)chart=_ref1[chartID],_results1.push(this._createProduct(productID,product,null,null,null,null,chartID,chart,product.base_kml_url));return _results1}.call(this));return _results},Products.prototype._createProduct=function(productID,product,groupID,group,regionID,region,chartID,chart,kmlBaseUrl){return this.add(new ChartModel({id:productID+"_"+groupID+"_"+regionID+"_"+chartID,product_id:productID,product_name:product.title,description:product.description,group_id:groupID||void 0,group_name:group?group.title:void 0,region_id:regionID||void 0,region_name:region?region.title:void 0,code:chartID,name:chart.title,color:chart.color,have_lake_list:null!=chart.lake_list_endpoint,have_sonar_chart:product.sonar,product_ecomm_url:product.url_get_now,product_image_url:product.image_url,lake_list_url:null!=chart.lake_list_endpoint?chart.lake_list_endpoint:void 0,boundary_kml_url:kmlBaseUrl+"/"+chartID+".kml"}))},Products}(Backbone.Collection)});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC.$,root.JNC._,root.JNC.Backbone,root.JNC.Views.TranslatableView,root.JNC.ProductCatalog.Views.ProductsList,root.JNC.Views.CatalogProductViewer,root.JNC.Views.SlidingBar,root.JNC.Views.Product,root.JNC.ProductCatalog.Views.ProductItems,root.JNC.ProductCatalog.Models.Products)}(this,function(JNC,$,_,Backbone,TranslatableView,ProductsList,CatalogProductViewer,SlidingBar,ProductView,ProductItems,Products){var _ref;return JNC.ProductCatalog.Views.Catalog=function(_super){function Catalog(){return _ref=Catalog.__super__.constructor.apply(this,arguments)}return __extends(Catalog,_super),Catalog.prototype.defaults={container:null,zoom:1,showDescription:!0,products:null,url:"//webapp.navionics.com",navKey:null,DistanceControl:!1,LayerControl:!1,DepthUnitControl:!1,DistanceUnitControl:!1},Catalog.prototype.initialize=function(options){var lang,_this=this;return this.options=options,this.options=_.extend({},this.defaults,options),this.dataBackendUrl=options.url,lang=this.getLocale(),this.locale=options.locale?options.locale:this._isValidLang(lang)?lang:"en",this.dictionary=null,this._initTranslations(),this.options.products?this._initViews():JNC.Events.on("event:catalog:productsListLoaded",function(products){return _this.options.products=products,_this._initViews()}),this.listenTo(this,"translations:complete",function(){return _this._initViews()}),new Products(void 0,this.options)},Catalog.prototype._initViews=function(){return this.enabledProducts=this.pickEnabledProducts(),this.catalogProductViewer=new CatalogProductViewer(_.defaults(this.options,{tagId:"<div />"})),this.slidingBar=new SlidingBar({el:$(this.options.container).get(0),autoResize:!0,left_view:this.initProductsList(),right_view:this.catalogProductViewer,navKey:this.options.navKey}),this.slidingBar.render(),this.slidingBar.responsiveOpen(),JNC.Events.on("slidingBarEvent:resize",function(){return JNC.Events.trigger("map:resize")})},Catalog.prototype.initProductsList=function(){return this.productItems&&this.destroyView(this.productItems),this.productsList=new ProductsList(_.extend(this.options,{autorender:!0,backButton:!1,products:this.enabledProducts,title:"product_catalog"})),this.listenTo(this.productsList,"catalogItem:click",this._onClickProductItem),this.productsList},Catalog.prototype.initProductItems=function(product){return this.productsList&&this.destroyView(this.productsList),this.productItems=new ProductItems(_.extend(this.options,{backButton:!0,id:product,product:this.options.products[product]})),this.listenTo(this.productItems,"back",this._onProductViewClose),this.productItems},Catalog.prototype.destroyView=function(view){return this.stopListening(view),view.destroy()},Catalog.prototype.pickEnabledProducts=function(){var enabledProducts,products,_this=this;return products=this.options.products,this.options.enabledProducts&&(enabledProducts=_.pluck(this.options.enabledProducts,"product"),products=_.reduce(products,function(result,value,key){return _.contains(enabledProducts,key)&&(value=_.extend({},value,_.findWhere(_this.options.enabledProducts,{product:key})),result[key]=value),result},{})),products},Catalog.prototype._onClickProductItem=function(product){var productItems;return productItems=this.initProductItems(product),this.slidingBar.setLeftView(productItems),JNC.Events.trigger("map:resize"),productItems.show(),this.catalogProductViewer.showChartProduct(product)},Catalog.prototype._onProductViewClose=function(){return this.catalogProductViewer=new CatalogProductViewer(_.defaults(this.options,{tagId:"<div />"})),this.slidingBar.setViews(this.initProductsList(),this.catalogProductViewer)},Catalog}(TranslatableView),JNC.ProductCatalog.Catalog=JNC.ProductCatalog.Views.Catalog});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC._,root.JNC.$,root.JNC.Views.ProductViewer,root.JNC.ProductCatalog.Models.Products)}(this,function(JNC,_,$,ProductViewer,Product){var _ref;return JNC.ProductCatalog.Views.ProductBoundaryViewer=function(_super){function ProductBoundaryViewer(){return _ref=ProductBoundaryViewer.__super__.constructor.apply(this,arguments)}var DEFAULT_CONFIG,EVENTS,SCOPE;return __extends(ProductBoundaryViewer,_super),DEFAULT_CONFIG={url:"https://webapp.navionics.com",locale:"en"},SCOPE={CHART:0,ALL_REGION:1,ALL_GROUP:2,ALL_PRODUCT:3},EVENTS=_.extend(JNC.Views.ProductViewer.prototype.EVENTS,JNC.Views.BoatingNavionicsMap.prototype.EVENTS,JNC.Views.Map.prototype.EVENTS,{READY:"ProductBoundaryViewer:Ready",PRODUCT_SELECTED:"ProductBoundaryViewer:Product:selected",PRODUCT_UNSELECTED:"ProductBoundaryViewer:Product:unselected",PRODUCT_MOUSE_OVER:"ProductBoundaryViewer:Product:mouseOver",PRODUCT_MOUSE_OUT:"ProductBoundaryViewer:Product:mouseOut"}),ProductBoundaryViewer.prototype.initialize=function(options){var safeOptions,_this=this;return safeOptions=this._sanitize(options),ProductBoundaryViewer.__super__.initialize.call(this,safeOptions),this.doneCallback=safeOptions.ready,this.errorCallback=safeOptions.error,this.isCatalogLoaded=!1,this.currentChartListId=_.uniqueId("ChartListId"),this.currentChartId=void 0,this.currentChartIdUnderTheMouse=void 0,this.catalog=new Product(void 0,safeOptions),this.listenTo(JNC.Events,"event:highlightProduct",function(chartCode){var candidate,_ref1;try{if(null==chartCode)return _this.lowlight();if(candidate=_this.catalog.findWhere({code:chartCode}),(null!=candidate?candidate.get("id"):void 0)!==(null!=(_ref1=_this.currentChartIdUnderTheMouse)?_ref1.get("id"):void 0))return _this.highlight(candidate.get("id"))}catch(_error){return void _error}}),this.listenTo(JNC.Events,"event:selectProduct",function(chartCode){var candidate,_ref1;try{if(null!=chartCode&&(candidate=_this.catalog.findWhere({code:chartCode}),(null!=candidate?candidate.get("id"):void 0)!==(null!=(_ref1=_this.currentChartId)?_ref1.get("id"):void 0)))return _this.select(candidate.get("id"))}catch(_error){return void _error}}),this},ProductBoundaryViewer.prototype.getCatalog=function(){if(!this.isCatalogLoaded)throw new Error("Component is not ready");return this.catalog.toJSON()},ProductBoundaryViewer.prototype.clean=function(){if(!this.isCatalogLoaded)throw new Error("Component is not ready");if(null!=this.currentChartId)return this.removeProductList(this.currentChartListId),this.currentChartId=void 0,this},ProductBoundaryViewer.prototype.show=function(chartId,tryAutoZoom,scope){var chart;if(null==tryAutoZoom&&(tryAutoZoom=!0),null==scope&&(scope=SCOPE.CHART),!this.isCatalogLoaded)throw new Error("Component is not ready");if(!(chart=this.catalog.get(chartId)))throw new Error("Chart Doesn't Exist");return null!=this.currentChartId&&this.clean(),this._applyProductOnMap(this.currentChartListId,chart,scope),this.showProducts(chart.get("code"),this.currentChartListId,tryAutoZoom),this.currentChartId=chart,this.trigger(EVENTS.PRODUCT_SELECTED,chart.toJSON()),this},ProductBoundaryViewer.prototype.select=function(chartId){return this.unselect(),this.currentChartId=this._getRawChartInfo(chartId),this.selectProductItem(this.currentChartId.get("code"),this.currentChartListId),this.trigger(EVENTS.PRODUCT_SELECTED,this.currentChartId.toJSON()),this},ProductBoundaryViewer.prototype.unselect=function(){return null!=this.currentChartId&&(this.unSelectProduct(),this.trigger(EVENTS.PRODUCT_UNSELECTED,this.currentChartId.toJSON()),this.currentChartId=void 0),this},ProductBoundaryViewer.prototype.lowlight=function(){if(null!=this.currentChartIdUnderTheMouse)return this.lowlightProductItem(this.currentChartIdUnderTheMouse.get("code"),this.currentChartListId),this.trigger(EVENTS.PRODUCT_MOUSE_OUT,this.currentChartIdUnderTheMouse.toJSON()),this.currentChartIdUnderTheMouse=void 0},ProductBoundaryViewer.prototype.highlight=function(chartId){this.lowlight(),this.currentChartIdUnderTheMouse=this._getRawChartInfo(chartId),this.highlightProductItem(this.currentChartIdUnderTheMouse.get("code"),this.currentChartListId),this.trigger(EVENTS.PRODUCT_MOUSE_OVER,this.currentChartIdUnderTheMouse.toJSON())},ProductBoundaryViewer.prototype.getChartInfo=function(chartId){return this._getRawChartInfo(chartId).toJSON()},ProductBoundaryViewer.prototype._getRawChartInfo=function(chartId){var chart;if(!this.isCatalogLoaded)throw new Error("Component is not ready");if(!chartId)throw new Error("Chart is required");if(!(chart=this.catalog.get(chartId)))throw new Error("Not found");return chart},ProductBoundaryViewer.prototype.onMapReady=function(e){return this._mapReady=void 0!==this.catalog,ProductBoundaryViewer.__super__.onMapReady.call(this,e)},ProductBoundaryViewer.prototype._sanitize=function(options){var safeOptions,_this=this;return null==options&&(options={}),safeOptions=_.extend(DEFAULT_CONFIG,options),this._isValidLang(safeOptions.locale)||(safeOptions.locale=DEFAULT_CONFIG.locale),safeOptions.onSuccess=function(product){return _this._catalogLoaded(product,_this)},safeOptions.onError=function(){return _this._catalogNotLoaded(_this)},safeOptions},ProductBoundaryViewer.prototype._isValidLang=function(lang){return"en"===lang||"de"===lang||"fr"===lang||"it"===lang||"es"===lang},ProductBoundaryViewer.prototype._catalogLoaded=function(product,context){return context.isCatalogLoaded=!0,"function"==typeof context.doneCallback&&context.doneCallback(context),this.trigger(EVENTS.READY)},ProductBoundaryViewer.prototype._catalogNotLoaded=function(context){if(context.isCatalogLoaded=!1,"function"==typeof context.errorCallback)return context.errorCallback(context)},ProductBoundaryViewer.prototype._applyProductOnMap=function(currentChartListId,chart,scope){return SCOPE.CHART===scope?this._loadChartsOnMap(currentChartListId,[chart]):SCOPE.ALL_PRODUCT===scope?this._loadChartsOnMap(currentChartListId,this.catalog.where({product_id:chart.get("product_id")})):SCOPE.ALL_GROUP===scope?this._loadChartsOnMap(currentChartListId,this.catalog.where({product_id:chart.get("product_id"),group_id:chart.get("group_id")})):SCOPE.ALL_REGION===scope?this._loadChartsOnMap(currentChartListId,this.catalog.where({product_id:chart.get("product_id"),group_id:chart.get("group_id"),region_id:chart.get("region_id")})):void 0},ProductBoundaryViewer.prototype._loadChartsOnMap=function(currentChartListId,arrayOfChart){var chart,chartID,_results;this.productListCreated(currentChartListId),_results=[];for(chartID in arrayOfChart)chart=arrayOfChart[chartID],_results.push(this.productItemCreated(chart.get("code"),currentChartListId,chart.get("boundary_kml_url"),chart.get("color")));return _results},ProductBoundaryViewer}(ProductViewer),JNC.ProductCatalog.ProductBoundaryViewer=JNC.ProductCatalog.Views.ProductBoundaryViewer}),function(root,factory){factory(root.JNC,root.JNC._,root.JNC.ol,root.JNC.DataTypes.Time,root.JNC.Views.TranslatableView,root.JNC.utils.ProtoBufferParser,root.JNC.utils.GeoTools,root.JNC.utils.Converter,root.JNC.utils.GeneralUtils)}(this,function(JNC,_,ol,Time,TranslatableView,ProtoBufferParser,GeoTools,Converter,GeneralUtils){return JNC.utils.TrackNtfViewer=function(){function TrackNtfViewer(map,opts){null==opts&&(opts={}),_.bindAll(this,"_syncUnits"),this._map=map,_.defaults(opts,{protoUrl:null,delimited:!0,messageType:"NavPoint",template:JNC.TPL["ntf/track_default_info"]}),this._options=opts,this._map.$el.addClass("jnc-map-protobuffer"),this._map.on("distance:unit:update",this._syncUnits),this._syncUnits(this._map.getDistanceUnit())}return TrackNtfViewer.prototype._layer=null,TrackNtfViewer.prototype._map=null,TrackNtfViewer.prototype._options=null,TrackNtfViewer.prototype._url=null,TrackNtfViewer.prototype._displayUnits={distance:JNC.DISTANCE_UNIT.NAUTICAL,speed:JNC.SPEED_UNIT.KMPH},TrackNtfViewer.prototype.getLatitude=function(point){var value,_ref,_ref1;return value=null!=point&&null!=(_ref=point.location)&&null!=(_ref1=_ref.latLon)?_ref1.latitude_deg_x1000000:void 0,value&&(value/=1e6),value},TrackNtfViewer.prototype.getLongitude=function(point){var value,_ref,_ref1;return value=null!=point&&null!=(_ref=point.location)&&null!=(_ref1=_ref.latLon)?_ref1.longitude_deg_x1000000:void 0,value&&(value/=1e6),value},TrackNtfViewer.prototype.getUnixTime=function(point){var _ref,_ref1,_ref2;return null!=point&&null!=(_ref=point.time)&&null!=(_ref1=_ref.UTCTime)&&null!=(_ref2=_ref1.UTCUnixTime_s)?_ref2.low:void 0},TrackNtfViewer.prototype.getMsTime=function(point){var _ref,_ref1;return null!=point&&null!=(_ref=point.time)&&null!=(_ref1=_ref.UTCTime)?_ref1.millisecond:void 0},TrackNtfViewer.prototype.view=function(urlOrData,showInfo,callback){var details,options,url,_this=this;return null==showInfo&&(showInfo=!0),null==callback&&(callback=null),this.clear(),url=null,details=null,_.isString(urlOrData)?url=urlOrData:(details=urlOrData,url=details.link),this._url=url,options={protoUrl:this._options.protoUrl,delimited:this._options.delimited,messageType:this._options.messageType,messageUrl:url,onSuccess:function(points){var trackInfo;if(points.length&&_this._url===url&&(trackInfo=_this._parseInfo(points,null===details),details||(details={distance:trackInfo.distance,start:trackInfo.start,end:trackInfo.end}),_.extend(details,{getDistanceDisplayUnit:function(){return _this._displayUnits.distance},getSpeedDisplayUnit:function(){return _this._displayUnits.speed}}),_this._showTrack(trackInfo.coordinates,details),_this._syncBalloonContent(showInfo),callback))return callback(points)},onFailure:this._onError},ProtoBufferParser.parse(options)},TrackNtfViewer.prototype.remove=function(){return this.clear(),this._map.off("distance:unit:update",this._syncUnits)},TrackNtfViewer.prototype.clear=function(){return this._layer&&this._map.clearLayers([this._layer]),this._map.hideBalloons(),this._layer=null,this._url=null},TrackNtfViewer.prototype._syncUnits=function(distanceUnits){return this.setDistanceDisplayUnit(distanceUnits),this.setSpeedDisplayUnit(Converter.distanceUnitsToSpeed(distanceUnits))},TrackNtfViewer.prototype.setDistanceDisplayUnit=function(unit){if(this._displayUnits.distance=unit,this._syncBalloonContent(this._map._balloons.length),this._map.getDistanceUnit()!==unit)return this._map.setDistanceUnit(unit)},TrackNtfViewer.prototype.setSpeedDisplayUnit=function(unit){return this._displayUnits.speed=unit,this._syncBalloonContent(this._map._balloons.length)},TrackNtfViewer.prototype._showTrack=function(coordinates,data){if(coordinates.length)return this._startFeature=this._createStartFeature(coordinates[0],data),this._endFeature=this._createEndFeature(coordinates[coordinates.length-1],data),this._source=new ol.source.Vector({features:[this._createTrackFeature(coordinates,data),this._startFeature,this._endFeature]}),this._layer=new ol.layer.Vector({source:this._source}),this._map.addLayer(this._layer),this._map._view.fitExtent(this._source.getExtent(),this._map._map.getSize())},TrackNtfViewer.prototype.showBalloon=function(centralize){var coordinates,extentCenter,feature,geometry,id,offset,_this=this;if(null==centralize&&(centralize=!1),null!=this._layer)return feature=null,coordinates=null,offset=null,_.each(this._map._balloons,function(balloon){var featureId,features;return featureId=balloon.featureId,features=_this._map.findFeaturesById(featureId,[_this._layer]),features.length&&(feature=features[features.length-1]),coordinates=balloon.options.coordinates,offset=balloon.options.offset}),feature||(feature=this._source.getFeatures()[0],geometry=feature.getGeometry(),extentCenter=ol.extent.getCenter(this._source.getExtent()),coordinates=geometry.getClosestPoint(extentCenter)),id=feature.getId(),null==offset&&(offset=0===id.indexOf("trackFeature")?[0,0]:[3,-30]),this._map.showBalloon({id:id,content:feature.get("description"),coordinates:coordinates,offset:offset},!0,centralize)},TrackNtfViewer.prototype.hideBalloon=function(){return this._map.hideBalloons()},TrackNtfViewer.prototype._onError=function(result){},TrackNtfViewer.prototype._parseInfo=function(points,parseAllData){var coord,coordinates,distance,end,point,relativeToCoordinate,relativeToTime,start,time,_i,_len;for(null==parseAllData&&(parseAllData=!1),coordinates=[],distance=0,start=null,end=null,relativeToCoordinate=null,relativeToTime=null,_i=0,_len=points.length;_i<_len;_i++)point=points[_i],coord=null,time=null,point.isFull?(null!=this.getLatitude(point)&&null!=this.getLongitude(point)&&(coord=this._getCoordinate(point),null===relativeToCoordinate&&(relativeToCoordinate=coord)),null==this.getUnixTime(point)&&null==this.getMsTime(point)||(time=this._getDateTime(point),null===relativeToTime&&(relativeToTime=time))):(null!==relativeToCoordinate&&null!=this.getLatitude(point)&&null!=this.getLongitude(point)&&(coord=this._getCoordinate(point,relativeToCoordinate)),null!==relativeToTime&&this.getUnixTime(point)?time=this._getDateTime(point,relativeToTime):null!=this.getMsTime(point)&&(time=this._getDateTime(point))),coord&&(coord=Converter.standardMercatorToWeb(coord)),parseAllData&&coord&&(coordinates.length&&(distance+=this._getDistance(coordinates[coordinates.length-1],coord)),time&&!start&&(start=time),time&&(end=time)),coord&&coordinates.push(coord);return{coordinates:coordinates,distance:distance,start:start,end:end}},TrackNtfViewer.prototype._createStartFeature=function(coordinate,data){var startFeature;return startFeature=new ol.Feature({geometry:new ol.geom.Point(coordinate),pointData:data,offset:[3,-30]}),startFeature.setId("startFeature"+(data.id||"")),startFeature.setStyle(new ol.style.Style({image:new ol.style.Icon({anchor:[.5,3],anchorYUnits:"pixels",anchorOrigin:"bottom-left",src:JNC.getContext("/map/track_start.png")})})),startFeature},TrackNtfViewer.prototype._createEndFeature=function(coordinate,data){var endFeature;return endFeature=new ol.Feature({geometry:new ol.geom.Point(coordinate),pointData:data,offset:[3,-30]}),endFeature.setId("endFeature"+(data.id||"")),endFeature.setStyle(new ol.style.Style({image:new ol.style.Icon({anchor:[.5,3],anchorYUnits:"pixels",anchorOrigin:"bottom-left",src:JNC.getContext("/map/track_end.png")})})),endFeature},TrackNtfViewer.prototype._createTrackFeature=function(coordinate,data){var featureStyle,trackFeature;return trackFeature=new ol.Feature({geometry:new ol.geom.LineString(coordinate,"XY"),pointData:data,offset:[0,0]}),trackFeature.setId("trackFeature"+(data.id||"")),featureStyle=[new ol.style.Style({stroke:new ol.style.Stroke({color:"#F9E208",width:3})})],GeneralUtils.isTouchSupported()&&featureStyle.splice(0,0,new ol.style.Style({stroke:new ol.style.Stroke({color:"rgba(247,231,111,0.1)",width:15})})),trackFeature.setStyle(featureStyle),trackFeature},TrackNtfViewer.prototype._getDescription=function(data){var context;return null==data?null:(context=new(TranslatableView.extend(data)),this._options.template(context))},TrackNtfViewer.prototype._getCoordinate=function(point,relativeToCoordinate){var coordinate,lat,lng;return coordinate=null,lat=this.getLatitude(point),lng=this.getLongitude(point),null!=lat&&null!=lng&&(relativeToCoordinate&&(lng=relativeToCoordinate[0]+lng,lat=relativeToCoordinate[1]+lat),lat>=-90&&lat<=90&&lng>=-180&&lng<=180&&(coordinate=[lng,lat])),coordinate},TrackNtfViewer.prototype._getDistance=function(from,to){var distance,result;return null!=from&&null!=to?(distance=GeoTools.calculateVincentyDistance(from,to)||0,result=Converter.distance(distance,JNC.DISTANCE_UNIT.METERS,JNC.DISTANCE_UNIT.KILOMETERS)):result=0,result},TrackNtfViewer.prototype._getDateTime=function(point,relativeToTime){var dateTime,msTime,unixTime;return dateTime=null,unixTime=this.getUnixTime(point),msTime=this.getMsTime(point),unixTime>0?relativeToTime?(dateTime=new Date,dateTime.setSeconds(relativeToTime.getSeconds()+unixTime)):dateTime=new Date(1e3*unixTime):msTime>0&&(dateTime=new Date(msTime)),dateTime},TrackNtfViewer.prototype._syncBalloonContent=function(show){var features,_this=this;if(null==show&&(show=!1),null!=this._layer)return features=this._source.getFeatures(),_.each(features,function(feature){var content,data;return data=feature.get("pointData"),content=_this._getDescription(data),feature.set("description",content)}),show?this.showBalloon():void 0},TrackNtfViewer.prototype._value=function(obj,propPath){var arr,items,value;for(value=obj,arr=propPath.reverse(),items=arr.length;value&&items;)--items,value=value[arr[items]];return value},TrackNtfViewer}()});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC._,root.JNC.ol,root.JNC.DataTypes.Time,root.JNC.utils.TrackNtfViewer)}(this,function(JNC,_,ol,Time,TrackNtfViewer){return JNC.utils.SCLViewer=function(_super){function SCLViewer(map,opts){null==opts&&(opts={}),opts=_.defaults(opts,{template:JNC.TPL["ntf/SCL_track_info"]}),SCLViewer.__super__.constructor.call(this,map,opts)}return __extends(SCLViewer,_super),SCLViewer.prototype.view=function(data,showInfo,callback){return null==showInfo&&(showInfo=!0),null==callback&&(callback=null),_.extend(data,{getStatus:function(){return data.track_status?JNC.TRACK_STATUS.toStringStatus(data.track_status.status):""},duration:null!=data.duration?new Time(1e3*data.duration):null,start_date:null!=data.start_date?new Date(1e3*data.start_date):null,end_date:null!=data.end_date?new Date(1e3*data.end_date):null}),SCLViewer.__super__.view.call(this,data,showInfo,callback)},SCLViewer}(TrackNtfViewer)}),function(root,factory){factory(root.JNC)}(this,function(JNC){return JNC.Store={Interactions:{},Models:{},Views:{}}});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC.$,root.JNC._,root.JNC.Backbone,root.JNC.utils.Converter)}(this,function(JNC,$,_,Backbone,Converter){var _ref;return JNC.Store.Models.BoxSelector=function(_super){function BoxSelector(){return _ref=BoxSelector.__super__.constructor.apply(this,arguments)}return __extends(BoxSelector,_super),BoxSelector.prototype.BOX_INITIAL_SIZE_METERS=46300,BoxSelector.prototype.BOX_MAX_WIDTH=2e6,BoxSelector.prototype.BOX_MAX_HEIGHT=2e6,BoxSelector.prototype.defaults={coordinates:!1,offset:[0,0],drag:!1},BoxSelector.prototype.initialize=function(){var coordinates;return coordinates=this.get("coordinates"),coordinates?this.getCoordinatesByBox(coordinates):this.getCoordinatesByBoxCenter(this.get("mapCenter"))},BoxSelector.prototype.getCoordinatesByBoxCenter=function(center){var coordinates,shift;return shift=this.BOX_INITIAL_SIZE_METERS/2,coordinates={corner1:[center[0]-shift,center[1]-shift],corner2:[center[0]+shift,center[1]-shift],corner3:[center[0]+shift,center[1]+shift],corner4:[center[0]-shift,center[1]+shift]},this.set("coordinates",coordinates),coordinates},BoxSelector.prototype.getCoordinatesByBox=function(coordinates){return coordinates={corner1:[coordinates[0],coordinates[1]],corner2:[coordinates[2],coordinates[1]],corner3:[coordinates[2],coordinates[3]],corner4:[coordinates[0],coordinates[3]]},this.set("coordinates",coordinates),coordinates},BoxSelector.prototype.setOffset=function(coordinate,currPos){return this.offset=[coordinate[0]-currPos[0],coordinate[1]-currPos[1]]},BoxSelector.prototype.calculateNewPosition=function(coordinate,element,ruler){var coordinates,newPos;return newPos=[coordinate[0]-this.offset[0],coordinate[1]-this.offset[1]],coordinates=this.get("coordinates"),element===ruler.corner1?coordinates={corner1:newPos,corner2:[this._getValidOldPos("x",coordinates.corner2[0],newPos[0]),newPos[1]],corner3:[this._getValidOldPos("x",coordinates.corner3[0],newPos[0]),this._getValidOldPos("y",coordinates.corner3[1],newPos[1])],corner4:[newPos[0],this._getValidOldPos("y",coordinates.corner4[1],newPos[1])]}:element===ruler.corner2?coordinates={corner1:[this._getValidOldPos("x",coordinates.corner1[0],newPos[0]),newPos[1]],corner2:newPos,corner3:[newPos[0],this._getValidOldPos("y",coordinates.corner3[1],newPos[1])],corner4:[this._getValidOldPos("x",coordinates.corner4[0],newPos[0]),this._getValidOldPos("y",coordinates.corner4[1],newPos[1])]}:element===ruler.corner3?coordinates={corner1:[this._getValidOldPos("x",coordinates.corner1[0],newPos[0]),this._getValidOldPos("y",coordinates.corner1[1],newPos[1])],corner2:[newPos[0],this._getValidOldPos("y",coordinates.corner2[1],newPos[1])],corner3:newPos,corner4:[this._getValidOldPos("x",coordinates.corner4[0],newPos[0]),newPos[1]]}:element===ruler.corner4&&(coordinates={corner1:[newPos[0],this._getValidOldPos("y",coordinates.corner1[1],newPos[1])],corner2:[this._getValidOldPos("x",coordinates.corner2[0],newPos[0]),this._getValidOldPos("y",coordinates.corner2[1],newPos[1])],corner3:[this._getValidOldPos("x",coordinates.corner3[0],newPos[0]),newPos[1]],corner4:newPos}),this.set("coordinates",coordinates),coordinates},BoxSelector.prototype._getValidOldPos=function(axis,oldValue,newValue){var limit;return limit="x"===axis?this.BOX_MAX_WIDTH:this.BOX_MAX_HEIGHT,oldValue>newValue?oldValue-newValue<=limit?oldValue:newValue+limit:newValue-oldValue<=limit?oldValue:newValue-limit},BoxSelector.prototype.getGeometry=function(){var coordinates;return coordinates=this.get("coordinates"),[coordinates.corner1[0],coordinates.corner1[1],coordinates.corner3[0],coordinates.corner3[1]]},BoxSelector}(Backbone.Model)}),function(root,factory){factory(root.JNC,root.JNC.$,root.JNC._,root.JNC.Backbone,root.JNC.utils.Converter)}(this,function(JNC,$,_,Backbone,Converter){return JNC.Store.Interactions.BoxSelector=function(){function BoxSelector(){}return BoxSelector.prototype.addAfterRender=function(){},BoxSelector.prototype.getCenter=function(){},BoxSelector.prototype.addBox=function(){},BoxSelector.prototype.getCorner=function(){},BoxSelector.prototype.getCornerObject=function(){},BoxSelector.prototype.getBoxBorders=function(){},BoxSelector.prototype.addMapObject=function(){},BoxSelector.prototype.getCornerCoordinates=function(){},BoxSelector.prototype.setCornerCoordinates=function(){},BoxSelector.prototype.setBoxBordersCoordinates=function(){},BoxSelector.prototype._getCornerIconStyle=function(){},BoxSelector.prototype.remove=function(){},BoxSelector.prototype.toggleBackground=function(){},BoxSelector}()});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC.$,root.JNC._,root.JNC.Backbone,root.JNC.Store.Interactions.BoxSelector)}(this,function(JNC,$,_,Backbone,BoxSelectorInteractions){return JNC.Store.Interactions.BoxSelectorOpenlayer=function(_super){function BoxSelectorOpenlayer(map){this._map=map}return __extends(BoxSelectorOpenlayer,_super),
BoxSelectorOpenlayer.prototype.BOUDARY_OF_WORLD=[[-36e6,18e6],[36e6,18e6],[36e6,-18e6],[-36e6,-18e6]],BoxSelectorOpenlayer.prototype.addAfterRender=function(func){return this._map._executeFunction(func)},BoxSelectorOpenlayer.prototype.getCenter=function(){return this._map.getRowView().getCenter()},BoxSelectorOpenlayer.prototype.addBox=function(coords,options){return this._source=new ol.source.GeoJSON({object:{type:"Feature",geometry:{type:"Polygon",coordinates:[coords,this.BOUDARY_OF_WORLD]}}}),this._layer=new ol.layer.Vector({source:this._source,style:new ol.style.Style({fill:new ol.style.Fill({color:options.fill.color}),stroke:new ol.style.Stroke({color:options.stroke.color,width:options.stroke.width})})}),this._map.addLayer(this._layer)},BoxSelectorOpenlayer.prototype.getCorner=function(coordinates){return new ol.geom.Point(coordinates)},BoxSelectorOpenlayer.prototype.getCornerObject=function(point,handler){var feature;return feature=new ol.Feature({geometry:point,handler:handler}),feature.setStyle(this._getCornerIconStyle()),feature},BoxSelectorOpenlayer.prototype.getBoxBorders=function(){return _.first(this._source.getFeatures())},BoxSelectorOpenlayer.prototype.addMapObject=function(feature){return this._source.addFeature(feature)},BoxSelectorOpenlayer.prototype.getCornerCoordinates=function(point){return point.getGeometry().getCoordinates()},BoxSelectorOpenlayer.prototype.setCornerCoordinates=function(point,coordinates){return point.getGeometry().setCoordinates(coordinates)},BoxSelectorOpenlayer.prototype.setBoxBordersCoordinates=function(polygon,coordinates){return polygon.getGeometry().setCoordinates([coordinates,this.BOUDARY_OF_WORLD])},BoxSelectorOpenlayer.prototype._getCornerIconStyle=function(){return new ol.style.Style({image:new ol.style.Icon({anchor:[.5,9],anchorXUnits:"fraction",anchorYUnits:"pixels",src:JNC.getContext("/map/boxCorner.png")}),zIndex:1})},BoxSelectorOpenlayer.prototype.remove=function(){return this._map.removeLayer(this._layer)},BoxSelectorOpenlayer.prototype.toggleBackground=function(status){var background,style;return style=this._layer.getStyle(),background=status?"rgba(0,0,0,0.5)":"transparent",style.getFill().setColor(background),this._layer.setStyle(style),this},BoxSelectorOpenlayer}(BoxSelectorInteractions)});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC.$,root.JNC._,root.JNC.Backbone,root.JNC.Views.TranslatableView,root.JNC.utils.Converter,root.JNC.Store.Models.BoxSelector)}(this,function(JNC,$,_,Backbone,TranslatableView,Converter,BoxSelectorModel){return JNC.Store.Views.BoxSelector=function(_super){function BoxSelector(mapInteraction,options){var _this=this;_.bindAll(this,"handler"),this._mapInteraction=mapInteraction,this.options=_.defaults(options,{background:!0,mapCenter:this._mapInteraction.getCenter()}),this.model=new BoxSelectorModel(this.options),this.model.on("change:coordinates",function(event){return _this.redraw()}),this._mapInteraction.addAfterRender(function(){return _this.render()})}return __extends(BoxSelector,_super),BoxSelector.prototype.options={coordinates:null},BoxSelector.prototype.render=function(){var boxOptions,coordinates,coords;return coordinates=this.model.get("coordinates"),coords=[coordinates.corner1,coordinates.corner2,coordinates.corner3,coordinates.corner4],boxOptions={fill:{color:this.options.background?"rgba(0,0,0,0.5)":"transparent"},stroke:{color:"#00f",width:3}},this._mapInteraction.addBox(coords,boxOptions),this._initBoxSelectorView(),this._mapInteraction.addMapObject(this.ruler.corner1),this._mapInteraction.addMapObject(this.ruler.corner2),this._mapInteraction.addMapObject(this.ruler.corner3),this._mapInteraction.addMapObject(this.ruler.corner4)},BoxSelector.prototype._initBoxSelectorView=function(){var coordinates,cornerPoint1,cornerPoint2,cornerPoint3,cornerPoint4;if(null==this.ruler)return coordinates=this.model.get("coordinates"),cornerPoint1=this._mapInteraction.getCorner(coordinates.corner1),cornerPoint2=this._mapInteraction.getCorner(coordinates.corner2),cornerPoint3=this._mapInteraction.getCorner(coordinates.corner3),cornerPoint4=this._mapInteraction.getCorner(coordinates.corner4),this.ruler={polygon:this._mapInteraction.getBoxBorders(),corner1:this._mapInteraction.getCornerObject(cornerPoint1,this.handler),corner2:this._mapInteraction.getCornerObject(cornerPoint2,this.handler),corner3:this._mapInteraction.getCornerObject(cornerPoint3,this.handler),corner4:this._mapInteraction.getCornerObject(cornerPoint4,this.handler)}},BoxSelector.prototype.handler=function(element,event){if(null!=event&&"CANVAS"===event.originalEvent.target.tagName)switch(event.type){case"pointerdown":return this.onPointerDown(element,event);case"pointermove":return this.onPointerMove(element,event);case"pointerup":return this.onPointerUp(element,event)}},BoxSelector.prototype.onPointerDown=function(element,event){var currPos;return currPos=this._mapInteraction.getCornerCoordinates(element),this.model.set("drag",!0),this.model.setOffset(event.coordinate,currPos)},BoxSelector.prototype.onPointerMove=function(element,event){return this.model.calculateNewPosition(event.coordinate,element,this.ruler)},BoxSelector.prototype.onPointerUp=function(element,event){return this.model.set("drag",!1)},BoxSelector.prototype.redraw=function(){var coordinates;if(this.ruler)return coordinates=this.model.get("coordinates"),this._mapInteraction.setCornerCoordinates(this.ruler.corner1,coordinates.corner1),this._mapInteraction.setCornerCoordinates(this.ruler.corner2,coordinates.corner2),this._mapInteraction.setCornerCoordinates(this.ruler.corner3,coordinates.corner3),this._mapInteraction.setCornerCoordinates(this.ruler.corner4,coordinates.corner4),this._mapInteraction.setBoxBordersCoordinates(this.ruler.polygon,[coordinates.corner1,coordinates.corner2,coordinates.corner3,coordinates.corner4])},BoxSelector.prototype.remove=function(){return this._mapInteraction.remove(),this.ruler=null},BoxSelector.prototype.toggleBackground=function(status){return this._mapInteraction.toggleBackground(status)},BoxSelector}(TranslatableView)}),function(root,factory){factory(root.JNC,root.JNC.$,root.JNC._,root.JNC.Backbone,root.JNC.Store.Views.BoxSelector,root.JNC.Store.Interactions.BoxSelectorOpenlayer)}(this,function(JNC,$,_,Backbone,BoxSelectorView,BoxSelectorOpenlayer){return JNC.Store.BoxSelector=function(){function BoxSelector(map,options){null==options&&(options={}),this.boxSelectorMapInteraction=new BoxSelectorOpenlayer(map),this.boxSelectorView=new BoxSelectorView(this.boxSelectorMapInteraction,options)}return BoxSelector.prototype.onResizeDone=function(func){return this.boxSelectorView.model.on("change:drag",function(){var geometry;if(!this.get("drag"))return geometry=this.getGeometry(),func(geometry)})},BoxSelector.prototype.onResize=function(func){return this.boxSelectorView.model.on("change:coordinates",function(){var geometry;return geometry=this.getGeometry(),func(geometry)})},BoxSelector.prototype.disable=function(){return this.boxSelectorView.remove()},BoxSelector.prototype.enable=function(){return this.boxSelectorView.render()},BoxSelector.prototype.toggleBackground=function(status){return this.boxSelectorView.toggleBackground(status)},BoxSelector}()});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC.$,root.JNC._,root.JNC.Backbone,root.JNC.Views.AsyncDataTranslatableView,root.JNC.utils.Formatter,root.vis)}(this,function(JNC,$,_,Backbone,AsyncDataTranslatableView,Formatter,vis){var _ref;return JNC.Widgets.VisChart=function(_super){function VisChart(){return _ref=VisChart.__super__.constructor.apply(this,arguments)}return __extends(VisChart,_super),VisChart.prototype.el="body",VisChart.prototype.defaultsVisOptions={dataAxis:{visible:!1},showMajorLabels:!1,showMinorLabels:!1,zoomable:!1,zoomMax:1116e5,zoomMin:1116e5},VisChart.prototype.initialize=function(options){return null==options&&(options={}),this.chartOptions=_.defaults(options.chart,this.defaultsVisOptions),VisChart.__super__.initialize.apply(this,arguments)},VisChart.prototype.formatDateVisChart=function(time){var date;return null==time?time:(date=Formatter._initDate(time),null!=date&&(date=date.getFullYear()+"-"+(date.getMonth()+1)+"-"+Formatter.addLeadingZero(date.getDate())+" "+Formatter.addLeadingZero(date.getHours())+":"+date.getMinutes()),date)},VisChart}(AsyncDataTranslatableView)});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC.$,root.JNC._,root.JNC.Backbone,root.JNC.Widgets.VisChart)}(this,function(JNC,$,_,Backbone,VisChart){var _ref;return JNC.Widgets.TideCurrentChart=function(_super){function TideCurrentChart(){return _ref=TideCurrentChart.__super__.constructor.apply(this,arguments)}return __extends(TideCurrentChart,_super),TideCurrentChart.prototype.initialize=function(options){return null==options&&(options={}),TideCurrentChart.__super__.initialize.call(this,options)},TideCurrentChart.prototype._calculateMax=function(events){var el,ev,minMax,_i,_len;for(minMax={min:[],max:[],arrows:[]},_i=0,_len=events.length;_i<_len;_i++)ev=events[_i],ev.x=this.formatDateVisChart(ev.date),el={x:ev.x},"TIDE_MIN"===ev.type?(ev.group=2,ev.y=0,ev.label={content:ev.descriptions[0],yOffset:65,className:"tide-min"},minMax.min.push(ev),el.y=0,el.group=5,el.label={content:"Min",className:"arrow-min"},minMax.arrows.push(el)):"TIDE_MAX"===ev.type&&(ev.group=3,ev.y=0,ev.label={content:ev.descriptions[0],yOffset:-55,className:"tide-max"},minMax.max.push(ev),el.y=0,el.group=5,el.label={content:"Max",className:"arrow-max"},minMax.arrows.push(el));return minMax},TideCurrentChart.prototype._calculateMiddle=function(maxDate,minDate,convert){var max,middleDate,min;return!0===convert?(min=Math.ceil(new Date(minDate).getTime()/1e3),max=Math.ceil(new Date(maxDate).getTime()/1e3)):(min=minDate,max=maxDate),middleDate=Math.ceil((parseInt(max)+parseInt(min))/2),this.formatDateVisChart(middleDate)},TideCurrentChart.prototype._findNearest=function(num){var arr,curr,diff,el,newdiff,_i,_len;if(this.response.samples.length>0)for(arr=this.response.samples,curr=arr[0],diff=Math.abs(num-curr.date),0,_i=0,_len=arr.length;_i<_len;_i++)el=arr[_i],(newdiff=Math.abs(num-el.date))<diff&&(diff=newdiff,curr=el);return curr},TideCurrentChart.prototype._middlePoint=function(range,convert){var middle,num;return middle=this._calculateMiddle(range.start,range.end,convert),num=Math.ceil(new Date(middle).getTime()/1e3),this._findNearest(num)},TideCurrentChart}(VisChart)}),function(root,factory){factory(root.JNC)}(this,function(JNC){return JNC.Tide={Models:{},Views:{}}});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC._,root.JNC.Backbone)}(this,function(JNC,_,Backbone){var _ref;return JNC.Tide.Models.TideCollection=function(_super){function TideCollection(){return _ref=TideCollection.__super__.constructor.apply(this,arguments)}return __extends(TideCollection,_super),TideCollection.prototype.initialize=function(models,options){if(null==options&&(options={}),this.domain="//",this.lang="en",this.dpu=JNC.DISTANCE_UNIT.METERS,this.mode=JNC.MODE.MARINE,TideCollection.__super__.initialize.call(this,models,options),null!=options.domain&&(this.domain=options.domain),null!=options.lang&&(this.lang=options.lang),null!=options.dpu&&(this.dpu=options.dpu),null!=options.id&&(this.id=options.id),null!=options.time)return this.time=options.time},TideCollection.prototype.url=function(){return this.domain+"/api/"+this.mode+"/tides/"+this.id+"?lang="+this.lang+"&time="+this.time+"&dpu="+this.dpu},TideCollection.prototype.parse=function(response,options){if(response.samples)return TideCollection.__super__.parse.call(this,response.samples,options)},TideCollection}(Backbone.Collection)});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC._,root.JNC.Backbone)}(this,function(JNC,_,Backbone){var _ref;return JNC.Tide.Models.Tide=function(_super){function Tide(){return _ref=Tide.__super__.constructor.apply(this,arguments)}return __extends(Tide,_super),Tide.prototype.defaults=function(){return{id:null,name:null,icon:null,type:null,samples:[],events:[]}},Tide}(Backbone.Model)});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC._,root.JNC.$,root.JNC.Backbone,root.JNC.Widgets.TideCurrentChart)}(this,function(JNC,_,$,Backbone,TideCurrentChart){var _ref;return JNC.Tide.Views.TideChart=function(_super){function TideChart(){return _ref=TideChart.__super__.constructor.apply(this,arguments)}var EVENTS;return __extends(TideChart,_super),TideChart.EVENTS=EVENTS={SELECTION_CHANGED:"DWS:CHANGE:STATUS"},TideChart.prototype.endpoint=null,TideChart.prototype.container=null,TideChart.prototype.data_model=null,TideChart.prototype.initialize=function(options){if(null==options&&(options={}),TideChart.__super__.initialize.call(this,options),_.extend(this,Backbone.Events),null==options.containerSelector)throw"Container selector should be provided";if(null==options.data_model)throw"Model should be provided";return this.container=$(options.containerSelector).get(0),this.endpoint=options.endpoint,this.data_model=options.data_model},TideChart.prototype.display=function(){var _this=this;return this.data_model.fetch({success:function(model,response,options){return _this.elaborateData(response)},error:function(){}})},TideChart.prototype.showGraph=function(items,minDate,maxDate,events){var Graph2d,defaultOptions,groups,maxDateString,middle,minDateString,params,points,today,_this=this;return maxDateString=this.formatDateVisChart(maxDate+55800),minDateString=this.formatDateVisChart(minDate-55800),groups=new vis.DataSet,groups.add({id:0,content:"Point",options:{drawPoints:!1,shaded:{orientation:"bottom"}}}),groups.add({id:1,className:"vis-graph-group1 middle-point",content:"Middle",options:{drawPoints:{size:34,style:"circle"}}}),groups.add({id:2,content:"Min",className:"vis-graph-group2 min-point vis-hide-point",options:{drawPoints:{style:"circle"}}}),groups.add({id:3,content:"Max",className:"vis-graph-group3 max-point vis-hide-point",options:{drawPoints:{style:"circle"}}}),groups.add({id:4,content:"Today",className:"today-point",options:{drawPoints:{style:"circle"}}}),points=items.concat(events.min,events.max),this.dataset=new vis.DataSet(points),defaultOptions={start:minDateString,end:maxDateString,min:minDateString,max:maxDateString},params=_.defaults(defaultOptions,this.chartOptions),Graph2d=new vis.Graph2d(this.container,this.dataset,groups,params),middle=this._middlePoint({start:minDate,end:maxDate},!1),this.dataset.add({id:"middlePoint",x:middle.x,y:middle.y,group:1,label:{content:"Now",className:"middle-label",xOffset:-16,yOffset:35}}),today=this._findNearest(1453477500),this.dataset.add({id:"today",x:today.x,y:today.y,group:4,label:{content:"today",className:"today-label"}}),Graph2d.on("rangechange",function(range){var currentMiddle;return currentMiddle=_this._middlePoint(range,!0),_this._changeCenter(currentMiddle)}),Graph2d.on("rangechanged",function(range){var currentMiddle;return currentMiddle=_this._middlePoint(range,!0),_this._changeCenter(currentMiddle)})},TideChart.prototype._changeCenter=function(point){return this.dataset.update({id:"middlePoint",x:point.x,y:point.y}),this.trigger(EVENTS.SELECTION_CHANGED,point)},TideChart.prototype.elaborateData=function(response){var el,elTime,events,items,maxDate,minDate,_i,_len,_ref1;for(this.response=response,items=[],_ref1=this.response.samples,_i=0,_len=_ref1.length;_i<_len;_i++)el=_ref1[_i],(void 0===minDate||null===minDate||minDate>el.date)&&(minDate=el.date),(void 0===maxDate||null===maxDate||maxDate<el.date)&&(maxDate=el.date),elTime=this.formatDateVisChart(el.date),el.x=elTime,el.y=el.value,el.group=0,items.push(el);return events=this._calculateMax(this.response.events),this.showGraph(items,minDate,maxDate,events)},TideChart}(TideCurrentChart)}),function(root,factory){factory(root.JNC)}(this,function(JNC){return JNC.Current={Models:{},Views:{}}});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC._,root.JNC.Backbone)}(this,function(JNC,_,Backbone){var _ref;return JNC.Current.Models.CurrentCollection=function(_super){function CurrentCollection(){return _ref=CurrentCollection.__super__.constructor.apply(this,arguments)}return __extends(CurrentCollection,_super),CurrentCollection.prototype.initialize=function(models,options){if(null==options&&(options={}),this.domain="//",this.lang="en",this.su=JNC.SPEED_UNIT.KMPH,this.mode=JNC.MODE.MARINE,CurrentCollection.__super__.initialize.call(this,models,options),null!=options.domain&&(this.domain=options.domain),null!=options.lang&&(this.lang=options.lang),null!=options.su&&(this.su=options.su),null!=options.id&&(this.id=options.id),null!=options.time)return this.time=options.time},CurrentCollection.prototype.url=function(){return this.domain+"/api/"+this.mode+"/currents/"+this.id+"?lang="+this.lang+"&time="+this.time+"&su="+this.su},CurrentCollection.prototype.parse=function(response,options){if(response.samples)return CurrentCollection.__super__.parse.call(this,response.samples,options)},CurrentCollection}(Backbone.Collection)});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC._,root.JNC.Backbone)}(this,function(JNC,_,Backbone){var _ref;return JNC.Current.Models.Current=function(_super){function Current(){return _ref=Current.__super__.constructor.apply(this,arguments)}return __extends(Current,_super),Current.prototype.defaults=function(){return{id:null,name:null,icon:null,type:null,samples:[],events:[]}},Current}(Backbone.Model)});var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};!function(root,factory){factory(root.JNC,root.JNC._,root.JNC.$,root.JNC.Backbone,root.JNC.Widgets.TideCurrentChart)}(this,function(JNC,_,$,Backbone,TideCurrentChart){var _ref;return JNC.Current.Views.CurrentChart=function(_super){function CurrentChart(){return _ref=CurrentChart.__super__.constructor.apply(this,arguments)}var EVENTS;return __extends(CurrentChart,_super),CurrentChart.EVENTS=EVENTS={SELECTION_CHANGED:"DWS:CHANGE:STATUS"},CurrentChart.prototype.endpoint=null,CurrentChart.prototype.container=null,CurrentChart.prototype.data_model=null,CurrentChart.prototype.initialize=function(options){if(null==options&&(options={}),CurrentChart.__super__.initialize.call(this,options),_.extend(this,Backbone.Events),null==options.containerSelector)throw"Container selector should be provided";if(null==options.data_model)throw"Model should be provided";return this.container=$(options.containerSelector).get(0),this.endpoint=options.endpoint,this.data_model=options.data_model},CurrentChart.prototype.display=function(){var _this=this;return this.data_model.fetch({success:function(model,response,options){return _this.elaborateData(response)},error:function(){}})},CurrentChart.prototype.showGraph=function(items,minDate,maxDate,events){var Graph2d,defaultOptions,groups,maxDateString,middle,minDateString,params,points,today,_this=this;return maxDateString=this.formatDateVisChart(maxDate+55800),minDateString=this.formatDateVisChart(minDate-55800),groups=new vis.DataSet,groups.add({id:0,content:"Point",options:{drawPoints:!1,shaded:{orientation:"bottom"}}}),groups.add({id:1,className:"vis-graph-group1 middle-point",content:"Middle",options:{drawPoints:{size:34,style:"circle"}}}),groups.add({id:2,content:"Min",className:"vis-graph-group2 min-point",options:{drawPoints:{style:"circle"}}}),groups.add({id:3,content:"Max",className:"vis-graph-group3 max-point",options:{drawPoints:{style:"circle"}}}),groups.add({id:4,content:"Today",className:"today-point",options:{drawPoints:{style:"circle"}}}),groups.add({id:5,content:"Arrows",className:"arrows-point",options:{drawPoints:{style:"circle"}}}),points=items.concat(events.min,events.max,events.arrows),this.dataset=new vis.DataSet(points),defaultOptions={start:minDateString,end:maxDateString,min:minDateString,max:maxDateString},params=_.defaults(defaultOptions,this.chartOptions),Graph2d=new vis.Graph2d(this.container,this.dataset,groups,params),middle=this._middlePoint({start:minDate,end:maxDate},!1),this.dataset.add({id:"middlePoint",x:middle.x,y:middle.y,group:1,label:{content:"Now",className:"middle-label",xOffset:-16,yOffset:35}}),today=this._findNearest(1453477500),this.dataset.add({id:"today",x:today.x,y:today.y,group:4,label:{content:"today",className:"today-label"}}),Graph2d.on("rangechange",function(range){var currentMiddle;return currentMiddle=_this._middlePoint(range,!0),_this._changeCenter(currentMiddle)}),Graph2d.on("rangechanged",function(range){var currentMiddle;return currentMiddle=_this._middlePoint(range,!0),_this._changeCenter(currentMiddle)})},CurrentChart.prototype._changeCenter=function(point){return this.dataset.update({id:"middlePoint",x:point.x,y:point.y}),this.trigger(EVENTS.SELECTION_CHANGED,point)},CurrentChart.prototype.elaborateData=function(response){var el,elTime,events,items,maxDate,minDate,_i,_len,_ref1;for(this.response=response,items=[],_ref1=this.response.samples,_i=0,_len=_ref1.length;_i<_len;_i++)el=_ref1[_i],(void 0===minDate||null===minDate||minDate>el.date)&&(minDate=el.date),(void 0===maxDate||null===maxDate||maxDate<el.date)&&(maxDate=el.date),elTime=this.formatDateVisChart(el.date),el.x=elTime,el.y=el.value,el.group=0,items.push(el);return events=this._calculateMax(this.response.events),this.showGraph(items,minDate,maxDate,events)},CurrentChart}(TideCurrentChart)});